!function(){"use strict";function a(b){var c=a.resolve(b);if(null!=c){var d=a.modules[c];if(!d._resolving&&!d.exports){var e={};e.exports={},e.client=e.component=!0,d._resolving=!0,d.call(this,e.exports,a.relative(c),e),delete d._resolving,d.exports=e.exports}return d.exports}}a.modules={},a.aliases={},a.exts=["",".js",".json","/index.js","/index.json"],a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=0;5>c;c++){var d=b+a.exts[c];if(a.modules.hasOwnProperty(d))return d;if(a.aliases.hasOwnProperty(d))return a.aliases[d]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."===b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){a.modules.hasOwnProperty(b)&&(a.aliases[c]=b)},a.relative=function(b){function c(d){var e=c.resolve(d);return a(e,b,d)}var d=a.normalize(b,"..");return c.resolve=function(c){var e=c.charAt(0);if("/"===e)return c.slice(1);if("."===e)return a.normalize(d,c);for(var f=b.split("/"),g=f.length;g--&&"deps"!==f[g];);return c=f.slice(0,g+2).join("/")+"/deps/"+c},c.exists=function(b){return a.modules.hasOwnProperty(c.resolve(b))},c},a.register("vue/src/main.js",function(a,b,c){function d(a){var b=this;a.data&&(a.defaultData=a.data,delete a.data),b!==g&&(a=e(a,b.options,!0)),h.processOptions(a);var c=function(c,d){d||(c=e(c,a,!0)),b.call(this,c,!0)},f=c.prototype=Object.create(b.prototype);return h.defProtected(f,"constructor",c),c.extend=d,c.super=b,c.options=a,j.forEach(function(a){c[a]=g[a]}),c.use=g.use,c.require=g.require,c}function e(a,b,c){if(a=a||{},!b)return a;for(var d in b)if("el"!==d){var f=a[d],i=b[d];c&&"function"==typeof f&&i?(a[d]=[f],Array.isArray(i)?a[d]=a[d].concat(i):a[d].push(i)):!c||!h.isTrueObject(f)&&!h.isTrueObject(i)||i instanceof g?void 0===f&&(a[d]=i):a[d]=e(f,i)}return a}var f=b("./config"),g=b("./viewmodel"),h=b("./utils"),i=h.hash,j=["directive","filter","partial","effect","component"];b("./observer"),b("./transition"),g.options=f.globalAssets={directives:b("./directives"),filters:b("./filters"),partials:i(),effects:i(),components:i()},j.forEach(function(a){g[a]=function(b,c){var d=this.options[a+"s"];return d||(d=this.options[a+"s"]=i()),c?("partial"===a?c=h.toFragment(c):"component"===a?c=h.toConstructor(c):"filter"===a&&h.checkFilter(c),d[b]=c,this):d[b]}}),g.config=function(a,b){if("string"==typeof a){if(void 0===b)return f[a];f[a]=b}else h.extend(f,a);return this},g.use=function(a){if("string"==typeof a)try{a=b(a)}catch(c){return}var d=[].slice.call(arguments,1);return d.unshift(this),"function"==typeof a.install?a.install.apply(a,d):a.apply(null,d),this},g.require=function(a){return b("./"+a)},g.extend=d,g.nextTick=h.nextTick,c.exports=g}),a.register("vue/src/emitter.js",function(a,b,c){function d(a){this._ctx=a||this}var e=[].slice,f=d.prototype;f.on=function(a,b){return this._cbs=this._cbs||{},(this._cbs[a]=this._cbs[a]||[]).push(b),this},f.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._cbs=this._cbs||{},c.fn=b,this.on(a,c),this},f.off=function(a,b){if(this._cbs=this._cbs||{},!arguments.length)return this._cbs={},this;var c=this._cbs[a];if(!c)return this;if(1===arguments.length)return delete this._cbs[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},f.emit=function(a,b,c,d){this._cbs=this._cbs||{};var e=this._cbs[a];if(e){e=e.slice(0);for(var f=0,g=e.length;g>f;f++)e[f].call(this._ctx,b,c,d)}return this},f.applyEmit=function(a){this._cbs=this._cbs||{};var b,c=this._cbs[a];if(c){c=c.slice(0),b=e.call(arguments,1);for(var d=0,f=c.length;f>d;d++)c[d].apply(this._ctx,b)}return this},c.exports=d}),a.register("vue/src/config.js",function(a,b,c){var d=b("./text-parser");c.exports={prefix:"v",debug:!1,silent:!1,enterClass:"v-enter",leaveClass:"v-leave",interpolate:!0},Object.defineProperty(c.exports,"delimiters",{get:function(){return d.delimiters},set:function(a){d.setDelimiters(a)}})}),a.register("vue/src/utils.js",function(a,b,c){function d(a){return a.indexOf("[")<0?a:a.replace(l,".$1").replace(m,".$1")}var e,f=b("./config"),g={}.toString,h=window,i=(h.console,Object.defineProperty),j="object",k=/[^\w]this[^\w]/,l=/\['([^']+)'\]/g,m=/\["([^"]+)"\]/g,n="classList"in document.documentElement,o=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.setTimeout,p=c.exports={toFragment:b("./fragment"),get:function(a,b){if(b=d(b),b.indexOf(".")<0)return a[b];for(var c=b.split("."),e=-1,f=c.length;++e<f&&null!=a;)a=a[c[e]];return a},set:function(a,b,c){if(b=d(b),b.indexOf(".")<0)return void(a[b]=c);for(var e=b.split("."),f=-1,g=e.length-1;++f<g;)null==a[e[f]]&&(a[e[f]]={}),a=a[e[f]];a[e[f]]=c},baseKey:function(a){return a.indexOf(".")>0?a.split(".")[0]:a},hash:function(){return Object.create(null)},attr:function(a,b){var c=f.prefix+"-"+b,d=a.getAttribute(c);return null!==d&&a.removeAttribute(c),d},defProtected:function(a,b,c,d,e){i(a,b,{value:c,enumerable:d,writable:e,configurable:!0})},isObject:function(a){return typeof a===j&&a&&!Array.isArray(a)},isTrueObject:function(a){return"[object Object]"===g.call(a)},bind:function(a,b){return function(c){return a.call(b,c)}},guard:function(a){return null==a?"":"object"==typeof a?JSON.stringify(a):a},checkNumber:function(a){return isNaN(a)||null===a||"boolean"==typeof a?a:Number(a)},extend:function(a,b){for(var c in b)a[c]!==b[c]&&(a[c]=b[c]);return a},unique:function(a){for(var b,c=p.hash(),d=a.length,e=[];d--;)b=a[d],c[b]||(c[b]=1,e.push(b));return e},toConstructor:function(a){return e=e||b("./viewmodel"),p.isObject(a)?e.extend(a):"function"==typeof a?a:null},checkFilter:function(a){k.test(a.toString())&&(a.computed=!0)},processOptions:function(a){var b,c=a.components,d=a.partials,e=a.template,f=a.filters;if(c)for(b in c)c[b]=p.toConstructor(c[b]);if(d)for(b in d)d[b]=p.toFragment(d[b]);if(f)for(b in f)p.checkFilter(f[b]);e&&(a.template=p.toFragment(e))},nextTick:function(a){o(a,0)},addClass:function(a,b){if(n)a.classList.add(b);else{var c=" "+a.className+" ";c.indexOf(" "+b+" ")<0&&(a.className=(c+b).trim())}},removeClass:function(a,b){if(n)a.classList.remove(b);else{for(var c=" "+a.className+" ",d=" "+b+" ";c.indexOf(d)>=0;)c=c.replace(d," ");a.className=c.trim()}},objectToArray:function(a){var b,c,d=[];for(var e in a)b=a[e],c=p.isObject(b)?b:{$value:b},c.$key=e,d.push(c);return d}}}),a.register("vue/src/fragment.js",function(a,b,c){var d={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};d.td=d.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],d.option=d.optgroup=[1,'<select multiple="multiple">',"</select>"],d.thead=d.tbody=d.colgroup=d.caption=d.tfoot=[1,"<table>","</table>"],d.text=d.circle=d.ellipse=d.line=d.path=d.polygon=d.polyline=d.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var e=/<([\w:]+)/;c.exports=function(a){if("string"!=typeof a)return a;if("#"===a.charAt(0)){var b=document.getElementById(a.slice(1));if(!b)return;if("TEMPLATE"===b.tagName&&b.content)return b.content;a=b.innerHTML}var c=document.createDocumentFragment(),f=e.exec(a);if(!f)return c.appendChild(document.createTextNode(a)),c;var g=f[1],h=d[g]||d._default,i=h[0],j=h[1],k=h[2],l=document.createElement("div");for(l.innerHTML=j+a.trim()+k;i--;)l=l.lastChild;if(l.firstChild===l.lastChild)return c.appendChild(l.firstChild),c;for(var m;m=l.firstChild;)1===l.nodeType&&c.appendChild(m);return c}}),a.register("vue/src/compiler.js",function(a,b,c){function d(a,b){var c,d,f=this;f.init=!0,f.destroyed=!1,b=f.options=b||{},j.processOptions(b),q(f,b.compilerOptions),f.repeat=f.repeat||!1,f.expCache=f.expCache||{};var h=f.el=f.setupElement(b);f.vm=h.vue_vm=a,f.bindings=j.hash(),f.dirs=[],f.deferred=[],f.computed=[],f.children=[],f.emitter=new g(a),a.$={},a.$el=h,a.$options=b,a.$compiler=f,a.$event=null;var i=b.parent;if(i&&(f.parent=i.$compiler,i.$compiler.children.push(f),a.$parent=i,"lazy"in b||(b.lazy=f.parent.options.lazy)),a.$root=e(f).vm,f.setupObserver(),b.methods)for(c in b.methods)f.createBinding(c);if(b.computed)for(c in b.computed)f.createBinding(c);var k=f.data=b.data||{},l=b.defaultData;if(l)for(c in l)r.call(k,c)||(k[c]=l[c]);var m=b.paramAttributes;if(m)for(d=m.length;d--;)k[m[d]]=j.checkNumber(f.eval(h.getAttribute(m[d])));q(a,k),a.$data=k,f.execHook("created"),k=f.data=a.$data;var o;for(c in a)o=a[c],"$"!==c.charAt(0)&&k[c]!==o&&"function"!=typeof o&&(k[c]=o);for(f.observeData(k),b.template&&this.resolveContent(),f.compile(h,!0),d=f.deferred.length;d--;)f.bindDirective(f.deferred[d]);f.deferred=null,this.computed.length&&n.parse(this.computed),f.init=!1,f.execHook("ready")}function e(a){for(;a.parent;)a=a.parent;return a}var f,g=b("./emitter"),h=b("./observer"),i=b("./config"),j=b("./utils"),k=b("./binding"),l=b("./directive"),m=b("./text-parser"),n=b("./deps-parser"),o=b("./exp-parser"),p=[].slice,q=j.extend,r={}.hasOwnProperty,s=Object.defineProperty,t=["created","ready","beforeDestroy","afterDestroy","attached","detached"],u=["if","repeat","view","component"],v=d.prototype;v.setupElement=function(a){var b,c,d,e,f,g="string"==typeof a.el?document.querySelector(a.el):a.el||document.createElement(a.tagName||"div"),h=a.template;if(h){if(g.hasChildNodes())for(this.rawContent=document.createElement("div");b=g.firstChild;)this.rawContent.appendChild(b);if(a.replace&&h.firstChild===h.lastChild){if(c=h.firstChild.cloneNode(!0),g.parentNode&&(g.parentNode.insertBefore(c,g),g.parentNode.removeChild(g)),g.hasAttributes())for(d=g.attributes.length;d--;)e=g.attributes[d],c.setAttribute(e.name,e.value);g=c}else g.appendChild(h.cloneNode(!0))}if(a.id&&(g.id=a.id),a.className&&(g.className=a.className),f=a.attributes)for(e in f)g.setAttribute(e,f[e]);return g},v.resolveContent=function(){function a(a,b){for(var c=a.parentNode,d=0,e=b.length;e>d;d++)c.insertBefore(b[d],a);c.removeChild(a)}var b,c,d,e,f,g=p.call(this.el.getElementsByTagName("content")),h=this.rawContent;if(d=g.length){for(;d--;)b=g[d],h?(c=b.getAttribute("select"),c?b.content=p.call(h.querySelectorAll(c)):f=b):b.content=p.call(b.childNodes);for(d=0,e=g.length;e>d;d++)b=g[d],b!==f&&a(b,b.content);h&&f&&a(f,p.call(h.childNodes))}this.rawContent=null},v.setupObserver=function(){function a(a){e(a),n.catcher.emit("get",h[a])}function b(a,b,c){j.emit("change:"+a,b,c),e(a),h[a].update(b)}function c(a,b){j.on("hook:"+a,function(){b.call(f.vm)})}function d(a){var b=f.children;if(b)for(var c,d=b.length;d--;)c=b[d],c.el.parentNode&&(a="hook:"+(a?"attached":"detached"),c.observer.emit(a),c.emitter.emit(a))}function e(a){h[a]||f.createBinding(a)}var f=this,h=f.bindings,i=f.options,j=f.observer=new g(f.vm);j.proxies={},j.on("get",a).on("set",b).on("mutate",b);for(var k,l,m,o=t.length;o--;)if(l=t[o],m=i[l],Array.isArray(m))for(k=m.length;k--;)c(l,m[k]);else m&&c(l,m);j.on("hook:attached",function(){d(1)}).on("hook:detached",function(){d(0)})},v.observeData=function(a){function b(a){"$data"!==a&&c()}function c(){f.update(d.data),e.emit("change:$data",d.data)}var d=this,e=d.observer;h.observe(a,"",e);var f=d.bindings.$data=new k(d,"$data");f.update(a),s(d.vm,"$data",{get:function(){return d.observer.emit("get","$data"),d.data},set:function(a){var b=d.data;h.unobserve(b,"",e),d.data=a,h.copyPaths(a,b),h.observe(a,"",e),c()}}),e.on("set",b).on("mutate",b)},v.compile=function(a,b){var c=a.nodeType;1===c&&"SCRIPT"!==a.tagName?this.compileElement(a,b):3===c&&i.interpolate&&this.compileTextNode(a)},v.checkPriorityDir=function(a,b,c){var d,e,f;if("component"===a&&c!==!0&&(f=this.resolveComponent(b,void 0,!0))?(e=this.parseDirective(a,"",b),e.Ctor=f):(d=j.attr(b,a),e=d&&this.parseDirective(a,d,b)),e){if(c===!0)return;return this.deferred.push(e),!0}},v.compileElement=function(a,b){if("TEXTAREA"===a.tagName&&a.value&&(a.value=this.eval(a.value)),a.hasAttributes()||a.tagName.indexOf("-")>-1){if(null!==j.attr(a,"pre"))return;var c,d,e,f;for(c=0,d=u.length;d>c;c++)if(this.checkPriorityDir(u[c],a,b))return;a.vue_trans=j.attr(a,"transition"),a.vue_anim=j.attr(a,"animation"),a.vue_effect=this.eval(j.attr(a,"effect"));var g,h,k,l,n,o,q,r=i.prefix+"-",s=this.options.paramAttributes;if(b){var t=j.attr(a,"with");if(t)for(n=this.parseDirective("with",t,a,!0),e=0,f=n.length;f>e;e++)this.bindDirective(n[e],this.parent)}var v=p.call(a.attributes);for(c=0,d=v.length;d>c;c++){if(g=v[c],h=g.name,k=!1,0===h.indexOf(r))for(k=!0,q=h.slice(r.length),n=this.parseDirective(q,g.value,a,!0),e=0,f=n.length;f>e;e++)this.bindDirective(n[e]);else i.interpolate&&(l=m.parseAttr(g.value),l&&(o=this.parseDirective("attr",l,a),o.arg=h,s&&s.indexOf(h)>-1?this.bindDirective(o,this.parent):this.bindDirective(o)));k&&"cloak"!==q&&a.removeAttribute(h)}}a.hasChildNodes()&&p.call(a.childNodes).forEach(this.compile,this)},v.compileTextNode=function(a){var b=m.parse(a.nodeValue);if(b){for(var c,d,e,f=0,g=b.length;g>f;f++)d=b[f],e=null,d.key?">"===d.key.charAt(0)?(c=document.createComment("ref"),e=this.parseDirective("partial",d.key.slice(1),c)):d.html?(c=document.createComment(i.prefix+"-html"),e=this.parseDirective("html",d.key,c)):(c=document.createTextNode(""),e=this.parseDirective("text",d.key,c)):c=document.createTextNode(d),a.parentNode.insertBefore(c,a),this.bindDirective(e);a.parentNode.removeChild(a)}},v.parseDirective=function(a,b,c,d){function e(b){return new l(a,b,g,f,c)}var f=this,g=f.getOption("directives",a);if(g){var h=l.parse(b);return d?h.map(e):e(h[0])}},v.bindDirective=function(a,b){if(a){if(this.dirs.push(a),a.isEmpty||a.isLiteral)return void(a.bind&&a.bind());var c,d=b||this,e=a.key;if(a.isExp)c=d.createBinding(e,a);else{for(;d&&!d.hasKey(e);)d=d.parent;d=d||this,c=d.bindings[e]||d.createBinding(e)}c.dirs.push(a),a.binding=c;var f=c.val();a.bind&&a.bind(f),a.$update(f,!0)}},v.createBinding=function(a,b){var c=this,d=c.options.methods,e=b&&b.isExp,f=b&&b.isFn||d&&d[a],g=c.bindings,i=c.options.computed,l=new k(c,a,e,f);if(e)c.defineExp(a,l,b);else if(f)g[a]=l,c.defineVmProp(a,l,d[a]);else if(g[a]=l,l.root)i&&i[a]?c.defineComputed(a,l,i[a]):"$"!==a.charAt(0)?c.defineDataProp(a,l):(c.defineVmProp(a,l,c.data[a]),delete c.data[a]);else if(i&&i[j.baseKey(a)])c.defineExp(a,l);else{h.ensurePath(c.data,a);var m=a.slice(0,a.lastIndexOf("."));g[m]||c.createBinding(m)}return l},v.defineDataProp=function(a,b){var c=this,d=c.data,e=d.__emitter__;r.call(d,a)||(d[a]=void 0),e&&!r.call(e.values,a)&&h.convertKey(d,a),b.value=d[a],s(c.vm,a,{get:function(){return c.data[a]},set:function(b){c.data[a]=b}})},v.defineVmProp=function(a,b,c){var d=this.observer;b.value=c,s(this.vm,a,{get:function(){return h.shouldGet&&d.emit("get",a),b.value},set:function(b){d.emit("set",a,b)}})},v.defineExp=function(a,b,c){var d=c&&c.computedKey,e=d?c.expression:a,f=this.expCache[e];f||(f=this.expCache[e]=o.parse(d||a,this)),f&&this.markComputed(b,f)},v.defineComputed=function(a,b,c){this.markComputed(b,c),s(this.vm,a,{get:b.value.$get,set:b.value.$set})},v.markComputed=function(a,b){a.isComputed=!0,a.isFn?a.value=b:("function"==typeof b&&(b={$get:b}),a.value={$get:j.bind(b.$get,this.vm),$set:b.$set?j.bind(b.$set,this.vm):void 0}),this.computed.push(a)},v.getOption=function(a,b,c){var d=this.options,e=this.parent,f=i.globalAssets,g=d[a]&&d[a][b]||(e?e.getOption(a,b,c):f[a]&&f[a][b]);return g},v.execHook=function(a){a="hook:"+a,this.observer.emit(a),this.emitter.emit(a)},v.hasKey=function(a){var b=j.baseKey(a);return r.call(this.data,b)||r.call(this.vm,b)},v.eval=function(a,b){var c=m.parseAttr(a);return c?o.eval(c,this,b):a},v.resolveComponent=function(a,c,d){f=f||b("./viewmodel");var e=j.attr(a,"component"),g=a.tagName,h=this.eval(e,c),i=g.indexOf("-")>0&&g.toLowerCase(),k=this.getOption("components",h||i,!0);return d?""===e?f:k:k||f},v.destroy=function(a){if(!this.destroyed){var b,c,d,e,f,g,i=this,j=i.vm,k=i.el,l=i.dirs,m=i.computed,n=i.bindings,o=i.children,p=i.parent;for(i.execHook("beforeDestroy"),h.unobserve(i.data,"",i.observer),b=o.length;b--;)o[b].destroy(!0);for(b=l.length;b--;)e=l[b],e.binding&&e.binding.compiler!==i&&(f=e.binding.dirs,f&&(c=f.indexOf(e),c>-1&&f.splice(c,1))),e.$unbind();for(b=m.length;b--;)m[b].unbind();for(d in n)g=n[d],g&&g.unbind();p&&(c=p.children.indexOf(i),c>-1&&p.children.splice(c,1)),a||(k===document.body?k.innerHTML="":j.$remove()),k.vue_vm=null,i.destroyed=!0,i.execHook("afterDestroy"),i.observer.off(),i.emitter.off()}},c.exports=d}),a.register("vue/src/viewmodel.js",function(a,b,c){function d(a){new f(this,a)}function e(a){return"string"==typeof a?document.querySelector(a):a}var f=b("./compiler"),g=b("./utils"),h=b("./transition"),i=b("./batcher"),j=[].slice,k=g.defProtected,l=g.nextTick,m=new i,n=1,o=d.prototype;k(o,"$get",function(a){var b=g.get(this,a);return void 0===b&&this.$parent?this.$parent.$get(a):b}),k(o,"$set",function(a,b){g.set(this,a,b)}),k(o,"$watch",function(a,b){function c(){var a=j.call(arguments);m.push({id:d,override:!0,execute:function(){b.apply(e,a)}})}var d=n++,e=this;b._fn=c,e.$compiler.observer.on("change:"+a,c)}),k(o,"$unwatch",function(a,b){var c=["change:"+a],d=this.$compiler.observer;b&&c.push(b._fn),d.off.apply(d,c)}),k(o,"$destroy",function(){this.$compiler.destroy()}),k(o,"$broadcast",function(){for(var a,b=this.$compiler.children,c=b.length;c--;)a=b[c],a.emitter.applyEmit.apply(a.emitter,arguments),a.vm.$broadcast.apply(a.vm,arguments)}),k(o,"$dispatch",function(){var a=this.$compiler,b=a.emitter,c=a.parent;b.applyEmit.apply(b,arguments),c&&c.vm.$dispatch.apply(c.vm,arguments)}),["emit","on","off","once"].forEach(function(a){var b="emit"===a?"applyEmit":a;k(o,"$"+a,function(){var a=this.$compiler.emitter;a[b].apply(a,arguments)})}),k(o,"$appendTo",function(a,b){a=e(a);var c=this.$el;h(c,1,function(){a.appendChild(c),b&&l(b)},this.$compiler)}),k(o,"$remove",function(a){var b=this.$el;h(b,-1,function(){b.parentNode&&b.parentNode.removeChild(b),a&&l(a)},this.$compiler)}),k(o,"$before",function(a,b){a=e(a);var c=this.$el;h(c,1,function(){a.parentNode.insertBefore(c,a),b&&l(b)},this.$compiler)}),k(o,"$after",function(a,b){a=e(a);var c=this.$el;h(c,1,function(){a.nextSibling?a.parentNode.insertBefore(c,a.nextSibling):a.parentNode.appendChild(c),b&&l(b)},this.$compiler)}),c.exports=d}),a.register("vue/src/binding.js",function(a,b,c){function d(a,b,c,d){this.id=g++,this.value=void 0,this.isExp=!!c,this.isFn=d,this.root=!this.isExp&&-1===b.indexOf("."),this.compiler=a,this.key=b,this.dirs=[],this.subs=[],this.deps=[],this.unbound=!1}var e=b("./batcher"),f=new e,g=1,h=d.prototype;h.update=function(a){if((!this.isComputed||this.isFn)&&(this.value=a),this.dirs.length||this.subs.length){var b=this;f.push({id:this.id,execute:function(){b.unbound||b._update()}})}},h._update=function(){for(var a=this.dirs.length,b=this.val();a--;)this.dirs[a].$update(b);this.pub()},h.val=function(){return this.isComputed&&!this.isFn?this.value.$get():this.value},h.pub=function(){for(var a=this.subs.length;a--;)this.subs[a].update()},h.unbind=function(){this.unbound=!0;for(var a=this.dirs.length;a--;)this.dirs[a].$unbind();a=this.deps.length;for(var b;a--;){b=this.deps[a].subs;var c=b.indexOf(this);c>-1&&b.splice(c,1)}},c.exports=d}),a.register("vue/src/observer.js",function(a,b,c){function d(a){v(C,a,function(){var b,c,d=A.call(arguments),g=Array.prototype[a].apply(this,d);return"push"===a||"unshift"===a?b=d:"pop"===a||"shift"===a?c=[g]:"splice"===a&&(b=d.slice(2),c=g),e(this,b),f(this,c),this.__emitter__.emit("mutate","",this,{method:a,args:d,result:g,inserted:b,removed:c}),g},!B)}function e(a,b){if(b)for(var c,d,e=b.length;e--;)c=b[e],g(c)&&(c.__emitter__||(h(c),j(c)),d=c.__emitter__.owners,d.indexOf(a)<0&&d.push(a))}function f(a,b){if(b)for(var c,d=b.length;d--;)if(c=b[d],c&&c.__emitter__){var e=c.__emitter__.owners;e&&e.splice(e.indexOf(a))}}function g(a){return"object"==typeof a&&a&&!a.$compiler}function h(a){if(a.__emitter__)return!0;var b=new t;return v(a,"__emitter__",b),b.on("set",function(b,c,d){d&&i(a)}).on("mutate",function(){i(a)}),b.values=u.hash(),b.owners=[],!1}function i(a){for(var b=a.__emitter__.owners,c=b.length;c--;)b[c].__emitter__.emit("set","","",!0)}function j(a){x(a)?m(a):l(a)}function k(a,b){if(B)a.__proto__=b;else for(var c in b)v(a,c,b[c])}function l(a){k(a,D);for(var b in a)n(a,b)}function m(a){k(a,C),e(a,a)}function n(a,b,c){function d(a,c){g[b]=a,f.emit("set",b,a,c),x(a)&&f.emit("set",b+".length",a.length,c),r(a,b,f)}var e=b.charAt(0);if("$"!==e&&"_"!==e){var f=a.__emitter__,g=f.values;d(a[b],c),z(a,b,{enumerable:!0,configurable:!0,get:function(){var a=g[b];return E.shouldGet&&f.emit("get",b),a},set:function(a){var c=g[b];s(c,b,f),p(a,c),d(a,!0)}})}}function o(a){var b=a&&a.__emitter__;if(b)if(x(a))b.emit("set","length",a.length);else{var c,d;for(c in a)d=a[c],b.emit("set",c,d),o(d)}}function p(a,b){if(w(a)&&w(b)){var c,d,e;for(c in b)y.call(a,c)||(d=b[c],x(d)?a[c]=[]:w(d)?(e=a[c]={},p(e,d)):a[c]=void 0)}}function q(a,b){for(var c,d=b.split("."),e=0,f=d.length-1;f>e;e++)c=d[e],a[c]||(a[c]={},a.__emitter__&&n(a,c)),a=a[c];w(a)&&(c=d[e],y.call(a,c)||(a[c]=void 0,a.__emitter__&&n(a,c)))}function r(a,b,c){if(g(a)){var d=b?b+".":"",e=h(a),f=a.__emitter__;c.proxies=c.proxies||{};var i=c.proxies[d]={get:function(a){c.emit("get",d+a)},set:function(e,f,g){e&&c.emit("set",d+e,f),b&&g&&c.emit("set",b,a,!0)},mutate:function(a,e,f){var g=a?d+a:b;c.emit("mutate",g,e,f);var h=f.method;"sort"!==h&&"reverse"!==h&&c.emit("set",g+".length",e.length)}};f.on("get",i.get).on("set",i.set).on("mutate",i.mutate),e?o(a):j(a)}}function s(a,b,c){if(a&&a.__emitter__){b=b?b+".":"";var d=c.proxies[b];d&&(a.__emitter__.off("get",d.get).off("set",d.set).off("mutate",d.mutate),c.proxies[b]=null)}}var t=b("./emitter"),u=b("./utils"),v=u.defProtected,w=u.isObject,x=Array.isArray,y={}.hasOwnProperty,z=Object.defineProperty,A=[].slice,B={}.__proto__,C=Object.create(Array.prototype);["push","pop","shift","unshift","splice","sort","reverse"].forEach(d),v(C,"$set",function(a,b){return this.splice(a,1,b)[0]},!B),v(C,"$remove",function(a){return"number"!=typeof a&&(a=this.indexOf(a)),a>-1?this.splice(a,1)[0]:void 0},!B);var D=Object.create(Object.prototype);v(D,"$add",function(a,b){y.call(this,a)||(this[a]=b,n(this,a,!0))},!B),v(D,"$delete",function(a){y.call(this,a)&&(this[a]=void 0,delete this[a],this.__emitter__.emit("delete",a))},!B);var E=c.exports={shouldGet:!1,observe:r,unobserve:s,ensurePath:q,copyPaths:p,watch:j,convert:h,convertKey:n}}),a.register("vue/src/directive.js",function(a,b,c){function d(a,b,c,e,g){this.id=f++,this.name=a,this.compiler=e,this.vm=e.vm,this.el=g,this.computeFilters=!1,this.key=b.key,this.arg=b.arg,this.expression=b.expression;var h=""===this.expression;if("function"==typeof c)this[h?"bind":"update"]=c;else for(var k in c)this[k]=c[k];if(h||this.isEmpty)return void(this.isEmpty=!0);l.Regex.test(this.key)&&(this.key=e.eval(this.key),this.isLiteral&&(this.expression=this.key));var m,n,o,p,q,r=b.filters;if(r)for(this.filters=[],o=0,p=r.length;p>o;o++)m=r[o],n=this.compiler.getOption("filters",m.name),n&&(m.apply=n,this.filters.push(m),n.computed&&(q=!0));this.filters&&this.filters.length||(this.filters=null),q&&(this.computedKey=d.inlineFilters(this.key,this.filters),this.filters=null),this.isExp=q||!j.test(this.key)||i.test(this.key)}function e(a){return a.indexOf('"')>-1?a.replace(k,"'"):a}var f=1,g=/^[\w\$-]+$/,h=/[^\s'"]+|'[^']+'|"[^"]+"/g,i=/^\$(parent|root)\./,j=/^[\w\.$]+$/,k=/"/g,l=b("./text-parser"),m=d.prototype;m.$update=function(a,b){this.$lock||(b||a!==this.value||a&&"object"==typeof a)&&(this.value=a,this.update&&this.update(this.filters&&!this.computeFilters?this.$applyFilters(a):a,b))},m.$applyFilters=function(a){for(var b,c=a,d=0,e=this.filters.length;e>d;d++)b=this.filters[d],c=b.apply.apply(this.vm,[c].concat(b.args));return c},m.$unbind=function(){this.el&&this.vm&&(this.unbind&&this.unbind(),this.vm=this.el=this.binding=this.compiler=null)},d.parse=function(a){function b(){p.expression=a.slice(m,r).trim(),void 0===p.key?p.key=a.slice(n,r).trim():q!==m&&c(),(0===r||p.key)&&o.push(p)}function c(){var b,c=a.slice(q,r).trim();if(c){b={};var d=c.match(h);b.name=d[0],b.args=d.length>1?d.slice(1):null}b&&(p.filters=p.filters||[]).push(b),q=r+1}for(var d,e,f=!1,i=!1,j=0,k=0,l=0,m=0,n=0,o=[],p={},q=0,r=0,s=a.length;s>r;r++)e=a.charAt(r),f?"'"===e&&(f=!f):i?'"'===e&&(i=!i):","!==e||l||j||k?":"!==e||p.key||p.arg?"|"===e&&"|"!==a.charAt(r+1)&&"|"!==a.charAt(r-1)?void 0===p.key?(q=r+1,p.key=a.slice(n,r).trim()):c():'"'===e?i=!0:"'"===e?f=!0:"("===e?l++:")"===e?l--:"["===e?k++:"]"===e?k--:"{"===e?j++:"}"===e&&j--:(d=a.slice(m,r).trim(),g.test(d)&&(n=r+1,p.arg=d)):(b(),p={},m=n=q=r+1);return(0===r||m!==r)&&b(),o},d.inlineFilters=function(a,b){for(var c,d,f=0,g=b.length;g>f;f++)d=b[f],c=d.args?',"'+d.args.map(e).join('","')+'"':"",a='this.$compiler.getOption("filters", "'+d.name+'").call(this,'+a+c+")";return a},c.exports=d}),a.register("vue/src/exp-parser.js",function(a,b){function c(a){return a=a.replace(o,"").replace(p,",").replace(n,"").replace(q,"").replace(r,""),a?a.split(/,+/):[]}function d(a,b,c){var d="",e=0,f=b;if(c&&void 0!==g.get(c,a))return"$temp.";for(;b&&!b.hasKey(a);)b=b.parent,e++;if(b){for(;e--;)d+="$parent.";b.bindings[a]||"$"===a.charAt(0)||b.createBinding(a)}else f.createBinding(a);return d}function e(a){var b;try{b=new Function(a)}catch(c){}return b}function f(a){return"$"===a.charAt(0)?"\\"+a:a}var g=b("./utils"),h=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/g,i=/"(\d+)"/g,j=/\n/g,k=new RegExp("constructor".split("").join("['\"+, ]*")),l=/\\u\d\d\d\d/,m="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,undefined,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,Math",n=new RegExp(["\\b"+m.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),o=/\/\*(?:.|\n)*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|'[^']*'|"[^"]*"|[\s\t\n]*\.[\s\t\n]*[$\w\.]+|[\{,]\s*[\w\$_]+\s*:/g,p=/[^\w$]+/g,q=/\b\d[^,]*/g,r=/^,+|,+$/g;a.parse=function(a,b,m){function n(a){var b=t.length;return t[b]=a.replace(j,"\\n"),'"'+b+'"'}function o(a){var c=a.charAt(0);a=a.slice(1);var e="this."+d(a,b,m)+a;return s[a]||(r+=e+";",s[a]=1),c+e}function p(a,b){return t[b]}if(!l.test(a)&&!k.test(a)){var q=c(a);if(!q.length)return e("return "+a,a);q=g.unique(q);var r="",s=g.hash(),t=[],u=new RegExp("[^$\\w\\.]("+q.map(f).join("|")+")[$\\w\\.]*\\b","g"),v=(" "+a).replace(h,n).replace(u,o).replace(i,p);return v=r+"return "+v,e(v,a)}},a.eval=function(b,c,d){var e,f=a.parse(b,c,d);return f&&(c.vm.$temp=d,e=f.call(c.vm),delete c.vm.$temp),e}}),a.register("vue/src/text-parser.js",function(a,b){function c(){var a=d(j),b=d(k);return new RegExp(a+a+a+"?(.+?)"+b+"?"+b+b)}function d(a){return a.replace(l,"\\$&")}function e(b){j=b[0],k=b[1],a.delimiters=b,a.Regex=c()}function f(b){if(!a.Regex.test(b))return null;for(var c,d,e,f,g=[];c=b.match(a.Regex);)d=c.index,d>0&&g.push(b.slice(0,d)),e={key:c[1].trim()},f=c[0],e.html=f.charAt(2)===j&&f.charAt(f.length-3)===k,g.push(e),b=b.slice(d+c[0].length);return b.length&&g.push(b),g}function g(a){i=i||b("./directive");var c=f(a);if(!c)return null;if(1===c.length)return c[0].key;for(var d,e=[],g=0,j=c.length;j>g;g++)d=c[g],e.push(d.key?h(d.key):'"'+d+'"');return e.join("+")}function h(a){if(a.indexOf("|")>-1){var b=i.parse(a),c=b&&b[0];c&&c.filters&&(a=i.inlineFilters(c.key,c.filters))}return"("+a+")"}var i,j="{",k="}",l=/[-.*+?^${}()|[\]\/\\]/g;a.Regex=c(),a.parse=f,a.parseAttr=g,a.setDelimiters=e,a.delimiters=[j,k]}),a.register("vue/src/deps-parser.js",function(a,b,c){function d(a){if(!a.isFn){var b=g.hash();a.deps=[],i.on("get",function(c){var d=b[c.key];d&&d.compiler===c.compiler||c.compiler.repeat&&!e(c.compiler,a.compiler)||(b[c.key]=c,a.deps.push(c),c.subs.push(a))}),a.value.$get(),i.off("get")}}function e(a,b){for(;b;){if(a===b)return!0;b=b.parent}}var f=b("./emitter"),g=b("./utils"),h=b("./observer"),i=new f;c.exports={catcher:i,parse:function(a){h.shouldGet=!0,a.forEach(d),h.shouldGet=!1}}}),a.register("vue/src/filters.js",function(a,b,c){function d(a,b){if(f.isObject(a)){for(var c in a)if(d(a[c],b))return!0}else if(null!=a)return a.toString().toLowerCase().indexOf(b)>-1}function e(a){return i.test(a)?a.slice(1,-1):void 0}var f=b("./utils"),g=f.get,h=[].slice,i=/^'.*'$/,j=c.exports=f.hash();j.capitalize=function(a){return a||0===a?(a=a.toString(),a.charAt(0).toUpperCase()+a.slice(1)):""},j.uppercase=function(a){return a||0===a?a.toString().toUpperCase():""},j.lowercase=function(a){return a||0===a?a.toString().toLowerCase():""},j.currency=function(a,b){if(!a&&0!==a)return"";b=b||"$";var c=Math.floor(a).toString(),d=c.length%3,e=d>0?c.slice(0,d)+(c.length>3?",":""):"",f="."+a.toFixed(2).slice(-2);return b+e+c.slice(d).replace(/(\d{3})(?=\d)/g,"$1,")+f},j.pluralize=function(a){var b=h.call(arguments,1);return b.length>1?b[a-1]||b[b.length-1]:b[a-1]||b[0]+"s"};var k={enter:13,tab:9,"delete":46,up:38,left:37,right:39,down:40,esc:27};j.key=function(a,b){if(a){var c=k[b];return c||(c=parseInt(b,10)),function(b){return b.keyCode===c?a.call(this,b):void 0}}},j.filterBy=function(a,b,c,h){c&&"in"!==c&&(h=c);var i=e(b)||this.$get(b);return i?(i=i.toLowerCase(),h=h&&(e(h)||this.$get(h)),Array.isArray(a)||(a=f.objectToArray(a)),a.filter(function(a){return h?d(g(a,h),i):d(a,i)})):a},j.filterBy.computed=!0,j.orderBy=function(a,b,c){var d=e(b)||this.$get(b);if(!d)return a;Array.isArray(a)||(a=f.objectToArray(a));var h=1;return c&&("-1"===c?h=-1:"!"===c.charAt(0)?(c=c.slice(1),h=this.$get(c)?1:-1):h=this.$get(c)?-1:1),a.slice().sort(function(a,b){return a=g(a,d),b=g(b,d),a===b?0:a>b?h:-h})},j.orderBy.computed=!0}),a.register("vue/src/transition.js",function(a,b,c){function d(a,b,c,d){if(!g.trans)return c(),m.CSS_SKIP;var e,f=a.classList,i=a.vue_trans_cb,k=h.enterClass,l=h.leaveClass,n=d?g.anim:g.trans;return i&&(a.removeEventListener(n,i),f.remove(k),f.remove(l),a.vue_trans_cb=null),b>0?(f.add(k),c(),d?(e=function(b){b.target===a&&(a.removeEventListener(n,e),a.vue_trans_cb=null,f.remove(k))},a.addEventListener(n,e),a.vue_trans_cb=e):j.push({execute:function(){f.remove(k)}}),m.CSS_E):(a.offsetWidth||a.offsetHeight?(f.add(l),e=function(b){b.target===a&&(a.removeEventListener(n,e),a.vue_trans_cb=null,c(),f.remove(l))},a.addEventListener(n,e),a.vue_trans_cb=e):c(),m.CSS_L)}function e(a,b,c,d,e){function f(b,c){var d=k(function(){b(),j.splice(j.indexOf(d),1),j.length||(a.vue_timeouts=null)},c);j.push(d)}var g=e.getOption("effects",d);if(!g)return c(),m.JS_SKIP;var h=g.enter,i=g.leave,j=a.vue_timeouts;if(j)for(var n=j.length;n--;)l(j[n]);return j=a.vue_timeouts=[],b>0?"function"!=typeof h?(c(),m.JS_SKIP_E):(h(a,c,f),m.JS_E):"function"!=typeof i?(c(),m.JS_SKIP_L):(i(a,c,f),m.JS_L)}function f(){var a=document.createElement("vue"),b="transitionend",c={webkitTransition:"webkitTransitionEnd",transition:b,mozTransition:b},d={};for(var e in c)if(void 0!==a.style[e]){d.trans=c[e];break}return d.anim=""===a.style.animation?"animationend":"webkitAnimationEnd",d}var g=f(),h=b("./config"),i=b("./batcher"),j=new i,k=window.setTimeout,l=window.clearTimeout,m={CSS_E:1,CSS_L:2,JS_E:3,JS_L:4,CSS_SKIP:-1,JS_SKIP:-2,JS_SKIP_E:-3,JS_SKIP_L:-4,INIT:-5,SKIP:-6};j._preFlush=function(){document.body.offsetHeight};var n=c.exports=function(a,b,c,f){var g=function(){c(),f.execHook(b>0?"attached":"detached")};if(f.init)return g(),m.INIT;var h=""===a.vue_trans,i=""===a.vue_anim,j=a.vue_effect;return j?e(a,b,g,j,f):h||i?d(a,b,g,i):(g(),m.SKIP)};n.codes=m,n.sniff=f}),a.register("vue/src/batcher.js",function(a,b,c){function d(){this.reset()}var e=b("./utils"),f=d.prototype;f.push=function(a){if(a.id&&this.has[a.id]){if(a.override){var b=this.has[a.id];
b.cancelled=!0,this.queue.push(a),this.has[a.id]=a}}else this.queue.push(a),this.has[a.id]=a,this.waiting||(this.waiting=!0,e.nextTick(e.bind(this.flush,this)))},f.flush=function(){this._preFlush&&this._preFlush();for(var a=0;a<this.queue.length;a++){var b=this.queue[a];b.cancelled||b.execute()}this.reset()},f.reset=function(){this.has=e.hash(),this.queue=[],this.waiting=!1},c.exports=d}),a.register("vue/src/directives/index.js",function(a,b,c){var d=b("../utils"),e=b("../config"),f=b("../transition"),g=c.exports=d.hash();g.component={isLiteral:!0,bind:function(){this.el.vue_vm||(this.childVM=new this.Ctor({el:this.el,parent:this.vm}))},unbind:function(){this.childVM&&this.childVM.$destroy()}},g.attr={bind:function(){var a=this.vm.$options.paramAttributes;this.isParam=a&&a.indexOf(this.arg)>-1},update:function(a){a||0===a?this.el.setAttribute(this.arg,a):this.el.removeAttribute(this.arg),this.isParam&&(this.vm[this.arg]=d.checkNumber(a))}},g.text={bind:function(){this.attr=3===this.el.nodeType?"nodeValue":"textContent"},update:function(a){this.el[this.attr]=d.guard(a)}},g.show=function(a){var b=this.el,c=a?"":"none",d=function(){b.style.display=c};f(b,a?1:-1,d,this.compiler)},g["class"]=function(a){this.arg?d[a?"addClass":"removeClass"](this.el,this.arg):(this.lastVal&&d.removeClass(this.el,this.lastVal),a&&(d.addClass(this.el,a),this.lastVal=a))},g.cloak={isEmpty:!0,bind:function(){var a=this.el;this.compiler.observer.once("hook:ready",function(){a.removeAttribute(e.prefix+"-cloak")})}},g.ref={isLiteral:!0,bind:function(){var a=this.expression;a&&(this.vm.$parent.$[a]=this.vm)},unbind:function(){var a=this.expression;a&&delete this.vm.$parent.$[a]}},g.on=b("./on"),g.repeat=b("./repeat"),g.model=b("./model"),g["if"]=b("./if"),g["with"]=b("./with"),g.html=b("./html"),g.style=b("./style"),g.partial=b("./partial"),g.view=b("./view")}),a.register("vue/src/directives/if.js",function(a,b,c){var d=b("../utils");c.exports={bind:function(){this.parent=this.el.parentNode,this.ref=document.createComment("vue-if"),this.Ctor=this.compiler.resolveComponent(this.el),this.parent.insertBefore(this.ref,this.el),this.parent.removeChild(this.el),d.attr(this.el,"view"),d.attr(this.el,"repeat")},update:function(a){a?this.childVM||(this.childVM=new this.Ctor({el:this.el.cloneNode(!0),parent:this.vm}),this.compiler.init?this.parent.insertBefore(this.childVM.$el,this.ref):this.childVM.$before(this.ref)):this.unbind()},unbind:function(){this.childVM&&(this.childVM.$destroy(),this.childVM=null)}}}),a.register("vue/src/directives/repeat.js",function(a,b,c){function d(a,b){for(var c,d=0,e=a.length;e>d;d++)if(c=a[d],!c.$reused&&c.$value===b)return d;return-1}var e=b("../utils"),f=b("../config");c.exports={bind:function(){this.identifier="$r"+this.id,this.expCache=e.hash();var a=this.el,b=this.container=a.parentNode;this.childId=this.compiler.eval(e.attr(a,"ref")),this.ref=document.createComment(f.prefix+"-repeat-"+this.key),b.insertBefore(this.ref,a),b.removeChild(a),this.collection=null,this.vms=null},update:function(a){Array.isArray(a)||e.isObject(a)&&(a=e.objectToArray(a)),this.oldVMs=this.vms,this.oldCollection=this.collection,a=this.collection=a||[];var b=a[0]&&e.isObject(a[0]);this.vms=this.oldCollection?this.diff(a,b):this.init(a,b),this.childId&&(this.vm.$[this.childId]=this.vms)},init:function(a,b){for(var c,d=[],e=0,f=a.length;f>e;e++)c=this.build(a[e],e,b),d.push(c),this.compiler.init?this.container.insertBefore(c.$el,this.ref):c.$before(this.ref);return d},diff:function(a,b){var c,e,f,g,h,i,j,k,l=this.container,m=this.oldVMs,n=[];for(n.length=a.length,c=0,e=a.length;e>c;c++)f=a[c],b?(f.$index=c,f.__emitter__&&f.__emitter__[this.identifier]?f.$reused=!0:n[c]=this.build(f,c,b)):(h=d(m,f),h>-1?(m[h].$reused=!0,m[h].$data.$index=c):n[c]=this.build(f,c,b));for(c=0,e=m.length;e>c;c++)g=m[c],f=this.arg?g.$data[this.arg]:g.$data,f.$reused&&(g.$reused=!0,delete f.$reused),g.$reused?(g.$index=f.$index,f.$key&&f.$key!==g.$key&&(g.$key=f.$key),n[g.$index]=g):(f.__emitter__&&delete f.__emitter__[this.identifier],g.$destroy());for(c=n.length;c--;)if(g=n[c],f=g.$data,i=n[c+1],g.$reused){for(k=g.$el.nextSibling;!k.vue_vm&&k!==this.ref;)k=k.nextSibling;if(j=k.vue_vm,j!==i)if(i){for(k=i.$el;!k.parentNode;)i=n[k.vue_vm.$index+1],k=i?i.$el:this.ref;l.insertBefore(g.$el,k)}else l.insertBefore(g.$el,this.ref);delete g.$reused,delete f.$index,delete f.$key}else g.$before(i?i.$el:this.ref);return n},build:function(a,b,c){var d,e,f=!c||this.arg;f&&(d=a,e=this.arg||"$value",a={},a[e]=d),a.$index=b;var g=this.el.cloneNode(!0),h=this.compiler.resolveComponent(g,a),i=new h({el:g,data:a,parent:this.vm,compilerOptions:{repeat:!0,expCache:this.expCache}});return c&&((d||a).__emitter__[this.identifier]=!0),i},unbind:function(){if(this.childId&&delete this.vm.$[this.childId],this.vms)for(var a=this.vms.length;a--;)this.vms[a].$destroy()}}}),a.register("vue/src/directives/on.js",function(a,b,c){b("../utils"),c.exports={isFn:!0,bind:function(){if(this.context=this.binding.isExp?this.vm:this.binding.compiler.vm,"IFRAME"===this.el.tagName&&"load"!==this.arg){var a=this;this.iframeBind=function(){a.el.contentWindow.addEventListener(a.arg,a.handler)},this.el.addEventListener("load",this.iframeBind)}},update:function(a){if("function"==typeof a){this.reset();var b=this.vm,c=this.context;this.handler=function(d){d.targetVM=b,c.$event=d;var e=a.call(c,d);return c.$event=null,e},this.iframeBind?this.iframeBind():this.el.addEventListener(this.arg,this.handler)}},reset:function(){var a=this.iframeBind?this.el.contentWindow:this.el;a.removeEventListener(this.arg,this.handler)},unbind:function(){this.reset(),this.el.removeEventListener("load",this.iframeBind)}}}),a.register("vue/src/directives/model.js",function(a,b,c){function d(a){return g.call(a.options,function(a){return a.selected}).map(function(a){return a.value||a.text})}var e=b("../utils"),f=navigator.userAgent.indexOf("MSIE 9.0")>0,g=[].filter;c.exports={bind:function(){var a=this,b=a.el,c=b.type,d=b.tagName;a.lock=!1,a.ownerVM=a.binding.compiler.vm,a.event=a.compiler.options.lazy||"SELECT"===d||"checkbox"===c||"radio"===c?"change":"input",a.attr="checkbox"===c?"checked":"INPUT"===d||"SELECT"===d||"TEXTAREA"===d?"value":"innerHTML","SELECT"===d&&b.hasAttribute("multiple")&&(this.multi=!0);var g=!1;a.cLock=function(){g=!0},a.cUnlock=function(){g=!1},b.addEventListener("compositionstart",this.cLock),b.addEventListener("compositionend",this.cUnlock),a.set=a.filters?function(){if(!g){var c;try{c=b.selectionStart}catch(d){}a._set(),e.nextTick(function(){void 0!==c&&b.setSelectionRange(c,c)})}}:function(){g||(a.lock=!0,a._set(),e.nextTick(function(){a.lock=!1}))},b.addEventListener(a.event,a.set),f&&(a.onCut=function(){e.nextTick(function(){a.set()})},a.onDel=function(b){(46===b.keyCode||8===b.keyCode)&&a.set()},b.addEventListener("cut",a.onCut),b.addEventListener("keyup",a.onDel))},_set:function(){this.ownerVM.$set(this.key,this.multi?d(this.el):this.el[this.attr])},update:function(a,b){if(b&&void 0===a)return this._set();if(!this.lock){var c=this.el;"SELECT"===c.tagName?(c.selectedIndex=-1,this.multi&&Array.isArray(a)?a.forEach(this.updateSelect,this):this.updateSelect(a)):"radio"===c.type?c.checked=a==c.value:"checkbox"===c.type?c.checked=!!a:c[this.attr]=e.guard(a)}},updateSelect:function(a){for(var b=this.el.options,c=b.length;c--;)if(b[c].value==a){b[c].selected=!0;break}},unbind:function(){var a=this.el;a.removeEventListener(this.event,this.set),a.removeEventListener("compositionstart",this.cLock),a.removeEventListener("compositionend",this.cUnlock),f&&(a.removeEventListener("cut",this.onCut),a.removeEventListener("keyup",this.onDel))}}}),a.register("vue/src/directives/with.js",function(a,b,c){var d=b("../utils");c.exports={bind:function(){var a=this,b=a.arg,c=a.key,e=a.compiler,f=a.binding.compiler;return e===f?void(this.alone=!0):void(b&&(e.bindings[b]||e.createBinding(b),e.observer.on("change:"+b,function(b){e.init||(a.lock||(a.lock=!0,d.nextTick(function(){a.lock=!1})),f.vm.$set(c,b))})))},update:function(a){this.alone||this.lock||(this.arg?this.vm.$set(this.arg,a):this.vm.$data!==a&&(this.vm.$data=a))}}}),a.register("vue/src/directives/html.js",function(a,b,c){var d=b("../utils"),e=[].slice;c.exports={bind:function(){8===this.el.nodeType&&(this.nodes=[])},update:function(a){a=d.guard(a),this.nodes?this.swap(a):this.el.innerHTML=a},swap:function(a){for(var b=this.el.parentNode,c=this.nodes,f=c.length;f--;)b.removeChild(c[f]);var g=d.toFragment(a);this.nodes=e.call(g.childNodes),b.insertBefore(g,this.el)}}}),a.register("vue/src/directives/style.js",function(a,b,c){var d=["-webkit-","-moz-","-ms-"];c.exports={bind:function(){var a=this.arg;a&&("$"===a.charAt(0)&&(a=a.slice(1),this.prefixed=!0),this.prop=a)},update:function(a){var b=this.prop;if(b){var c="!important"===a.slice(-10)?"important":"";if(c&&(a=a.slice(0,-10).trim()),this.el.style.setProperty(b,a,c),this.prefixed)for(var e=d.length;e--;)this.el.style.setProperty(d[e]+b,a,c)}else this.el.style.cssText=a}}}),a.register("vue/src/directives/partial.js",function(a,b,c){b("../utils"),c.exports={isLiteral:!0,bind:function(){var a=this.expression;if(a){var b=this.el,c=this.compiler,d=c.getOption("partials",a);if(d)if(d=d.cloneNode(!0),8===b.nodeType){var e=[].slice.call(d.childNodes),f=b.parentNode;f.insertBefore(d,b),f.removeChild(b),e.forEach(c.compile,c)}else b.innerHTML="",b.appendChild(d)}}}}),a.register("vue/src/directives/view.js",function(a,b,c){c.exports={bind:function(){var a=this.raw=this.el,b=a.parentNode,c=this.ref=document.createComment("v-view");b.insertBefore(c,a),b.removeChild(a);for(var d,e=this.inner=document.createElement("div");d=a.firstChild;)e.appendChild(d)},update:function(a){this.unbind();var b=this.compiler.getOption("components",a);b&&(this.childVM=new b({el:this.raw.cloneNode(!0),parent:this.vm,compilerOptions:{rawContent:this.inner.cloneNode(!0)}}),this.el=this.childVM.$el,this.compiler.init?this.ref.parentNode.insertBefore(this.el,this.ref):this.childVM.$before(this.ref))},unbind:function(){this.childVM&&this.childVM.$destroy()}}}),a.alias("vue/src/main.js","vue/index.js"),"object"==typeof exports?module.exports=a("vue"):"function"==typeof define&&define.amd?define(function(){return a("vue")}):window.Vue=a("vue")}();var wysihtml5ParserRules={classes:{"wysiwyg-clear-both":1,"wysiwyg-clear-left":1,"wysiwyg-clear-right":1,"wysiwyg-color-aqua":1,"wysiwyg-color-black":1,"wysiwyg-color-blue":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-gray":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-maroon":1,"wysiwyg-color-navy":1,"wysiwyg-color-olive":1,"wysiwyg-color-purple":1,"wysiwyg-color-red":1,"wysiwyg-color-silver":1,"wysiwyg-color-teal":1,"wysiwyg-color-white":1,"wysiwyg-color-yellow":1,"wysiwyg-float-left":1,"wysiwyg-float-right":1,"wysiwyg-font-size-large":1,"wysiwyg-font-size-larger":1,"wysiwyg-font-size-medium":1,"wysiwyg-font-size-small":1,"wysiwyg-font-size-smaller":1,"wysiwyg-font-size-x-large":1,"wysiwyg-font-size-x-small":1,"wysiwyg-font-size-xx-large":1,"wysiwyg-font-size-xx-small":1,"wysiwyg-text-align-center":1,"wysiwyg-text-align-justify":1,"wysiwyg-text-align-left":1,"wysiwyg-text-align-right":1},tags:{tr:{add_class:{align:"align_text"}},strike:{remove:1},form:{rename_tag:"div"},rt:{rename_tag:"span"},code:{},acronym:{rename_tag:"span"},br:{add_class:{clear:"clear_br"}},details:{rename_tag:"div"},h4:{add_class:{align:"align_text"}},em:{},title:{remove:1},multicol:{rename_tag:"div"},figure:{rename_tag:"div"},xmp:{rename_tag:"span"},small:{rename_tag:"span",set_class:"wysiwyg-font-size-smaller"},area:{remove:1},time:{rename_tag:"span"},dir:{rename_tag:"ul"},bdi:{rename_tag:"span"},command:{remove:1},ul:{},progress:{rename_tag:"span"},dfn:{rename_tag:"span"},iframe:{remove:1},figcaption:{rename_tag:"div"},a:{check_attributes:{href:"url"},set_attributes:{rel:"nofollow",target:"_blank"}},img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"},add_class:{align:"align_img"}},rb:{rename_tag:"span"},footer:{rename_tag:"div"},noframes:{remove:1},abbr:{rename_tag:"span"},u:{},bgsound:{remove:1},sup:{rename_tag:"span"},address:{rename_tag:"div"},basefont:{remove:1},nav:{rename_tag:"div"},h1:{add_class:{align:"align_text"}},head:{remove:1},tbody:{add_class:{align:"align_text"}},dd:{rename_tag:"div"},s:{rename_tag:"span"},li:{},td:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},object:{remove:1},div:{add_class:{align:"align_text"}},option:{rename_tag:"span"},select:{rename_tag:"span"},i:{},track:{remove:1},wbr:{remove:1},fieldset:{rename_tag:"div"},big:{rename_tag:"span",set_class:"wysiwyg-font-size-larger"},button:{rename_tag:"span"},noscript:{remove:1},svg:{remove:1},input:{remove:1},table:{},keygen:{remove:1},h5:{add_class:{align:"align_text"}},meta:{remove:1},map:{rename_tag:"div"},isindex:{remove:1},mark:{rename_tag:"span"},caption:{add_class:{align:"align_text"}},tfoot:{add_class:{align:"align_text"}},base:{remove:1},video:{remove:1},strong:{},canvas:{remove:1},output:{rename_tag:"span"},marquee:{rename_tag:"span"},b:{},q:{check_attributes:{cite:"url"}},applet:{remove:1},span:{},rp:{rename_tag:"span"},spacer:{remove:1},source:{remove:1},aside:{rename_tag:"div"},frame:{remove:1},section:{rename_tag:"div"},body:{rename_tag:"div"},ol:{},nobr:{rename_tag:"span"},html:{rename_tag:"div"},summary:{rename_tag:"span"},"var":{rename_tag:"span"},del:{remove:1},blockquote:{check_attributes:{cite:"url"}},style:{remove:1},device:{remove:1},meter:{rename_tag:"span"},h3:{add_class:{align:"align_text"}},textarea:{rename_tag:"span"},embed:{remove:1},hgroup:{rename_tag:"div"},font:{rename_tag:"span",add_class:{size:"size_font"}},tt:{rename_tag:"span"},noembed:{remove:1},thead:{add_class:{align:"align_text"}},blink:{rename_tag:"span"},plaintext:{rename_tag:"span"},xml:{remove:1},h6:{add_class:{align:"align_text"}},param:{remove:1},th:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},legend:{rename_tag:"span"},hr:{},label:{rename_tag:"span"},dl:{rename_tag:"div"},kbd:{rename_tag:"span"},listing:{rename_tag:"div"},dt:{rename_tag:"span"},nextid:{remove:1},pre:{},center:{rename_tag:"div",set_class:"wysiwyg-text-align-center"},audio:{remove:1},datalist:{rename_tag:"span"},samp:{rename_tag:"span"},col:{remove:1},article:{rename_tag:"div"},cite:{},link:{remove:1},script:{remove:1},bdo:{rename_tag:"span"},menu:{rename_tag:"ul"},colgroup:{remove:1},ruby:{rename_tag:"span"},h2:{add_class:{align:"align_text"}},ins:{rename_tag:"span"},p:{add_class:{align:"align_text"}},sub:{rename_tag:"span"},comment:{remove:1},frameset:{remove:1},optgroup:{rename_tag:"span"},header:{rename_tag:"div"}}},Opentip,firstAdapter,i,mouseMoved,mousePosition,mousePositionObservers,position,vendors,_i,_len,_ref,__slice=[].slice,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},__hasProp={}.hasOwnProperty;for(Opentip=function(){function a(b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this;if(this.id=++a.lastId,this.debug("Creating Opentip."),a.tips.push(this),this.adapter=a.adapter,f=this.adapter.data(b,"opentips")||[],f.push(this),this.adapter.data(b,"opentips",f),this.triggerElement=this.adapter.wrap(b),this.triggerElement.length>1)throw Error("You can't call Opentip on multiple elements.");if(1>this.triggerElement.length)throw Error("Invalid element.");for(this.loaded=!1,this.loading=!1,this.visible=!1,this.waitingToShow=!1,this.waitingToHide=!1,this.currentPosition={left:0,top:0},this.dimensions={width:100,height:50},this.content="",this.redraw=!0,this.currentObservers={showing:!1,visible:!1,hiding:!1,hidden:!1},e=this.adapter.clone(e),"object"==typeof c?(e=c,c=d=void 0):"object"==typeof d&&(e=d,d=void 0),null!=d&&(e.title=d),null!=c&&this.setContent(c),null==e["extends"]&&(e["extends"]=null!=e.style?e.style:a.defaultStyle),i=[e],s=e;s["extends"];){if(k=s["extends"],s=a.styles[k],null==s)throw Error("Invalid style: "+k);i.unshift(s),null==s["extends"]&&"standard"!==k&&(s["extends"]="standard")}for(e=(p=this.adapter).extend.apply(p,[{}].concat(__slice.call(i))),e.hideTriggers=function(){var a,b,c,d;for(c=e.hideTriggers,d=[],a=0,b=c.length;b>a;a++)g=c[a],d.push(g);return d}(),e.hideTrigger&&0===e.hideTriggers.length&&e.hideTriggers.push(e.hideTrigger),q=["tipJoint","targetJoint","stem"],l=0,n=q.length;n>l;l++)j=q[l],e[j]&&"string"==typeof e[j]&&(e[j]=new a.Joint(e[j]));for(!e.ajax||e.ajax!==!0&&e.ajax||(e.ajax="A"===this.adapter.tagName(this.triggerElement)?this.adapter.attr(this.triggerElement,"href"):!1),"click"===e.showOn&&"A"===this.adapter.tagName(this.triggerElement)&&this.adapter.observe(this.triggerElement,"click",function(a){return a.preventDefault(),a.stopPropagation(),a.stopped=!0}),e.target&&(e.fixed=!0),e.stem===!0&&(e.stem=new a.Joint(e.tipJoint)),e.target===!0?e.target=this.triggerElement:e.target&&(e.target=this.adapter.wrap(e.target)),this.currentStem=e.stem,null==e.delay&&(e.delay="mouseover"===e.showOn?.2:0),null==e.targetJoint&&(e.targetJoint=new a.Joint(e.tipJoint).flip()),this.showTriggers=[],this.showTriggersWhenVisible=[],this.hideTriggers=[],e.showOn&&"creation"!==e.showOn&&this.showTriggers.push({element:this.triggerElement,event:e.showOn}),null!=e.ajaxCache&&(e.cache=e.ajaxCache,delete e.ajaxCache),this.options=e,this.bound={},r=["prepareToShow","prepareToHide","show","hide","reposition"],m=0,o=r.length;o>m;m++)h=r[m],this.bound[h]=function(a){return function(){return t[a].apply(t,arguments)}}(h);this.adapter.domReady(function(){return t.activate(),"creation"===t.options.showOn?t.prepareToShow():void 0})}return a.prototype.STICKS_OUT_TOP=1,a.prototype.STICKS_OUT_BOTTOM=2,a.prototype.STICKS_OUT_LEFT=1,a.prototype.STICKS_OUT_RIGHT=2,a.prototype["class"]={container:"opentip-container",opentip:"opentip",header:"ot-header",content:"ot-content",loadingIndicator:"ot-loading-indicator",close:"ot-close",goingToHide:"ot-going-to-hide",hidden:"ot-hidden",hiding:"ot-hiding",goingToShow:"ot-going-to-show",showing:"ot-showing",visible:"ot-visible",loading:"ot-loading",ajaxError:"ot-ajax-error",fixed:"ot-fixed",showEffectPrefix:"ot-show-effect-",hideEffectPrefix:"ot-hide-effect-",stylePrefix:"style-"},a.prototype._setup=function(){var a,b,c,d,e,f,g,h,i,j,k;for(this.debug("Setting up the tooltip."),this._buildContainer(),this.hideTriggers=[],i=this.options.hideTriggers,d=e=0,g=i.length;g>e;d=++e){if(b=i[d],c=null,a=this.options.hideOn instanceof Array?this.options.hideOn[d]:this.options.hideOn,"string"==typeof b)switch(b){case"trigger":a=a||"mouseout",c=this.triggerElement;break;case"tip":a=a||"mouseover",c=this.container;break;case"target":a=a||"mouseover",c=this.options.target;break;case"closeButton":break;default:throw Error("Unknown hide trigger: "+b+".")}else a=a||"mouseover",c=this.adapter.wrap(b);c&&this.hideTriggers.push({element:c,event:a,original:b})}for(j=this.hideTriggers,k=[],f=0,h=j.length;h>f;f++)b=j[f],k.push(this.showTriggersWhenVisible.push({element:b.element,event:"mouseover"}));return k},a.prototype._buildContainer=function(){return this.container=this.adapter.create('<div id="opentip-'+this.id+'" class="'+this["class"].container+" "+this["class"].hidden+" "+this["class"].stylePrefix+this.options.className+'"></div>'),this.adapter.css(this.container,{position:"absolute"}),this.options.ajax&&this.adapter.addClass(this.container,this["class"].loading),this.options.fixed&&this.adapter.addClass(this.container,this["class"].fixed),this.options.showEffect&&this.adapter.addClass(this.container,""+this["class"].showEffectPrefix+this.options.showEffect),this.options.hideEffect?this.adapter.addClass(this.container,""+this["class"].hideEffectPrefix+this.options.hideEffect):void 0},a.prototype._buildElements=function(){var a,b;return this.tooltipElement=this.adapter.create('<div class="'+this["class"].opentip+'"><div class="'+this["class"].header+'"></div><div class="'+this["class"].content+'"></div></div>'),this.backgroundCanvas=this.adapter.wrap(document.createElement("canvas")),this.adapter.css(this.backgroundCanvas,{position:"absolute"}),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.adapter.unwrap(this.backgroundCanvas)),a=this.adapter.find(this.tooltipElement,"."+this["class"].header),this.options.title&&(b=this.adapter.create("<h1></h1>"),this.adapter.update(b,this.options.title,this.options.escapeTitle),this.adapter.append(a,b)),this.options.ajax&&!this.loaded&&this.adapter.append(this.tooltipElement,this.adapter.create('<div class="'+this["class"].loadingIndicator+'"><span>↻</span></div>')),__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(this.closeButtonElement=this.adapter.create('<a href="javascript:undefined;" class="'+this["class"].close+'"><span>Close</span></a>'),this.adapter.append(a,this.closeButtonElement)),this.adapter.append(this.container,this.backgroundCanvas),this.adapter.append(this.container,this.tooltipElement),this.adapter.append(document.body,this.container),this._newContent=!0,this.redraw=!0},a.prototype.setContent=function(a){return this.content=a,this._newContent=!0,"function"==typeof this.content?(this._contentFunction=this.content,this.content=""):this._contentFunction=null,this.visible?this._updateElementContent():void 0},a.prototype._updateElementContent=function(){var a;return(this._newContent||!this.options.cache&&this._contentFunction)&&(a=this.adapter.find(this.container,"."+this["class"].content),null!=a&&(this._contentFunction&&(this.debug("Executing content function."),this.content=this._contentFunction(this)),this.adapter.update(a,this.content,this.options.escapeContent)),this._newContent=!1),this._storeAndLockDimensions(),this.reposition()},a.prototype._storeAndLockDimensions=function(){var a;return this.container?(a=this.dimensions,this.adapter.css(this.container,{width:"auto",left:"0px",top:"0px"}),this.dimensions=this.adapter.dimensions(this.container),this.dimensions.width+=1,this.adapter.css(this.container,{width:""+this.dimensions.width+"px",top:""+this.currentPosition.top+"px",left:""+this.currentPosition.left+"px"}),this._dimensionsEqual(this.dimensions,a)?void 0:(this.redraw=!0,this._draw())):void 0},a.prototype.activate=function(){return this._setupObservers("hidden","hiding")},a.prototype.deactivate=function(){return this.debug("Deactivating tooltip."),this.hide(),this._setupObservers("-showing","-visible","-hidden","-hiding")},a.prototype._setupObservers=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this;for(d=arguments.length>=1?__slice.call(arguments,0):[],f=0,j=d.length;j>f;f++)if(c=d[f],b=!1,"-"===c.charAt(0)&&(b=!0,c=c.substr(1)),this.currentObservers[c]!==!b)switch(this.currentObservers[c]=!b,a=function(){var a,c,d;return a=arguments.length>=1?__slice.call(arguments,0):[],b?(c=q.adapter).stopObserving.apply(c,a):(d=q.adapter).observe.apply(d,a)},c){case"showing":for(n=this.hideTriggers,g=0,k=n.length;k>g;g++)e=n[g],a(e.element,e.event,this.bound.prepareToHide);a(null!=document.onresize?document:window,"resize",this.bound.reposition),a(window,"scroll",this.bound.reposition);break;case"visible":for(o=this.showTriggersWhenVisible,h=0,l=o.length;l>h;h++)e=o[h],a(e.element,e.event,this.bound.prepareToShow);break;case"hiding":for(p=this.showTriggers,i=0,m=p.length;m>i;i++)e=p[i],a(e.element,e.event,this.bound.prepareToShow);break;case"hidden":break;default:throw Error("Unknown state: "+c)}return null},a.prototype.prepareToShow=function(){return this._abortHiding(),this._abortShowing(),this.visible?void 0:(this.debug("Showing in "+this.options.delay+"s."),null==this.container&&this._setup(),this.options.group&&a._abortShowingGroup(this.options.group,this),this.preparingToShow=!0,this._setupObservers("-hidden","-hiding","showing"),this._followMousePosition(),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this._showTimeoutId=this.setTimeout(this.bound.show,this.options.delay||0))},a.prototype.show=function(){var b=this;return this._abortHiding(),this.visible?void 0:(this._clearTimeouts(),this._triggerElementExists()?(this.debug("Showing now."),null==this.container&&this._setup(),this.options.group&&a._hideGroup(this.options.group,this),this.visible=!0,this.preparingToShow=!1,null==this.tooltipElement&&this._buildElements(),this._updateElementContent(),!this.options.ajax||this.loaded&&this.options.cache||this._loadAjax(),this._searchAndActivateCloseButtons(),this._startEnsureTriggerElement(),this.adapter.css(this.container,{zIndex:a.lastZIndex++}),this._setupObservers("-hidden","-hiding","-showing","-visible","showing","visible"),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this.adapter.removeClass(this.container,this["class"].hiding),this.adapter.removeClass(this.container,this["class"].hidden),this.adapter.addClass(this.container,this["class"].goingToShow),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var a;return b.visible&&!b.preparingToHide?(b.adapter.removeClass(b.container,b["class"].goingToShow),b.adapter.addClass(b.container,b["class"].showing),a=0,b.options.showEffect&&b.options.showEffectDuration&&(a=b.options.showEffectDuration),b.setCss3Style(b.container,{transitionDuration:""+a+"s"}),b._visibilityStateTimeoutId=b.setTimeout(function(){return b.adapter.removeClass(b.container,b["class"].showing),b.adapter.addClass(b.container,b["class"].visible)},a),b._activateFirstInput()):void 0}),this._draw()):this.deactivate())},a.prototype._abortShowing=function(){return this.preparingToShow?(this.debug("Aborting showing."),this._clearTimeouts(),this._stopFollowingMousePosition(),this.preparingToShow=!1,this._setupObservers("-showing","-visible","hiding","hidden")):void 0},a.prototype.prepareToHide=function(){return this._abortShowing(),this._abortHiding(),this.visible?(this.debug("Hiding in "+this.options.hideDelay+"s"),this.preparingToHide=!0,this._setupObservers("-showing","visible","-hidden","hiding"),this._hideTimeoutId=this.setTimeout(this.bound.hide,this.options.hideDelay)):void 0},a.prototype.hide=function(){var a=this;return this._abortShowing(),this.visible&&(this._clearTimeouts(),this.debug("Hiding!"),this.visible=!1,this.preparingToHide=!1,this._stopEnsureTriggerElement(),this._setupObservers("-showing","-visible","-hiding","-hidden","hiding","hidden"),this.options.fixed||this._stopFollowingMousePosition(),this.container)?(this.adapter.removeClass(this.container,this["class"].visible),this.adapter.removeClass(this.container,this["class"].showing),this.adapter.addClass(this.container,this["class"].goingToHide),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var b;return a.adapter.removeClass(a.container,a["class"].goingToHide),a.adapter.addClass(a.container,a["class"].hiding),b=0,a.options.hideEffect&&a.options.hideEffectDuration&&(b=a.options.hideEffectDuration),a.setCss3Style(a.container,{transitionDuration:""+b+"s"}),a._visibilityStateTimeoutId=a.setTimeout(function(){return a.adapter.removeClass(a.container,a["class"].hiding),a.adapter.addClass(a.container,a["class"].hidden),a.setCss3Style(a.container,{transitionDuration:"0s"}),a.options.removeElementsOnHide?(a.debug("Removing HTML elements."),a.adapter.remove(a.container),delete a.container,delete a.tooltipElement):void 0},b)})):void 0},a.prototype._abortHiding=function(){return this.preparingToHide?(this.debug("Aborting hiding."),this._clearTimeouts(),this.preparingToHide=!1,this._setupObservers("-hiding","showing","visible")):void 0},a.prototype.reposition=function(){var a,b,c,d=this;return a=this.getPosition(),null==a||(b=this.options.stem,this.options.containInViewport&&(c=this._ensureViewportContainment(a),a=c.position,b=c.stem),this._positionsEqual(a,this.currentPosition))?void 0:(this.options.stem&&!b.eql(this.currentStem)&&(this.redraw=!0),this.currentPosition=a,this.currentStem=b,this._draw(),this.adapter.css(this.container,{left:""+a.left+"px",top:""+a.top+"px"}),this.defer(function(){var a,b;return a=d.adapter.unwrap(d.container),a.style.visibility="hidden",b=a.offsetHeight,a.style.visibility="visible"}))},a.prototype.getPosition=function(a,b,c){var d,e,f,g,h,i,j,k,l;return this.container?(null==a&&(a=this.options.tipJoint),null==b&&(b=this.options.targetJoint),g={},this.options.target?(j=this.adapter.offset(this.options.target),i=this.adapter.dimensions(this.options.target),g=j,b.right?(k=this.adapter.unwrap(this.options.target),null!=k.getBoundingClientRect?g.left=k.getBoundingClientRect().right+(null!=(l=window.pageXOffset)?l:document.body.scrollLeft):g.left+=i.width):b.center&&(g.left+=Math.round(i.width/2)),b.bottom?g.top+=i.height:b.middle&&(g.top+=Math.round(i.height/2)),this.options.borderWidth&&(this.options.tipJoint.left&&(g.left+=this.options.borderWidth),this.options.tipJoint.right&&(g.left-=this.options.borderWidth),this.options.tipJoint.top?g.top+=this.options.borderWidth:this.options.tipJoint.bottom&&(g.top-=this.options.borderWidth))):g=this.initialMousePosition?{top:this.initialMousePosition.y,left:this.initialMousePosition.x}:{top:mousePosition.y,left:mousePosition.x},this.options.autoOffset&&(h=this.options.stem?this.options.stemLength:0,f=h&&this.options.fixed?2:10,d=a.middle&&!this.options.fixed?15:0,e=a.center&&!this.options.fixed?15:0,a.right?g.left-=f+d:a.left&&(g.left+=f+d),a.bottom?g.top-=f+e:a.top&&(g.top+=f+e),h&&(null==c&&(c=this.options.stem),c.right?g.left-=h:c.left&&(g.left+=h),c.bottom?g.top-=h:c.top&&(g.top+=h))),g.left+=this.options.offset[0],g.top+=this.options.offset[1],a.right?g.left-=this.dimensions.width:a.center&&(g.left-=Math.round(this.dimensions.width/2)),a.bottom?g.top-=this.dimensions.height:a.middle&&(g.top-=Math.round(this.dimensions.height/2)),g):void 0},a.prototype._ensureViewportContainment=function(b){var c,d,e,f,g,h,i,j,k,l,m,n;if(i=this.options.stem,e={position:b,stem:i},!this.visible||!b)return e;if(j=this._sticksOut(b),!j[0]&&!j[1])return e;if(l=new a.Joint(this.options.tipJoint),this.options.targetJoint&&(k=new a.Joint(this.options.targetJoint)),h=this.adapter.scrollOffset(),m=this.adapter.viewportDimensions(),n=[b.left-h[0],b.top-h[1]],c=!1,m.width>=this.dimensions.width&&j[0])switch(c=!0,j[0]){case this.STICKS_OUT_LEFT:l.setHorizontal("left"),this.options.targetJoint&&k.setHorizontal("right");break;case this.STICKS_OUT_RIGHT:l.setHorizontal("right"),this.options.targetJoint&&k.setHorizontal("left")}if(m.height>=this.dimensions.height&&j[1])switch(c=!0,j[1]){case this.STICKS_OUT_TOP:l.setVertical("top"),this.options.targetJoint&&k.setVertical("bottom");break;case this.STICKS_OUT_BOTTOM:l.setVertical("bottom"),this.options.targetJoint&&k.setVertical("top")}return c?(this.options.stem&&(i=l),b=this.getPosition(l,k,i),d=this._sticksOut(b),f=!1,g=!1,d[0]&&d[0]!==j[0]&&(f=!0,l.setHorizontal(this.options.tipJoint.horizontal),this.options.targetJoint&&k.setHorizontal(this.options.targetJoint.horizontal)),d[1]&&d[1]!==j[1]&&(g=!0,l.setVertical(this.options.tipJoint.vertical),this.options.targetJoint&&k.setVertical(this.options.targetJoint.vertical)),f&&g?e:((f||g)&&(this.options.stem&&(i=l),b=this.getPosition(l,k,i)),{position:b,stem:i})):e},a.prototype._sticksOut=function(a){var b,c,d,e;return c=this.adapter.scrollOffset(),e=this.adapter.viewportDimensions(),b=[a.left-c[0],a.top-c[1]],d=[!1,!1],0>b[0]?d[0]=this.STICKS_OUT_LEFT:b[0]+this.dimensions.width>e.width&&(d[0]=this.STICKS_OUT_RIGHT),0>b[1]?d[1]=this.STICKS_OUT_TOP:b[1]+this.dimensions.height>e.height&&(d[1]=this.STICKS_OUT_BOTTOM),d},a.prototype._draw=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this;if(this.backgroundCanvas&&this.redraw){if(this.debug("Drawing background."),this.redraw=!1,this.currentStem){for(r=["top","right","bottom","left"],p=0,q=r.length;q>p;p++)m=r[p],this.adapter.removeClass(this.container,"stem-"+m);this.adapter.addClass(this.container,"stem-"+this.currentStem.horizontal),this.adapter.addClass(this.container,"stem-"+this.currentStem.vertical)
}return g=[0,0],h=[0,0],__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(f=new a.Joint("top right"===(null!=(s=this.currentStem)?s+"":void 0)?"top left":"top right"),g=[this.options.closeButtonRadius+this.options.closeButtonOffset[0],this.options.closeButtonRadius+this.options.closeButtonOffset[1]],h=[this.options.closeButtonRadius-this.options.closeButtonOffset[0],this.options.closeButtonRadius-this.options.closeButtonOffset[1]]),d=this.adapter.clone(this.dimensions),e=[0,0],this.options.borderWidth&&(d.width+=2*this.options.borderWidth,d.height+=2*this.options.borderWidth,e[0]-=this.options.borderWidth,e[1]-=this.options.borderWidth),this.options.shadow&&(d.width+=2*this.options.shadowBlur,d.width+=Math.max(0,this.options.shadowOffset[0]-2*this.options.shadowBlur),d.height+=2*this.options.shadowBlur,d.height+=Math.max(0,this.options.shadowOffset[1]-2*this.options.shadowBlur),e[0]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[0]),e[1]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[1])),c={left:0,right:0,top:0,bottom:0},this.currentStem&&(this.currentStem.left?c.left=this.options.stemLength:this.currentStem.right&&(c.right=this.options.stemLength),this.currentStem.top?c.top=this.options.stemLength:this.currentStem.bottom&&(c.bottom=this.options.stemLength)),f&&(f.left?c.left=Math.max(c.left,h[0]):f.right&&(c.right=Math.max(c.right,h[0])),f.top?c.top=Math.max(c.top,h[1]):f.bottom&&(c.bottom=Math.max(c.bottom,h[1]))),d.width+=c.left+c.right,d.height+=c.top+c.bottom,e[0]-=c.left,e[1]-=c.top,this.currentStem&&this.options.borderWidth&&(t=this._getPathStemMeasures(this.options.stemBase,this.options.stemLength,this.options.borderWidth),o=t.stemLength,n=t.stemBase),b=this.adapter.unwrap(this.backgroundCanvas),b.width=d.width,b.height=d.height,this.adapter.css(this.backgroundCanvas,{width:""+b.width+"px",height:""+b.height+"px",left:""+e[0]+"px",top:""+e[1]+"px"}),i=b.getContext("2d"),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,b.width,b.height),i.beginPath(),i.fillStyle=this._getColor(i,this.dimensions,this.options.background,this.options.backgroundGradientHorizontal),i.lineJoin="miter",i.miterLimit=500,l=this.options.borderWidth/2,this.options.borderWidth?(i.strokeStyle=this.options.borderColor,i.lineWidth=this.options.borderWidth):(o=this.options.stemLength,n=this.options.stemBase),null==n&&(n=0),k=function(a,b,c){return c&&i.moveTo(Math.max(n,u.options.borderRadius,g[0])+1-l,-l),b?(i.lineTo(a/2-n/2,-l),i.lineTo(a/2,-o-l),i.lineTo(a/2+n/2,-l)):void 0},j=function(a,b,c){var d,e,f,h;return a?(i.lineTo(-n+l,0-l),i.lineTo(o+l,-o-l),i.lineTo(l,n-l)):b?(h=u.options.closeButtonOffset,f=g[0],c%2!==0&&(h=[h[1],h[0]],f=g[1]),d=Math.acos(h[1]/u.options.closeButtonRadius),e=Math.acos(h[0]/u.options.closeButtonRadius),i.lineTo(-f+l,-l),i.arc(l-h[0],-l+h[1],u.options.closeButtonRadius,-(Math.PI/2+d),e,!1)):(i.lineTo(-u.options.borderRadius+l,-l),i.quadraticCurveTo(l,-l,l,u.options.borderRadius-l))},i.translate(-e[0],-e[1]),i.save(),function(){var b,c,d,e,g,h,l,m,n,o,p;for(p=[],c=n=0,o=a.positions.length/2;o>=0?o>n:n>o;c=o>=0?++n:--n)g=2*c,h=0===c||3===c?0:u.dimensions.width,l=2>c?0:u.dimensions.height,m=Math.PI/2*c,d=c%2===0?u.dimensions.width:u.dimensions.height,e=new a.Joint(a.positions[g]),b=new a.Joint(a.positions[g+1]),i.save(),i.translate(h,l),i.rotate(m),k(d,e.eql(u.currentStem),0===c),i.translate(d,0),j(b.eql(u.currentStem),b.eql(f),c),p.push(i.restore());return p}(),i.closePath(),i.save(),this.options.shadow&&(i.shadowColor=this.options.shadowColor,i.shadowBlur=this.options.shadowBlur,i.shadowOffsetX=this.options.shadowOffset[0],i.shadowOffsetY=this.options.shadowOffset[1]),i.fill(),i.restore(),this.options.borderWidth&&i.stroke(),i.restore(),f?function(){var a,b,c,d,e;return c=b=2*u.options.closeButtonRadius,f+""=="top right"?(e=[u.dimensions.width-u.options.closeButtonOffset[0],u.options.closeButtonOffset[1]],a=[e[0]+l,e[1]-l]):(e=[u.options.closeButtonOffset[0],u.options.closeButtonOffset[1]],a=[e[0]-l,e[1]-l]),i.translate(a[0],a[1]),d=u.options.closeButtonCrossSize/2,i.save(),i.beginPath(),i.strokeStyle=u.options.closeButtonCrossColor,i.lineWidth=u.options.closeButtonCrossLineWidth,i.lineCap="round",i.moveTo(-d,-d),i.lineTo(d,d),i.stroke(),i.beginPath(),i.moveTo(d,-d),i.lineTo(-d,d),i.stroke(),i.restore(),u.adapter.css(u.closeButtonElement,{left:""+(e[0]-d-u.options.closeButtonLinkOverscan)+"px",top:""+(e[1]-d-u.options.closeButtonLinkOverscan)+"px",width:""+(u.options.closeButtonCrossSize+2*u.options.closeButtonLinkOverscan)+"px",height:""+(u.options.closeButtonCrossSize+2*u.options.closeButtonLinkOverscan)+"px"})}():void 0}},a.prototype._getPathStemMeasures=function(a,b,c){var d,e,f,g,h,i,j;if(g=c/2,f=Math.atan(a/2/b),d=2*f,h=g/Math.sin(d),e=2*h*Math.cos(f),j=g+b-e,0>j)throw Error("Sorry but your stemLength / stemBase ratio is strange.");return i=Math.tan(f)*j*2,{stemLength:j,stemBase:i}},a.prototype._getColor=function(a,b,c,d){var e,f,g,h,i;if(null==d&&(d=!1),"string"==typeof c)return c;for(f=d?a.createLinearGradient(0,0,b.width,0):a.createLinearGradient(0,0,0,b.height),g=h=0,i=c.length;i>h;g=++h)e=c[g],f.addColorStop(e[0],e[1]);return f},a.prototype._searchAndActivateCloseButtons=function(){var a,b,c,d;for(d=this.adapter.findAll(this.container,"."+this["class"].close),b=0,c=d.length;c>b;b++)a=d[b],this.hideTriggers.push({element:this.adapter.wrap(a),event:"click"});return this.currentObservers.showing&&this._setupObservers("-showing","showing"),this.currentObservers.visible?this._setupObservers("-visible","visible"):void 0},a.prototype._activateFirstInput=function(){var a;return a=this.adapter.unwrap(this.adapter.find(this.container,"input, textarea")),null!=a&&"function"==typeof a.focus?a.focus():void 0},a.prototype._followMousePosition=function(){return this.options.fixed?void 0:a._observeMousePosition(this.bound.reposition)},a.prototype._stopFollowingMousePosition=function(){return this.options.fixed?void 0:a._stopObservingMousePosition(this.bound.reposition)},a.prototype._clearShowTimeout=function(){return clearTimeout(this._showTimeoutId)},a.prototype._clearHideTimeout=function(){return clearTimeout(this._hideTimeoutId)},a.prototype._clearTimeouts=function(){return clearTimeout(this._visibilityStateTimeoutId),this._clearShowTimeout(),this._clearHideTimeout()},a.prototype._triggerElementExists=function(){var a;for(a=this.adapter.unwrap(this.triggerElement);a.parentNode;){if("BODY"===a.parentNode.tagName)return!0;a=a.parentNode}return!1},a.prototype._loadAjax=function(){var a=this;return this.loading?void 0:(this.loaded=!1,this.loading=!0,this.adapter.addClass(this.container,this["class"].loading),this.setContent(""),this.debug("Loading content from "+this.options.ajax),this.adapter.ajax({url:this.options.ajax,method:this.options.ajaxMethod,onSuccess:function(b){return a.debug("Loading successful."),a.adapter.removeClass(a.container,a["class"].loading),a.setContent(b)},onError:function(b){var c;return c=a.options.ajaxErrorMessage,a.debug(c,b),a.setContent(c),a.adapter.addClass(a.container,a["class"].ajaxError)},onComplete:function(){return a.adapter.removeClass(a.container,a["class"].loading),a.loading=!1,a.loaded=!0,a._searchAndActivateCloseButtons(),a._activateFirstInput(),a.reposition()}}))},a.prototype._ensureTriggerElement=function(){return this._triggerElementExists()?void 0:(this.deactivate(),this._stopEnsureTriggerElement())},a.prototype._ensureTriggerElementInterval=1e3,a.prototype._startEnsureTriggerElement=function(){var a=this;return this._ensureTriggerElementTimeoutId=setInterval(function(){return a._ensureTriggerElement()},this._ensureTriggerElementInterval)},a.prototype._stopEnsureTriggerElement=function(){return clearInterval(this._ensureTriggerElementTimeoutId)},a}(),vendors=["khtml","ms","o","moz","webkit"],Opentip.prototype.setCss3Style=function(a,b){var c,d,e,f,g;a=this.adapter.unwrap(a),g=[];for(c in b)__hasProp.call(b,c)&&(d=b[c],g.push(null!=a.style[c]?a.style[c]=d:function(){var b,g,h;for(h=[],b=0,g=vendors.length;g>b;b++)e=vendors[b],f=""+this.ucfirst(e)+this.ucfirst(c),h.push(null!=a.style[f]?a.style[f]=d:void 0);return h}.call(this)));return g},Opentip.prototype.defer=function(a){return setTimeout(a,0)},Opentip.prototype.setTimeout=function(a,b){return setTimeout(a,b?1e3*b:0)},Opentip.prototype.ucfirst=function(a){return null==a?"":a.charAt(0).toUpperCase()+a.slice(1)},Opentip.prototype.dasherize=function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},mousePositionObservers=[],mousePosition={x:0,y:0},mouseMoved=function(a){var b,c,d,e;for(mousePosition=Opentip.adapter.mousePosition(a),e=[],c=0,d=mousePositionObservers.length;d>c;c++)b=mousePositionObservers[c],e.push(b());return e},Opentip.followMousePosition=function(){return Opentip.adapter.observe(document.body,"mousemove",mouseMoved)},Opentip._observeMousePosition=function(a){return mousePositionObservers.push(a)},Opentip._stopObservingMousePosition=function(a){var b;return mousePositionObservers=function(){var c,d,e;for(e=[],c=0,d=mousePositionObservers.length;d>c;c++)b=mousePositionObservers[c],b!==a&&e.push(b);return e}()},Opentip.Joint=function(){function a(a){null!=a&&(a instanceof Opentip.Joint&&(a+=""),this.set(a))}return a.prototype.set=function(a){return a=a.toLowerCase(),this.setHorizontal(a),this.setVertical(a),this},a.prototype.setHorizontal=function(a){var b,c,d,e,f,g,h;for(c=["left","center","right"],d=0,f=c.length;f>d;d++)b=c[d],~a.indexOf(b)&&(this.horizontal=b.toLowerCase());for(null==this.horizontal&&(this.horizontal="center"),h=[],e=0,g=c.length;g>e;e++)b=c[e],h.push(this[b]=this.horizontal===b?b:void 0);return h},a.prototype.setVertical=function(a){var b,c,d,e,f,g,h;for(c=["top","middle","bottom"],d=0,f=c.length;f>d;d++)b=c[d],~a.indexOf(b)&&(this.vertical=b.toLowerCase());for(null==this.vertical&&(this.vertical="middle"),h=[],e=0,g=c.length;g>e;e++)b=c[e],h.push(this[b]=this.vertical===b?b:void 0);return h},a.prototype.eql=function(a){return null!=a&&this.horizontal===a.horizontal&&this.vertical===a.vertical},a.prototype.flip=function(){var a,b;return b=Opentip.position[this.toString(!0)],a=(b+4)%8,this.set(Opentip.positions[a]),this},a.prototype.toString=function(a){var b,c;return null==a&&(a=!1),c="middle"===this.vertical?"":this.vertical,b="center"===this.horizontal?"":this.horizontal,c&&b&&(b=a?Opentip.prototype.ucfirst(b):" "+b),""+c+b},a}(),Opentip.prototype._positionsEqual=function(a,b){return null!=a&&null!=b&&a.left===b.left&&a.top===b.top},Opentip.prototype._dimensionsEqual=function(a,b){return null!=a&&null!=b&&a.width===b.width&&a.height===b.height},Opentip.prototype.debug=function(){var a;return a=arguments.length>=1?__slice.call(arguments,0):[],Opentip.debug&&null!=("undefined"!=typeof console&&null!==console?console.debug:void 0)?(a.unshift("#"+this.id+" |"),console.debug.apply(console,a)):void 0},Opentip.findElements=function(){var a,b,c,d,e,f,g,h,i,j;for(a=Opentip.adapter,i=a.findAll(document.body,"[data-ot]"),j=[],g=0,h=i.length;h>g;g++){c=i[g],f={},b=a.data(c,"ot"),(""===b||"true"===b||"yes"===b)&&(b=a.attr(c,"title"),a.attr(c,"title","")),b=b||"";for(d in Opentip.styles.standard)e=a.data(c,"ot"+Opentip.prototype.ucfirst(d)),null!=e&&("yes"===e||"true"===e||"on"===e?e=!0:("no"===e||"false"===e||"off"===e)&&(e=!1),f[d]=e);j.push(new Opentip(c,b,f))}return j},Opentip.version="2.4.6",Opentip.debug=!1,Opentip.lastId=0,Opentip.lastZIndex=100,Opentip.tips=[],Opentip._abortShowingGroup=function(a,b){var c,d,e,f,g;for(f=Opentip.tips,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c!==b&&c.options.group===a?c._abortShowing():void 0);return g},Opentip._hideGroup=function(a,b){var c,d,e,f,g;for(f=Opentip.tips,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c!==b&&c.options.group===a?c.hide():void 0);return g},Opentip.adapters={},Opentip.adapter=null,firstAdapter=!0,Opentip.addAdapter=function(a){return Opentip.adapters[a.name]=a,firstAdapter?(Opentip.adapter=a,a.domReady(Opentip.findElements),a.domReady(Opentip.followMousePosition),firstAdapter=!1):void 0},Opentip.positions=["top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"],Opentip.position={},_ref=Opentip.positions,i=_i=0,_len=_ref.length;_len>_i;i=++_i)position=_ref[i],Opentip.position[position]=i;Opentip.styles={standard:{"extends":null,title:void 0,escapeTitle:!0,escapeContent:!1,className:"standard",stem:!0,delay:null,hideDelay:.1,fixed:!1,showOn:"mouseover",hideTrigger:"trigger",hideTriggers:[],hideOn:null,removeElementsOnHide:!1,offset:[0,0],containInViewport:!0,autoOffset:!0,showEffect:"appear",hideEffect:"fade",showEffectDuration:.3,hideEffectDuration:.2,stemLength:5,stemBase:8,tipJoint:"top left",target:null,targetJoint:null,cache:!0,ajax:!1,ajaxMethod:"GET",ajaxErrorMessage:"There was a problem downloading the content.",group:null,style:null,background:"#fff18f",backgroundGradientHorizontal:!1,closeButtonOffset:[5,5],closeButtonRadius:7,closeButtonCrossSize:4,closeButtonCrossColor:"#d2c35b",closeButtonCrossLineWidth:1.5,closeButtonLinkOverscan:6,borderRadius:5,borderWidth:1,borderColor:"#f2e37b",shadow:!0,shadowBlur:10,shadowOffset:[3,3],shadowColor:"rgba(0, 0, 0, 0.1)"},glass:{"extends":"standard",className:"glass",background:[[0,"rgba(252, 252, 252, 0.8)"],[.5,"rgba(255, 255, 255, 0.8)"],[.5,"rgba(250, 250, 250, 0.9)"],[1,"rgba(245, 245, 245, 0.9)"]],borderColor:"#eee",closeButtonCrossColor:"rgba(0, 0, 0, 0.2)",borderRadius:15,closeButtonRadius:10,closeButtonOffset:[8,8]},dark:{"extends":"standard",className:"dark",borderRadius:13,borderColor:"#444",closeButtonCrossColor:"rgba(240, 240, 240, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(30, 30, 30, 0.7)"],[.5,"rgba(30, 30, 30, 0.8)"],[.5,"rgba(10, 10, 10, 0.8)"],[1,"rgba(10, 10, 10, 0.9)"]]},alert:{"extends":"standard",className:"alert",borderRadius:1,borderColor:"#AE0D11",closeButtonCrossColor:"rgba(255, 255, 255, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(203, 15, 19, 0.7)"],[.5,"rgba(203, 15, 19, 0.8)"],[.5,"rgba(189, 14, 18, 0.8)"],[1,"rgba(179, 14, 17, 0.9)"]]}},Opentip.defaultStyle="standard","undefined"!=typeof module&&null!==module?module.exports=Opentip:window.Opentip=Opentip;var Adapter,__hasProp={}.hasOwnProperty,__slice=[].slice;Adapter=function(){function a(){}var b,c;return a.prototype.name="native",a.prototype.domReady=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(d=!1,j=!0,k=window,c=document,"complete"===(l=c.readyState)||"loaded"===l)return a();if(i=c.documentElement,b=c.addEventListener?"addEventListener":"attachEvent",h=c.addEventListener?"removeEventListener":"detachEvent",g=c.addEventListener?"":"on",e=function(b){return"readystatechange"!==b.type||"complete"===c.readyState?(("load"===b.type?k:c)[h](g+b.type,e,!1),d?void 0:(d=!0,a())):void 0},f=function(){try{i.doScroll("left")}catch(a){return void setTimeout(f,50)}return e("poll")},"complete"!==c.readyState){if(c.createEventObject&&i.doScroll){try{j=!k.frameElement}catch(m){}j&&f()}return c[b](g+"DOMContentLoaded",e,!1),c[b](g+"readystatechange",e,!1),k[b](g+"load",e,!1)}},a.prototype.create=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,this.wrap(b.childNodes)},a.prototype.wrap=function(a){var b;return a?"string"==typeof a?(a=this.find(document.body,a),a=a?[a]:[]):a instanceof NodeList?a=function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b);return e}():a instanceof Array||(a=[a]):a=[],a},a.prototype.unwrap=function(a){return this.wrap(a)[0]},a.prototype.tagName=function(a){return this.unwrap(a).tagName},a.prototype.attr=function(a,b,c){return 3===arguments.length?this.unwrap(a).setAttribute(b,c):this.unwrap(a).getAttribute(b)},c=0,b={},a.prototype.data=function(a,d,e){var f;return f=this.attr(a,"data-id"),f||(f=++c,this.attr(a,"data-id",f),b[f]={}),3===arguments.length?b[f][d]=e:(e=b[f][d],null!=e?e:(e=this.attr(a,"data-"+Opentip.prototype.dasherize(d)),e&&(b[f][d]=e),e))},a.prototype.find=function(a,b){return this.unwrap(a).querySelector(b)},a.prototype.findAll=function(a,b){return this.unwrap(a).querySelectorAll(b)},a.prototype.update=function(a,b,c){return a=this.unwrap(a),c?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.innerHTML=b},a.prototype.append=function(a,b){var c,d;return c=this.unwrap(b),d=this.unwrap(a),d.appendChild(c)},a.prototype.remove=function(a){var b;return a=this.unwrap(a),b=a.parentNode,null!=b?b.removeChild(a):void 0},a.prototype.addClass=function(a,b){return this.unwrap(a).classList.add(b)},a.prototype.removeClass=function(a,b){return this.unwrap(a).classList.remove(b)},a.prototype.css=function(a,b){var c,d,e;a=this.unwrap(this.wrap(a)),e=[];for(c in b)__hasProp.call(b,c)&&(d=b[c],e.push(a.style[c]=d));return e},a.prototype.dimensions=function(a){var b,c;return a=this.unwrap(this.wrap(a)),b={width:a.offsetWidth,height:a.offsetHeight},b.width&&b.height||(c={position:a.style.position||"",visibility:a.style.visibility||"",display:a.style.display||""},this.css(a,{position:"absolute",visibility:"hidden",display:"block"}),b={width:a.offsetWidth,height:a.offsetHeight},this.css(a,c)),b},a.prototype.scrollOffset=function(){return[window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop]},a.prototype.viewportDimensions=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},a.prototype.mousePosition=function(a){var b;if(b={x:0,y:0},null==a&&(a=window.event),null!=a){try{a.pageX||a.pageY?(b.x=a.pageX,b.y=a.pageY):(a.clientX||a.clientY)&&(b.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop)}catch(a){}return b}},a.prototype.offset=function(a){var b;for(a=this.unwrap(a),b={top:a.offsetTop,left:a.offsetLeft};a=a.offsetParent;)b.top+=a.offsetTop,b.left+=a.offsetLeft,a!==document.body&&(b.top-=a.scrollTop,b.left-=a.scrollLeft);return b},a.prototype.observe=function(a,b,c){return this.unwrap(a).addEventListener(b,c,!1)},a.prototype.stopObserving=function(a,b,c){return this.unwrap(a).removeEventListener(b,c,!1)},a.prototype.ajax=function(a){var b,c,d;if(null==a.url)throw Error("No url provided");if(window.XMLHttpRequest)b=new XMLHttpRequest;else if(window.ActiveXObject)try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if(!b)throw Error("Can't create XMLHttpRequest");return b.onreadystatechange=function(){if(4===b.readyState){try{200===b.status?"function"==typeof a.onSuccess&&a.onSuccess(b.responseText):"function"==typeof a.onError&&a.onError("Server responded with status "+b.status)}catch(c){"function"==typeof a.onError&&a.onError(c.message)}return"function"==typeof a.onComplete?a.onComplete():void 0}},b.open(null!=(c=null!=(d=a.method)?d.toUpperCase():void 0)?c:"GET",a.url),b.send()},a.prototype.clone=function(a){var b,c,d;c={};for(b in a)__hasProp.call(a,b)&&(d=a[b],c[b]=d);return c},a.prototype.extend=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=arguments.length>=2?__slice.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)__hasProp.call(b,a)&&(e=b[a],d[a]=e)}return d},a}(),Opentip.addAdapter(new Adapter),"undefined"==typeof document||"classList"in document.createElement("a")||function(a){"use strict";if("HTMLElement"in a||"Element"in a){var b="classList",c="prototype",d=(a.HTMLElement||a.Element)[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.className),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.className=this+""}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(d>++c);e&&this._updateClassName()},k.remove=function(){var a,b=arguments,c=0,d=b.length,e=!1;do{a=b[c]+"";var f=i(this,a);-1!==f&&(this.splice(f,1),e=!0)}while(d>++c);e&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(self),!window.addEventListener&&function(a,b,c,d,e,f,g){a[d]=b[d]=c[d]=function(a,b){var c=this;g.unshift([c,a,b,function(a){a.currentTarget=c,a.preventDefault=function(){a.returnValue=!1},a.stopPropagation=function(){a.cancelBubble=!0},a.target=a.srcElement||c,b.call(c,a)}]),this.attachEvent("on"+a,g[0][3])},a[e]=b[e]=c[e]=function(a,b){for(var c,d=0;c=g[d];++d)if(c[0]==this&&c[1]==a&&c[2]==b)return this.detachEvent("on"+a,g.splice(d,1)[0][3])},a[f]=b[f]=c[f]=function(a){return this.fireEvent("on"+a.type,a)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);var wysihtml5={version:"0.4.0pre",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"﻿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function a(a,b){var c=typeof a[b];return c==l||!(c!=k||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=k||!a[b])}function c(a,b){return typeof a[b]!=m}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&r(a,q)&&t(a,p)}function f(a){window.alert("Rangy not supported in your browser. Reason: "+a),u.initialized=!0,u.supported=!1}function g(a){var b="Rangy warning: "+a;u.config.alertOnWarn?window.alert(b):typeof window.console!=m&&typeof window.console.log!=m&&window.console.log(b)}function h(){if(!u.initialized){var c,d=!1,g=!1;a(document,"createRange")&&(c=document.createRange(),r(c,o)&&t(c,n)&&(d=!0),c.detach());var h=b(document,"body")?document.body:document.getElementsByTagName("body")[0];h&&a(h,"createTextRange")&&(c=h.createTextRange(),e(c)&&(g=!0)),d||g||f("Neither Range nor TextRange are implemented"),u.initialized=!0,u.features={implementsDomRange:d,implementsTextRange:g};for(var i=w.concat(v),j=0,k=i.length;k>j;++j)try{i[j](u)}catch(l){b(window,"console")&&a(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",l)}}}function i(a){a=a||window,h();for(var b=0,c=x.length;c>b;++b)x[b](a)}function j(a){this.name=a,this.initialized=!1,this.supported=!1}var k="object",l="function",m="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],o=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],p=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],q=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],r=d(a),s=d(b),t=d(c),u={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:r,areHostObjects:s,areHostProperties:t,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};u.fail=f,u.warn=g,{}.hasOwnProperty?u.util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}:f("hasOwnProperty not supported");var v=[],w=[];u.init=h,u.addInitListener=function(a){u.initialized?a(u):v.push(a)};var x=[];u.addCreateMissingNativeApiListener=function(a){x.push(a)},u.createMissingNativeApi=i,j.prototype.fail=function(a){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+a)},j.prototype.warn=function(a){u.warn("Module "+this.name+": "+a)},j.prototype.createError=function(a){return new Error("Error in Rangy "+this.name+" module: "+a)},u.createModule=function(a,b){var c=new j(a);u.modules[a]=c,w.push(function(a){b(a,c),c.initialized=!0,c.supported=!0})},u.requireModules=function(a){for(var b,c,d=0,e=a.length;e>d;++d){if(c=a[d],b=u.modules[c],!(b&&b instanceof j))throw new Error("Module '"+c+"' not found");if(!b.supported)throw new Error("Module '"+c+"' not supported")}};var y=!1,z=function(){y||(y=!0,u.initialized||h())};return typeof window==m?void f("No window found"):typeof document==m?void f("No document found"):(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",z,!1),a(window,"addEventListener")?window.addEventListener("load",z,!1):a(window,"attachEvent")?window.attachEvent("onload",z):f("Window does not have required addEventListener or attachEvent method"),u)}(),rangy.createModule("DomUtil",function(a,b){function c(a){var b;return typeof a.namespaceURI==z||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)b++;return b}function f(a){var b;return j(a)?a.length:(b=a.childNodes)?b.length:0}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(D(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function j(a){var b=a.nodeType;return 3==b||4==b||8==b}function k(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function l(a,b){var c=a.cloneNode(!1);return c.deleteData(0,b),a.deleteData(b,a.length-b),k(c,a),c}function m(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=z)return a.ownerDocument;if(typeof a.document!=z)return a.document;if(a.parentNode)return m(a.parentNode);throw new Error("getDocument: no document found for node")}function n(a){var b=m(a);if(typeof b.defaultView!=z)return b.defaultView;if(typeof b.parentWindow!=z)return b.parentWindow;throw new Error("Cannot get a window object for node")}function o(a){if(typeof a.contentDocument!=z)return a.contentDocument;if(typeof a.contentWindow!=z)return a.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function p(a){if(typeof a.contentWindow!=z)return a.contentWindow;if(typeof a.contentDocument!=z)return a.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function q(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]}function r(a){for(var b;b=a.parentNode;)a=b;return a}function s(a,b,c,d){var f,h,j,k,l;if(a==c)return b===d?0:d>b?-1:1;if(f=i(c,a,!0))return b<=e(f)?-1:1;if(f=i(a,c,!0))return e(f)<d?-1:1;if(h=g(a,c),j=a===h?h:i(a,h,!0),k=c===h?h:i(c,h,!0),j===k)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=h.firstChild;l;){if(l===j)return-1;if(l===k)return 1;l=l.nextSibling}throw new Error("Should not be here!")}function t(a){for(var b,c=m(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function u(a){if(!a)return"[No node]";if(j(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">["+a.childNodes.length+"]"}return a.nodeName}function v(a){this.root=a,this._next=a}function w(a){return new v(a)}function x(a,b){this.node=a,this.offset=b}function y(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var z="undefined",A=a.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),A.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var B=document.createElement("div");A.areHostMethods(B,["insertBefore","appendChild","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),A.isHostProperty(B,"innerHTML")||b.fail("Element is missing innerHTML property");var C=document.createTextNode("test");A.areHostMethods(C,["splitText","deleteData","insertData","appendData","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"])||!A.areHostProperties(C,["data"]))||b.fail("Incomplete Text Node implementation");var D=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};v.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+u(this.node)+":"+this.offset+")]"}},y.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},y.prototype.toString=function(){return this.message},a.dom={arrayContains:D,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,getClosestAncestorIn:i,isCharacterDataNode:j,insertAfter:k,splitDataNode:l,getDocument:m,getWindow:n,getIframeWindow:p,getIframeDocument:o,getBody:q,getRootContainer:r,comparePoints:s,inspectNode:u,fragmentFromNodeChildren:t,createIterator:w,DomPosition:x},a.DOMException=y}),rangy.createModule("DomRange",function(a){function b(a,b){return 3!=a.nodeType&&(K.isAncestorOf(a,b.startContainer,!0)||K.isAncestorOf(a,b.endContainer,!0))}function c(a){return K.getDocument(a.startContainer)}function d(a,b,c){var d=a._listeners[b];if(d)for(var e=0,f=d.length;f>e;++e)d[e].call(a,{target:a,args:c})}function e(a){return new L(a.parentNode,K.getNodeIndex(a))}function f(a){return new L(a.parentNode,K.getNodeIndex(a)+1)}function g(a,b,c){var d=11==a.nodeType?a.firstChild:a;return K.isCharacterDataNode(b)?c==b.length?K.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:K.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function h(a){for(var b,d,e,f=c(a.range).createDocumentFragment();d=a.next();){if(b=a.isPartiallySelectedSubtree(),d=d.cloneNode(!b),b&&(e=a.getSubtreeIterator(),d.appendChild(h(e)),e.detach(!0)),10==d.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(d)}return f}function i(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),i(g,b,c),g.detach(!0),c.stop)return}else for(d=K.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function j(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),j(b),b.detach(!0)):a.remove()}function k(a){for(var b,d,e=c(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),d=a.getSubtreeIterator(),b.appendChild(k(d)),d.detach(!0)):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function l(a,b,c){var d,e=!(!b||!b.length),f=!!c;
e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return i(new n(a,!1),function(a){e&&!d.test(a.nodeType)||f&&!c(a)||g.push(a)}),g}function m(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+K.inspectNode(a.startContainer)+":"+a.startOffset+", "+K.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function n(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&K.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||K.isCharacterDataNode(this.sc)?K.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||K.isCharacterDataNode(this.ec)?K.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function o(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function p(a,b,c){this.nodes=l(a,b,c),this._next=this.nodes[0],this._position=0}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,K.arrayContains(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(V(a,b))throw new o("INVALID_NODE_TYPE_ERR")}function s(a){if(!a.startContainer)throw new M("INVALID_STATE_ERR")}function t(a,b){if(!K.arrayContains(b,a.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function u(a,b){if(0>b||b>(K.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function v(a,b){if(T(a,!0)!==T(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function w(a){if(U(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function x(a,b){if(!a)throw new M(b)}function y(a){return!K.arrayContains(O,a.nodeType)&&!T(a,!0)}function z(a,b){return b<=(K.isCharacterDataNode(a)?a.length:a.childNodes.length)}function A(a){if(s(a),y(a.startContainer)||y(a.endContainer)||!z(a.startContainer,a.startOffset)||!z(a.endContainer,a.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function B(){}function C(a){a.START_TO_START=_,a.START_TO_END=ab,a.END_TO_END=bb,a.END_TO_START=cb,a.NODE_BEFORE=db,a.NODE_AFTER=eb,a.NODE_BEFORE_AND_AFTER=fb,a.NODE_INSIDE=gb}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){A(this);var c,d,e=this.startContainer,g=this.startOffset,h=this.commonAncestorContainer,j=new n(this,!0);e!==h&&(c=K.getClosestAncestorIn(e,h,!0),d=f(c),e=d.node,g=d.offset),i(j,w),j.reset();var k=a(j);return j.detach(),b(this,e,g,e,g),k}}function F(c,d,g){function h(a,b){return function(c){s(this),t(c,N),t(S(c),O);var d=(a?e:f)(c);(b?i:l)(this,d.node,d.offset)}}function i(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((S(b)!=S(e)||1==K.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function l(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((S(b)!=S(e)||-1==K.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}function m(a,b,c){(b!==a.startContainer||c!==a.startOffset||b!==a.endContainer||c!==a.endOffset)&&d(a,b,c,b,c)}c.prototype=new B,a.util.extend(c.prototype,{setStart:function(a,b){s(this),r(a,!0),u(a,b),i(this,a,b)},setEnd:function(a,b){s(this),r(a,!0),u(a,b),l(this,a,b)},setStartBefore:h(!0,!0),setStartAfter:h(!1,!0),setEndBefore:h(!0,!1),setEndAfter:h(!1,!1),collapse:function(a){A(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){s(this),r(a,!0),d(this,a,0,a,K.getNodeLength(a))},selectNode:function(a){s(this),r(a,!1),t(a,N);var b=e(a),c=f(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(k,d),deleteContents:E(j,d),canSurroundContents:function(){A(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},detach:function(){g(this)},splitBoundaries:function(){A(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=a===c;K.isCharacterDataNode(c)&&e>0&&e<c.length&&K.splitDataNode(c,e),K.isCharacterDataNode(a)&&b>0&&b<a.length&&(a=K.splitDataNode(a,b),f?(e-=b,c=a):c==a.parentNode&&e>=K.getNodeIndex(a)&&e++,b=0),d(this,a,b,c,e)},normalizeBoundaries:function(){A(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(c=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(d){var f=d.previousSibling;if(f&&f.nodeType==d.nodeType){a=d;var g=d.length;if(b=f.length,d.insertData(0,f.data),f.parentNode.removeChild(f),a==c)e+=b,c=a;else if(c==d.parentNode){var h=K.getNodeIndex(d);e==h?(c=d,e=g):e>h&&e--}}},h=!0;if(K.isCharacterDataNode(c))c.length==e&&f(c);else{if(e>0){var i=c.childNodes[e-1];i&&K.isCharacterDataNode(i)&&f(i)}h=!this.collapsed}if(h){if(K.isCharacterDataNode(a))0==b&&g(a);else if(b<a.childNodes.length){var j=a.childNodes[b];j&&K.isCharacterDataNode(j)&&g(j)}}else a=c,b=e;d(this,a,b,c,e)},collapseToPoint:function(a,b){s(this),r(a,!0),u(a,b),m(this,a,b)}}),D(c)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:K.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,e,f){var g=a.startContainer!==b||a.startOffset!==c,h=a.endContainer!==e||a.endOffset!==f;a.startContainer=b,a.startOffset=c,a.endContainer=e,a.endOffset=f,G(a),d(a,"boundarychange",{startMoved:g,endMoved:h})}function I(a){s(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null,d(a,"detach",null),a._listeners=null}function J(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},G(this)}a.requireModules(["DomUtil"]);var K=a.dom,L=K.DomPosition,M=a.DOMException;n.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,K.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!K.isCharacterDataNode(c)||c!==this.sc&&c!==this.ec?c.parentNode&&c.parentNode.removeChild(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return b(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new J(c(this.range));var b=this._current,d=b,e=0,f=b,g=K.getNodeLength(b);K.isAncestorOf(b,this.sc,!0)&&(d=this.sc,e=this.so),K.isAncestorOf(b,this.ec,!0)&&(f=this.ec,g=this.eo),H(a,d,e,f,g)}return new n(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message},p.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var N=[1,3,4,5,7,8,10],O=[2,9,11],P=[5,6,10,12],Q=[1,3,4,5,7,8,10,11],R=[1,3,4,5,7,8],S=K.getRootContainer,T=q([9,11]),U=q(P),V=q([6,10,12]),W=document.createElement("style"),X=!1;try{W.innerHTML="<b>x</b>",X=3==W.firstChild.nodeType}catch(Y){}a.features.htmlParsingConforms=X;var Z=X?function(a){var b=this.startContainer,c=K.getDocument(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:K.isCharacterDataNode(b)&&(d=K.parentElement(b)),d=null===d||"HTML"==d.nodeName&&K.isHtmlNamespace(K.getDocument(d).documentElement)&&K.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,K.fragmentFromNodeChildren(d)}:function(a){s(this);var b=c(this),d=b.createElement("body");return d.innerHTML=a,K.fragmentFromNodeChildren(d)},$=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],_=0,ab=1,bb=2,cb=3,db=0,eb=1,fb=2,gb=3;B.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){A(this),v(this.startContainer,b.startContainer);var c,d,e,f,g=a==cb||a==_?"start":"end",h=a==ab||a==_?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],K.comparePoints(c,d,e,f)},insertNode:function(a){if(A(this),t(a,Q),w(this.startContainer),K.isAncestorOf(a,this.startContainer,!0))throw new M("HIERARCHY_REQUEST_ERR");var b=g(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){A(this);var a,b;if(this.collapsed)return c(this).createDocumentFragment();if(this.startContainer===this.endContainer&&K.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=c(this).createDocumentFragment(),b.appendChild(a),b;var d=new n(this,!0);return a=h(d),d.detach(),a},canSurroundContents:function(){A(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},surroundContents:function(a){if(t(a,R),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){A(this);for(var a,b=new J(c(this)),d=$.length;d--;)a=$[d],b[a]=this[a];return b},toString:function(){A(this);var a=this.startContainer;if(a===this.endContainer&&K.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new n(this,!0);return i(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){A(this);var b=a.parentNode,c=K.getNodeIndex(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?fb:db:e>0?eb:gb},comparePoint:function(a,b){return A(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),K.comparePoints(a,b,this.startContainer,this.startOffset)<0?-1:K.comparePoints(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Z,toHtml:function(){A(this);var a=c(this).createElement("div");return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,b){if(A(this),x(a,"NOT_FOUND_ERR"),K.getDocument(a)!==c(this))return!1;var d=a.parentNode,e=K.getNodeIndex(a);x(d,"NOT_FOUND_ERR");var f=K.comparePoints(d,e,this.endContainer,this.endOffset),g=K.comparePoints(d,e+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return A(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),K.comparePoints(a,b,this.startContainer,this.startOffset)>=0&&K.comparePoints(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a,b){if(A(this),c(a)!=c(this))throw new M("WRONG_DOCUMENT_ERR");var d=K.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),e=K.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return b?0>=d&&e>=0:0>d&&e>0},intersection:function(a){if(this.intersectsRange(a)){var b=K.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=K.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();return-1==K.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==K.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new o("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==gb},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,K.getNodeLength(a))<=0},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();b.setEnd(d,d.length);var e=this.containsRange(b);return b.detach(),e}return this.containsNodeContents(a)},createNodeIterator:function(a,b){return A(this),new p(this,a,b)},getNodes:function(a,b){return A(this),l(this,a,b)},getDocument:function(){return c(this)},collapseBefore:function(a){s(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){s(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return J.rangesEqual(this,a)},inspect:function(){return m(this)}},F(J,H,I),a.rangePrototype=B.prototype,J.rangeProperties=$,J.RangeIterator=n,J.copyComparisonConstants=D,J.createPrototypeRange=F,J.inspect=m,J.getRangeDocument=c,J.rangesEqual=function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},a.DomRange=J,a.RangeException=o}),rangy.createModule("WrappedRange",function(a){function b(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var e=c.parentElement(),f=d==e?d:g.getCommonAncestor(d,e);return f==b?f:g.getCommonAncestor(b,f)}function c(a){return 0==a.compareEndPoints("StartToEnd",a)}function d(a,b,c,d){var e=a.duplicate();e.collapse(c);var f=e.parentElement();if(g.isAncestorOf(b,f,!0)||(f=b),!f.canHaveHTML)return new h(f.parentNode,g.getNodeIndex(f));var i,j,k,l,m,n=g.getDocument(f).createElement("span"),o=c?"StartToStart":"StartToEnd";do f.insertBefore(n,n.previousSibling),e.moveToElementText(n);while((i=e.compareEndPoints(o,a))>0&&n.previousSibling);if(m=n.nextSibling,-1==i&&m&&g.isCharacterDataNode(m)){e.setEndPoint(c?"EndToStart":"EndToEnd",a);var p;if(/[\r\n]/.test(m.data)){var q=e.duplicate(),r=q.text.replace(/\r\n/g,"\r").length;for(p=q.moveStart("character",r);-1==(i=q.compareEndPoints("StartToEnd",q));)p++,q.moveStart("character",1)}else p=e.text.length;l=new h(m,p)}else j=(d||!c)&&n.previousSibling,k=(d||c)&&n.nextSibling,l=k&&g.isCharacterDataNode(k)?new h(k,0):j&&g.isCharacterDataNode(j)?new h(j,j.length):new h(f,g.getNodeIndex(n));return n.parentNode.removeChild(n),l}function e(a,b){var c,d,e,f,h=a.offset,i=g.getDocument(a.node),j=i.body.createTextRange(),k=g.isCharacterDataNode(a.node);return k?(c=a.node,d=c.parentNode):(f=a.node.childNodes,c=h<f.length?f[h]:null,d=a.node),e=i.createElement("span"),e.innerHTML="&#feff;",c?d.insertBefore(e,c):d.appendChild(e),j.moveToElementText(e),j.collapse(!b),d.removeChild(e),k&&j[b?"moveStart":"moveEnd"]("character",h),j}a.requireModules(["DomUtil","DomRange"]);var f,g=a.dom,h=g.DomPosition,i=a.DomRange;if(!a.features.implementsDomRange||a.features.implementsTextRange&&a.config.preferTextRange){if(a.features.implementsTextRange){f=function(a){this.textRange=a,this.refresh()},f.prototype=new i(document),f.prototype.refresh=function(){var a,e,f=b(this.textRange);c(this.textRange)?e=a=d(this.textRange,f,!0,!0):(a=d(this.textRange,f,!0,!1),e=d(this.textRange,f,!1,!1)),this.setStart(a.node,a.offset),this.setEnd(e.node,e.offset)},i.copyComparisonConstants(f);var j=function(){return this}();"undefined"==typeof j.Range&&(j.Range=f),a.createNativeRange=function(a){return a=a||document,a.body.createTextRange()}}}else!function(){function b(a){for(var b,c=k.length;c--;)b=k[c],a[b]=a.nativeRange[b]}function c(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e;(f||g)&&(a.setEnd(d,e),a.setStart(b,c))}function d(a){a.nativeRange.detach(),a.detached=!0;for(var b,c=k.length;c--;)b=k[c],a[b]=null}var e,h,j,k=i.rangeProperties;f=function(a){if(!a)throw new Error("Range must be specified");this.nativeRange=a,b(this)},i.createPrototypeRange(f,c,d),e=f.prototype,e.selectNode=function(a){this.nativeRange.selectNode(a),b(this)},e.deleteContents=function(){this.nativeRange.deleteContents(),b(this)},e.extractContents=function(){var a=this.nativeRange.extractContents();return b(this),a},e.cloneContents=function(){return this.nativeRange.cloneContents()},e.surroundContents=function(a){this.nativeRange.surroundContents(a),b(this)},e.collapse=function(a){this.nativeRange.collapse(a),b(this)},e.cloneRange=function(){return new f(this.nativeRange.cloneRange())},e.refresh=function(){b(this)},e.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");g.getBody(document).appendChild(l);var m=document.createRange();m.setStart(l,0),m.setEnd(l,0);try{m.setStart(l,1),h=!0,e.setStart=function(a,c){this.nativeRange.setStart(a,c),b(this)},e.setEnd=function(a,c){this.nativeRange.setEnd(a,c),b(this)},j=function(a){return function(c){this.nativeRange[a](c),b(this)}}}catch(n){h=!1,e.setStart=function(a,c){try{this.nativeRange.setStart(a,c)}catch(d){this.nativeRange.setEnd(a,c),this.nativeRange.setStart(a,c)}b(this)},e.setEnd=function(a,c){try{this.nativeRange.setEnd(a,c)}catch(d){this.nativeRange.setStart(a,c),this.nativeRange.setEnd(a,c)}b(this)},j=function(a,c){return function(d){try{this.nativeRange[a](d)}catch(e){this.nativeRange[c](d),this.nativeRange[a](d)}b(this)}}}e.setStartBefore=j("setStartBefore","setEndBefore"),e.setStartAfter=j("setStartAfter","setEndAfter"),e.setEndBefore=j("setEndBefore","setStartBefore"),e.setEndAfter=j("setEndAfter","setStartAfter"),m.selectNodeContents(l),e.selectNodeContents=m.startContainer==l&&m.endContainer==l&&0==m.startOffset&&m.endOffset==l.length?function(a){this.nativeRange.selectNodeContents(a),b(this)}:function(a){this.setStart(a,0),this.setEnd(a,i.getEndOffset(a))},m.selectNodeContents(l),m.setEnd(l,3);var o=document.createRange();o.selectNodeContents(l),o.setEnd(l,4),o.setStart(l,2),e.compareBoundaryPoints=-1==m.compareBoundaryPoints(m.START_TO_END,o)&1==m.compareBoundaryPoints(m.END_TO_START,o)?function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)},a.util.isHostMethod(m,"createContextualFragment")&&(e.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),g.getBody(document).removeChild(l),m.detach(),o.detach()}(),a.createNativeRange=function(a){return a=a||document,a.createRange()};a.features.implementsTextRange&&(f.rangeToTextRange=function(a){if(a.collapsed){var b=e(new h(a.startContainer,a.startOffset),!0);return b}var c=e(new h(a.startContainer,a.startOffset),!0),d=e(new h(a.endContainer,a.endOffset),!1),f=g.getDocument(a.startContainer).body.createTextRange();return f.setEndPoint("StartToStart",c),f.setEndPoint("EndToEnd",d),f}),f.prototype.getName=function(){return"WrappedRange"},a.WrappedRange=f,a.createRange=function(b){return b=b||document,new f(a.createNativeRange(b))},a.createRangyRange=function(a){return a=a||document,new i(a)},a.createIframeRange=function(b){return a.createRange(g.getIframeDocument(b))},a.createIframeRangyRange=function(b){return a.createRangyRange(g.getIframeDocument(b))},a.addCreateMissingNativeApiListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(this)}),c=b=null})}),rangy.createModule("WrappedSelection",function(a,b){function c(a){return(a||window).getSelection()}function d(a){return(a||window).document.selection}function e(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function f(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function g(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function h(b){var c;return b instanceof y?(c=b._selectionNativeRange,c||(c=a.createNativeRange(w.getDocument(b.startContainer)),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset),b._selectionNativeRange=c,b.attachListener("detach",function(){this._selectionNativeRange=null}))):b instanceof z?c=b.nativeRange:a.features.implementsDomRange&&b instanceof w.getWindow(b.startContainer).Range&&(c=b),c}function i(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!w.isAncestorOf(a[0],a[b]))return!1;return!0}function j(a){var b=a.getNodes();if(!i(b))throw new Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return b[0]}function k(a){return!!a&&"undefined"!=typeof a.text}function l(a,b){var c=new z(b);a._ranges=[c],e(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function m(b){if(b._ranges.length=0,"None"==b.docSelection.type)g(b);else{var c=b.docSelection.createRange();if(k(c))l(b,c);else{b.rangeCount=c.length;for(var d,f=w.getDocument(c.item(0)),h=0;h<b.rangeCount;++h)d=a.createRange(f),d.selectNode(c.item(h)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,e(b,b._ranges[b.rangeCount-1],!1)}}}function n(a,b){for(var c=a.docSelection.createRange(),d=j(b),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=0,h=c.length;h>g;++g)f.add(c.item(g));try{f.add(d)}catch(i){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}f.select(),m(a)}function o(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function p(a,b){for(var c,d=w.getDocument(b[0].startContainer),e=w.getBody(d).createControlRange(),f=0;rangeCount>f;++f){c=j(b[f]);try{e.add(c)}catch(g){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}e.select(),m(a)}function q(a,b){if(a.anchorNode&&w.getDocument(a.anchorNode)!==w.getDocument(b))throw new A("WRONG_DOCUMENT_ERR")}function r(a){var b=[],c=new B(a.anchorNode,a.anchorOffset),d=new B(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=y.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.requireModules(["DomUtil","DomRange","WrappedRange"]),a.config.checkSelectionRanges=!0;var s,t,u="boolean",v="_rangySelection",w=a.dom,x=a.util,y=a.DomRange,z=a.WrappedRange,A=a.DOMException,B=w.DomPosition,C="Control",D=a.util.isHostMethod(window,"getSelection"),E=a.util.isHostObject(document,"selection"),F=E&&(!D||a.config.preferTextRange);F?(s=d,a.isSelectionValid=function(a){var b=(a||window).document,c=b.selection;return"None"!=c.type||w.getDocument(c.createRange().parentElement())==b}):D?(s=c,a.isSelectionValid=function(){return!0}):b.fail("Neither document.selection or window.getSelection() detected."),a.getNativeSelection=s;var G=s(),H=a.createNativeRange(document),I=w.getBody(document),J=x.areHostObjects(G,["anchorNode","focusNode"]&&x.areHostProperties(G,["anchorOffset","focusOffset"]));a.features.selectionHasAnchorAndFocus=J;var K=x.isHostMethod(G,"extend");a.features.selectionHasExtend=K;var L="number"==typeof G.rangeCount;a.features.selectionHasRangeCount=L;var M=!1,N=!0;x.areHostMethods(G,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof G.rangeCount&&a.features.implementsDomRange&&!function(){var a=document.createElement("iframe");I.appendChild(a);var b=w.getIframeDocument(a);b.open(),b.write("<html><head></head><body>12</body></html>"),b.close();var c=w.getIframeWindow(a).getSelection(),d=b.documentElement,e=d.lastChild,f=e.firstChild,g=b.createRange();g.setStart(f,1),g.collapse(!0),c.addRange(g),N=1==c.rangeCount,c.removeAllRanges();var h=g.cloneRange();g.setStart(f,0),h.setEnd(f,2),c.addRange(g),c.addRange(h),M=2==c.rangeCount,g.detach(),h.detach(),I.removeChild(a)}(),a.features.selectionSupportsMultipleRanges=M,a.features.collapsedNonEditableSelectionsSupported=N;var O,P=!1;I&&x.isHostMethod(I,"createControlRange")&&(O=I.createControlRange(),x.areHostProperties(O,["item","add"])&&(P=!0)),a.features.implementsControlRange=P,t=J?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var Q;x.isHostMethod(G,"getRangeAt")?Q=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:J&&(Q=function(b){var c=w.getDocument(b.anchorNode),d=a.createRange(c);return d.setStart(b.anchorNode,b.anchorOffset),d.setEnd(b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&(d.setStart(b.focusNode,b.focusOffset),d.setEnd(b.anchorNode,b.anchorOffset)),d}),a.getSelection=function(a){a=a||window;var b=a[v],c=s(a),e=E?d(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh(a)):(b=new o(c,e,a),a[v]=b),b},a.getIframeSelection=function(b){return a.getSelection(w.getIframeWindow(b))};var R=o.prototype;if(!F&&J&&x.areHostMethods(G,["removeAllRanges","addRange"])){R.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),g(this)};var S=function(b,c){var d=y.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.nativeSelection.addRange(h(e)),b.nativeSelection.extend(c.startContainer,c.startOffset),b.refresh()};R.addRange=L?function(b,c){if(P&&E&&this.docSelection.type==C)n(this,b);else if(c&&K)S(this,b);else{var d;if(M?d=this.rangeCount:(this.removeAllRanges(),d=0),this.nativeSelection.addRange(h(b)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==d+1){if(a.config.checkSelectionRanges){var f=Q(this.nativeSelection,this.rangeCount-1);f&&!y.rangesEqual(f,b)&&(b=new z(f))}this._ranges[this.rangeCount-1]=b,e(this,b,V(this.nativeSelection)),this.isCollapsed=t(this)}else this.refresh()}}:function(a,b){b&&K?S(this,a):(this.nativeSelection.addRange(h(a)),this.refresh())},R.setRanges=function(a){if(P&&a.length>1)p(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(x.isHostMethod(G,"empty")&&x.isHostMethod(H,"select")&&P&&F))return b.fail("No means of selecting a Range or TextRange was found"),!1;R.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=w.getDocument(this.anchorNode);else if(this.docSelection.type==C){var b=this.docSelection.createRange();b.length&&(a=w.getDocument(b.item(0)).body.createTextRange())}if(a){var c=a.body.createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}g(this)},R.addRange=function(a){this.docSelection.type==C?n(this,a):(z.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,e(this,a,!1))},R.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?p(this,a):b&&this.addRange(a[0])}}R.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new A("INDEX_SIZE_ERR");return this._ranges[a]};var T;if(F)T=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=w.getBody(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==C?m(b):k(c)?l(b,c):g(b)};else if(x.isHostMethod(G,"getRangeAt")&&"number"==typeof G.rangeCount)T=function(b){if(P&&E&&b.docSelection.type==C)m(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));e(b,b._ranges[b.rangeCount-1],V(b.nativeSelection)),b.isCollapsed=t(b)}else g(b)};else{if(!J||typeof G.isCollapsed!=u||typeof H.collapsed!=u||!a.features.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;T=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=Q(c,0),a._ranges=[b],a.rangeCount=1,f(a),a.isCollapsed=t(a)):g(a)}}R.refresh=function(a){var b=a?this._ranges.slice(0):null;if(T(this),a){var c=b.length;if(c!=this._ranges.length)return!1;for(;c--;)if(!y.rangesEqual(b[c],this._ranges[c]))return!1;return!0}};var U=function(a,b){var c=a.getAllRanges(),d=!1;a.removeAllRanges();for(var e=0,f=c.length;f>e;++e)d||b!==c[e]?a.addRange(c[e]):d=!0;a.rangeCount||g(a)};R.removeRange=P?function(a){if(this.docSelection.type==C){for(var b,c=this.docSelection.createRange(),d=j(a),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),m(this)}else U(this,a)}:function(a){U(this,a)};var V;!F&&J&&a.features.implementsDomRange?(V=function(a){var b=!1;return a.anchorNode&&(b=1==w.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b},R.isBackwards=function(){return V(this)}):V=R.isBackwards=function(){return!1},R.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},R.collapse=function(b,c){q(this,b);var d=a.createRange(w.getDocument(b));d.collapseToPoint(b,c),this.removeAllRanges(),this.addRange(d),this.isCollapsed=!0},R.collapseToStart=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},R.collapseToEnd=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},R.selectAllChildren=function(b){q(this,b);var c=a.createRange(w.getDocument(b));c.selectNodeContents(b),this.removeAllRanges(),this.addRange(c)},R.deleteFromDocument=function(){if(P&&E&&this.docSelection.type==C){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),a.parentNode.removeChild(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}},R.getAllRanges=function(){return this._ranges.slice(0)},R.setSingleRange=function(a){this.setRanges([a])},R.containsNode=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1},R.toHtml=function(){var a="";if(this.rangeCount){for(var b=y.getRangeDocument(this._ranges[0]).createElement("div"),c=0,d=this._ranges.length;d>c;++c)b.appendChild(this._ranges[c].cloneContents());a=b.innerHTML}return a},R.getName=function(){return"WrappedSelection"},R.inspect=function(){return r(this)},R.detach=function(){this.win[v]=null,this.win=this.anchorNode=this.focusNode=null},o.inspect=r,a.Selection=o,a.selectionPrototype=R,a.addCreateMissingNativeApiListener(function(b){"undefined"==typeof b.getSelection&&(b.getSelection=function(){return a.getSelection(this)}),b=null})});var Base=function(){};Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()
},c.call(f,b),"function"==typeof f.init&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;Base._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function a(a){return+(/ipad|iphone|ipod/.test(a)&&a.match(/ os (\d+).+? like mac os x/)||[,0])[1]}function b(a){return+(a.match(/android (\d+)/)||[,0])[1]}var c=navigator.userAgent,d=document.createElement("div"),e=-1!==c.indexOf("MSIE")&&-1===c.indexOf("Opera"),f=-1!==c.indexOf("Gecko")&&-1===c.indexOf("KHTML"),g=-1!==c.indexOf("AppleWebKit/"),h=-1!==c.indexOf("Chrome/"),i=-1!==c.indexOf("Opera/");return{USER_AGENT:c,supported:function(){var c=this.USER_AGENT.toLowerCase(),e="contentEditable"in d,f=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,g=document.querySelector&&document.querySelectorAll,h=this.isIos()&&a(c)<5||this.isAndroid()&&b(c)<4||-1!==c.indexOf("opera mobi")||-1!==c.indexOf("hpwos/");return e&&f&&g&&!h},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return e},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return e},hasCurrentStyleProperty:function(){return"currentStyle"in d},hasHistoryIssue:function(){return f},insertsLineBreaksOnReturn:function(){return f},supportsPlaceholderAttributeOn:function(a){return"placeholder"in a},supportsEvent:function(a){return"on"+a in d||function(){return d.setAttribute("on"+a,"return;"),"function"==typeof d["on"+a]}()},supportsEventsInIframeCorrectly:function(){return!i},supportsHTML5Tags:function(a){var b=a.createElement("div"),c="<article>foo</article>";return b.innerHTML=c,b.innerHTML.toLowerCase()===c},supportsCommand:function(){var a={formatBlock:e,insertUnorderedList:e||g,insertOrderedList:e||g},b={insertHTML:f};return function(c,d){var e=a[d];if(!e){try{return c.queryCommandSupported(d)}catch(f){}try{return c.queryCommandEnabled(d)}catch(g){return!!b[d]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return e},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return f||i||g},supportsGetAttributeCorrectly:function(){var a=document.createElement("td");return"1"!=a.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return f||e||i},autoScrollsToCaret:function(){return!g},autoClosesUnclosedTags:function(){var a,b,c=d.cloneNode(!1);return c.innerHTML="<p><div></div>",b=c.innerHTML.toLowerCase(),a="<p></p><div></div>"===b||"<p><div></div></p>"===b,this.autoClosesUnclosedTags=function(){return a},a},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return i},supportsSpeechApiOn:function(a){var b=c.match(/Chrome\/(\d+)/)||[,0];return b[1]>=11&&("onwebkitspeechchange"in a||"speech"in a)},crashesWhenDefineProperty:function(a){return e&&("XMLHttpRequest"===a||"XDomainRequest"===a)},doesAsyncFocus:function(){return e},hasProblemsSettingCaretAfterImg:function(){return e},hasUndoInContextMenu:function(){return f||h||i},hasInsertNodeIssue:function(){return i},hasIframeFocusIssue:function(){return e}}}(),wysihtml5.lang.array=function(a){return{contains:function(b){if(a.indexOf)return-1!==a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1},without:function(b){b=wysihtml5.lang.array(b);for(var c=[],d=0,e=a.length;e>d;d++)b.contains(a[d])||c.push(a[d]);return c},get:function(){for(var b=0,c=a.length,d=[];c>b;b++)d.push(a[b]);return d}}},wysihtml5.lang.Dispatcher=Base.extend({on:function(a,b){return this.events=this.events||{},this.events[a]=this.events[a]||[],this.events[a].push(b),this},off:function(a,b){this.events=this.events||{};var c,d,e=0;if(a){for(c=this.events[a]||[],d=[];e<c.length;e++)c[e]!==b&&b&&d.push(c[e]);this.events[a]=d}else this.events={};return this},fire:function(a,b){this.events=this.events||{};for(var c=this.events[a]||[],d=0;d<c.length;d++)c[d].call(this,b);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),wysihtml5.lang.object=function(a){return{merge:function(b){for(var c in b)a[c]=b[c];return this},get:function(){return a},clone:function(){var b,c={};for(b in a)c[b]=a[b];return c},isArray:function(){return"[object Array]"===Object.prototype.toString.call(a)}}},function(){var a=/^\s+/,b=/\s+$/;wysihtml5.lang.string=function(c){return c=String(c),{trim:function(){return c.replace(a,"").replace(b,"")},interpolate:function(a){for(var b in a)c=this.replace("#{"+b+"}").by(a[b]);return c},replace:function(a){return{by:function(b){return c.split(a).join(b)}}}}}}(),function(a){function b(a){return f(a)?a:(a===a.ownerDocument.documentElement&&(a=a.ownerDocument.body),g(a))}function c(a){return a.replace(i,function(a,b){var c=(b.match(j)||[])[1]||"",d=l[c];b=b.replace(j,""),b.split(d).length>b.split(c).length&&(b+=c,c="");var e=b,f=b;return b.length>k&&(f=f.substr(0,k)+"..."),"www."===e.substr(0,4)&&(e="http://"+e),'<a href="'+e+'">'+f+"</a>"+c})}function d(a){var b=a._wysihtml5_tempElement;return b||(b=a._wysihtml5_tempElement=a.createElement("div")),b}function e(a){var b=a.parentNode,e=d(b.ownerDocument);for(e.innerHTML="<span></span>"+c(a.data),e.removeChild(e.firstChild);e.firstChild;)b.insertBefore(e.firstChild,a);b.removeChild(a)}function f(a){for(var b;a.parentNode;){if(a=a.parentNode,b=a.nodeName,h.contains(b))return!0;if("body"===b)return!1}return!1}function g(b){if(!h.contains(b.nodeName)){if(b.nodeType===a.TEXT_NODE&&b.data.match(i))return void e(b);for(var c=a.lang.array(b.childNodes).get(),d=c.length,f=0;d>f;f++)g(c[f]);return b}}var h=a.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),i=/((https?:\/\/|www\.)[^\s<]{3,})/gi,j=/([^\w\/\-](,?))$/i,k=100,l={")":"(","]":"[","}":"{"};a.dom.autoLink=b,a.dom.autoLink.URL_REG_EXP=i}(wysihtml5),function(a){var b=a.dom;b.addClass=function(a,c){var d=a.classList;return d?d.add(c):void(b.hasClass(a,c)||(a.className+=" "+c))},b.removeClass=function(a,b){var c=a.classList;return c?c.remove(b):void(a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},b.hasClass=function(a,b){var c=a.classList;if(c)return c.contains(b);var d=a.className;return d.length>0&&(d==b||new RegExp("(^|\\s)"+b+"(\\s|$)").test(d))}}(wysihtml5),wysihtml5.dom.contains=function(){var a=document.documentElement;return a.contains?function(a,b){return b.nodeType!==wysihtml5.ELEMENT_NODE&&(b=b.parentNode),a!==b&&a.contains(b)}:a.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:void 0}(),wysihtml5.dom.convertToList=function(){function a(a,b){var c=a.createElement("li");return b.appendChild(c),c}function b(a,b){return a.createElement(b)}function c(c,d){if("UL"===c.nodeName||"OL"===c.nodeName||"MENU"===c.nodeName)return c;var e,f,g,h,i,j,k,l,m,n=c.ownerDocument,o=b(n,d),p=c.querySelectorAll("br"),q=p.length;for(m=0;q>m;m++)for(h=p[m];(i=h.parentNode)&&i!==c&&i.lastChild===h;){if("block"===wysihtml5.dom.getStyle("display").from(i)){i.removeChild(h);break}wysihtml5.dom.insert(h).after(h.parentNode)}for(e=wysihtml5.lang.array(c.childNodes).get(),f=e.length,m=0;f>m;m++)l=l||a(n,o),g=e[m],j="block"===wysihtml5.dom.getStyle("display").from(g),k="BR"===g.nodeName,j?(l=l.firstChild?a(n,o):l,l.appendChild(g),l=null):k?l=l.firstChild?null:l:l.appendChild(g);return 0===e.length&&a(n,o),c.parentNode.replaceChild(o,c),o}return c}(),wysihtml5.dom.copyAttributes=function(a){return{from:function(b){return{to:function(c){for(var d,e=0,f=a.length;f>e;e++)d=a[e],"undefined"!=typeof b[d]&&""!==b[d]&&(c[d]=b[d]);return{andTo:arguments.callee}}}}}},function(a){var b=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],c=function(b){return d(b)?parseInt(a.getStyle("width").from(b),10)<b.offsetWidth:!1},d=function(c){for(var d=0,e=b.length;e>d;d++)if("border-box"===a.getStyle(b[d]).from(c))return b[d]};a.copyStyles=function(d){return{from:function(e){c(e)&&(d=wysihtml5.lang.array(d).without(b));for(var f,g="",h=d.length,i=0;h>i;i++)f=d[i],g+=f+":"+a.getStyle(f).from(e)+";";return{to:function(b){return a.setStyles(g).on(b),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(a){a.dom.delegate=function(b,c,d,e){return a.dom.observe(b,d,function(d){for(var f=d.target,g=a.lang.array(b.querySelectorAll(c));f&&f!==b;){if(g.contains(f)){e.call(f,d);break}f=f.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var a=function(a,b){var c=b.createElement("div");c.style.display="none",b.body.appendChild(c);try{c.innerHTML=a}catch(d){}return b.body.removeChild(c),c},b=function(a){if(!a._wysihtml5_supportsHTML5Tags){for(var b=0,d=c.length;d>b;b++)a.createElement(c[b]);a._wysihtml5_supportsHTML5Tags=!0}},c=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(c,d){d=d||document;var e;return"object"==typeof c&&c.nodeType?(e=d.createElement("div"),e.appendChild(c)):wysihtml5.browser.supportsHTML5Tags(d)?(e=d.createElement("div"),e.innerHTML=c):(b(d),e=a(c,d)),e}}(),wysihtml5.dom.getParentElement=function(){function a(a,b){return b&&b.length?"string"==typeof b?a===b:wysihtml5.lang.array(b).contains(a):!0}function b(a){return a.nodeType===wysihtml5.ELEMENT_NODE}function c(a,b,c){var d=(a.className||"").match(c)||[];return b?d[d.length-1]===b:!!d.length}function d(b,c,d){for(;d--&&b&&"BODY"!==b.nodeName;){if(a(b.nodeName,c))return b;b=b.parentNode}return null}function e(d,e,f,g,h){for(;h--&&d&&"BODY"!==d.nodeName;){if(b(d)&&a(d.nodeName,e)&&c(d,f,g))return d;d=d.parentNode}return null}return function(a,b,c){return c=c||50,b.className||b.classRegExp?e(a,b.nodeName,b.className,b.classRegExp,c):d(a,b.nodeName,c)}}(),wysihtml5.dom.getStyle=function(){function a(a){return a.replace(c,function(a){return a.charAt(1).toUpperCase()})}var b={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},c=/\-[a-z]/g;return function(c){return{from:function(d){if(d.nodeType===wysihtml5.ELEMENT_NODE){var e=d.ownerDocument,f=b[c]||a(c),g=d.style,h=d.currentStyle,i=g[f];if(i)return i;if(h)try{return h[f]}catch(j){}var k,l,m=e.defaultView||e.parentWindow,n=("height"===c||"width"===c)&&"TEXTAREA"===d.nodeName;return m.getComputedStyle?(n&&(k=g.overflow,g.overflow="hidden"),l=m.getComputedStyle(d,null).getPropertyValue(c),n&&(g.overflow=k||""),l):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function a(a){return a._wysihtml5_identifier||(a._wysihtml5_identifier=c++)}var b={},c=1;return function(c,d){var e=a(c)+":"+d,f=b[e];return f||(f=b[e]=c.getElementsByTagName(d)),f.length>0}}(),function(a){function b(a){return a._wysihtml5_identifier||(a._wysihtml5_identifier=d++)}var c={},d=1;a.dom.hasElementWithClassName=function(d,e){if(!a.browser.supportsNativeGetElementsByClassName())return!!d.querySelector("."+e);var f=b(d)+":"+e,g=c[f];return g||(g=c[f]=d.getElementsByClassName(e)),g.length>0}}(wysihtml5),wysihtml5.dom.insert=function(a){return{after:function(b){b.parentNode.insertBefore(a,b.nextSibling)},before:function(b){b.parentNode.insertBefore(a,b)},into:function(b){b.appendChild(a)}}},wysihtml5.dom.insertCSS=function(a){return a=a.join("\n"),{into:function(b){var c=b.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(b.createTextNode(a));var d=b.querySelector("head link");if(d)return void d.parentNode.insertBefore(c,d);var e=b.querySelector("head");e&&e.appendChild(c)}}},wysihtml5.dom.observe=function(a,b,c){b="string"==typeof b?[b]:b;for(var d,e,f=0,g=b.length;g>f;f++)e=b[f],a.addEventListener?a.addEventListener(e,c,!1):(d=function(b){"target"in b||(b.target=b.srcElement),b.preventDefault=b.preventDefault||function(){this.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){this.cancelBubble=!0},c.call(a,b)},a.attachEvent("on"+e,d));return{stop:function(){for(var e,f=0,g=b.length;g>f;f++)e=b[f],a.removeEventListener?a.removeEventListener(e,c,!1):a.detachEvent("on"+e,d)}}},wysihtml5.dom.parse=function(){function a(a,c,d,e){wysihtml5.lang.object(l).merge(k).merge(c).get(),d=d||a.ownerDocument||document;var f,g,h,i=d.createDocumentFragment(),j="string"==typeof a;for(f=j?wysihtml5.dom.getAsDom(a,d):a;f.firstChild;)h=f.firstChild,f.removeChild(h),g=b(h,e),g&&i.appendChild(g);return f.innerHTML="",f.appendChild(i),j?wysihtml5.quirks.getCorrectInnerHTML(f):f}function b(a,c){var d,e,f=a.nodeType,g=a.childNodes,j=g.length,k=h[f],l=0;if(d=k&&k(a),!d)return null;for(l=0;j>l;l++)e=b(g[l],c),e&&d.appendChild(e);return c&&d.childNodes.length<=1&&d.nodeName.toLowerCase()===i&&!d.attributes.length?d.firstChild:d}function c(a){var b,c,e=l.tags,f=a.nodeName.toLowerCase(),g=a.scopeName;if(a._wysihtml5)return null;if(a._wysihtml5=1,"wysihtml5-temp"===a.className)return null;if(g&&"HTML"!=g&&(f=g+":"+f),"outerHTML"in a&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==a.nodeName||"</p>"===a.outerHTML.slice(-4).toLowerCase()||(f="div")),f in e){if(b=e[f],!b||b.remove)return null;b="string"==typeof b?{rename_tag:b}:b}else{if(!a.firstChild)return null;b={rename_tag:i}}return c=a.ownerDocument.createElement(b.rename_tag||f),d(a,c,b),a=null,c}function d(a,b,c){var d,f,g,h,i,k,m,p={},q=c.set_class,r=c.add_class,s=c.set_attributes,t=c.check_attributes,u=l.classes,v=0,w=[],x=[],y=[],z=[];if(s&&(p=wysihtml5.lang.object(s).clone()),t)for(i in t)m=n[t[i]],m&&(k=m(e(a,i)),"string"==typeof k&&(p[i]=k));if(q&&w.push(q),r)for(i in r)m=o[r[i]],m&&(h=m(e(a,i)),"string"==typeof h&&w.push(h));for(u["_wysihtml5-temp-placeholder"]=1,z=a.getAttribute("class"),z&&(w=w.concat(z.split(j))),d=w.length;d>v;v++)g=w[v],u[g]&&x.push(g);for(f=x.length;f--;)g=x[f],wysihtml5.lang.array(y).contains(g)||y.unshift(g);y.length&&(p["class"]=y.join(" "));for(i in p)try{b.setAttribute(i,p[i])}catch(A){}p.src&&("undefined"!=typeof p.width&&b.setAttribute("width",p.width),"undefined"!=typeof p.height&&b.setAttribute("height",p.height))}function e(a,b){b=b.toLowerCase();var c=a.nodeName;if("IMG"==c&&"src"==b&&f(a)===!0)return a.src;if(m&&"outerHTML"in a){var d=a.outerHTML.toLowerCase(),e=-1!=d.indexOf(" "+b+"=");return e?a.getAttribute(b):null}return a.getAttribute(b)}function f(a){try{return a.complete&&!a.mozMatchesSelector(":-moz-broken")}catch(b){if(a.complete&&"complete"===a.readyState)return!0}}function g(a){return a.ownerDocument.createTextNode(a.data)}var h={1:c,3:g},i="span",j=/\s+/,k={tags:{},classes:{}},l={},m=!wysihtml5.browser.supportsGetAttributeCorrectly(),n={url:function(){var a=/^https?:\/\//i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),src:function(){var a=/^(\/|https?:\/\/)/i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),href:function(){var a=/^(\/|https?:\/\/|mailto:)/i;return function(b){return b&&b.match(a)?b.replace(a,function(a){return a.toLowerCase()}):null}}(),alt:function(){var a=/[^ a-z0-9_\-]/gi;return function(b){return b?b.replace(a,""):""}}(),numbers:function(){var a=/\D/g;return function(b){return b=(b||"").replace(a,""),b||null}}()},o={align_img:function(){var a={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(b){return a[String(b).toLowerCase()]}}(),align_text:function(){var a={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(b){return a[String(b).toLowerCase()]}}(),clear_br:function(){var a={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(b){return a[String(b).toLowerCase()]}}(),size_font:function(){var a={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(b){return a[String(b).charAt(0)]}}()};return a}(),wysihtml5.dom.removeEmptyTextNodes=function(a){for(var b,c=wysihtml5.lang.array(a.childNodes).get(),d=c.length,e=0;d>e;e++)b=c[e],b.nodeType===wysihtml5.TEXT_NODE&&""===b.data&&b.parentNode.removeChild(b)},wysihtml5.dom.renameElement=function(a,b){for(var c,d=a.ownerDocument.createElement(b);c=a.firstChild;)d.appendChild(c);return wysihtml5.dom.copyAttributes(["align","className"]).from(a).to(d),a.parentNode.replaceChild(d,a),d},wysihtml5.dom.replaceWithChildNodes=function(a){if(a.parentNode){if(!a.firstChild)return void a.parentNode.removeChild(a);for(var b=a.ownerDocument.createDocumentFragment();a.firstChild;)b.appendChild(a.firstChild);a.parentNode.replaceChild(b,a),a=b=null}},function(a){function b(b){return"block"===a.getStyle("display").from(b)}function c(a){return"BR"===a.nodeName}function d(a){var b=a.ownerDocument.createElement("br");a.appendChild(b)}function e(a,e){if(a.nodeName.match(/^(MENU|UL|OL)$/)){var f,g,h,i,j,k,l=a.ownerDocument,m=l.createDocumentFragment(),n=a.previousElementSibling||a.previousSibling;if(e)for(n&&!b(n)&&d(m);k=a.firstElementChild||a.firstChild;){for(g=k.lastChild;f=k.firstChild;)h=f===g,i=h&&!b(f)&&!c(f),m.appendChild(f),i&&d(m);k.parentNode.removeChild(k)}else for(;k=a.firstElementChild||a.firstChild;){if(k.querySelector&&k.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;f=k.firstChild;)m.appendChild(f);else{for(j=l.createElement("p");f=k.firstChild;)j.appendChild(f);m.appendChild(j)}k.parentNode.removeChild(k)}a.parentNode.replaceChild(m,a)}}a.resolveList=e}(wysihtml5.dom),function(a){var b=document,c=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],d=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],e=["referrer","write","open","close"];a.dom.Sandbox=Base.extend({constructor:function(b,c){this.callback=b||a.EMPTY_FUNCTION,this.config=a.lang.object({}).merge(c).get(),this.iframe=this._createIframe()},insertInto:function(a){"string"==typeof a&&(a=b.getElementById(a)),a.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var a=this.getIframe();a.parentNode.removeChild(a)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var c=this,d=b.createElement("iframe");return d.className="wysihtml5-sandbox",a.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(d),a.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(d.src="javascript:'<html></html>'"),d.onload=function(){d.onreadystatechange=d.onload=null,c._onLoadIframe(d)},d.onreadystatechange=function(){/loaded|complete/.test(d.readyState)&&(d.onreadystatechange=d.onload=null,c._onLoadIframe(d))},d},_onLoadIframe:function(f){if(a.dom.contains(b.documentElement,f)){var g=this,h=f.contentWindow,i=f.contentWindow.document,j=b.characterSet||b.charset||"utf-8",k=this._getHtml({charset:j,stylesheets:this.config.stylesheets});if(i.open("text/html","replace"),i.write(k),i.close(),this.getWindow=function(){return f.contentWindow},this.getDocument=function(){return f.contentWindow.document},h.onerror=function(a,b,c){throw new Error("wysihtml5.Sandbox: "+a,b,c)},!a.browser.supportsSandboxedIframes()){var l,m;for(l=0,m=c.length;m>l;l++)this._unset(h,c[l]);for(l=0,m=d.length;m>l;l++)this._unset(h,d[l],a.EMPTY_FUNCTION);for(l=0,m=e.length;m>l;l++)this._unset(i,e[l]);this._unset(i,"cookie","",!0)}this.loaded=!0,setTimeout(function(){g.callback(g)},0)}},_getHtml:function(b){var c,d=b.stylesheets,e="",f=0;if(d="string"==typeof d?[d]:d)for(c=d.length;c>f;f++)e+='<link rel="stylesheet" href="'+d[f]+'">';return b.stylesheets=e,a.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(b)},_unset:function(b,c,d,e){try{b[c]=d}catch(f){}try{b.__defineGetter__(c,function(){return d})}catch(f){}if(e)try{b.__defineSetter__(c,function(){})}catch(f){}if(!a.browser.crashesWhenDefineProperty(c))try{var g={get:function(){return d}};e&&(g.set=function(){}),Object.defineProperty(b,c,g)}catch(f){}}})}(wysihtml5),function(){var a={className:"class"};wysihtml5.dom.setAttributes=function(b){return{on:function(c){for(var d in b)c.setAttribute(a[d]||d,b[d])}}}}(),wysihtml5.dom.setStyles=function(a){return{on:function(b){var c=b.style;if("string"==typeof a)return void(c.cssText+=";"+a);for(var d in a)"float"===d?(c.cssFloat=a[d],c.styleFloat=a[d]):c[d]=a[d]}}},function(a){a.simulatePlaceholder=function(b,c,d){var e="placeholder",f=function(){c.hasPlaceholderSet()&&c.clear(),c.placeholderSet=!1,a.removeClass(c.element,e)},g=function(){c.isEmpty()&&(c.placeholderSet=!0,c.setValue(d),a.addClass(c.element,e))};b.on("set_placeholder",g).on("unset_placeholder",f).on("focus:composer",f).on("paste:composer",f).on("blur:composer",g),g()}}(wysihtml5.dom),function(a){var b=document.documentElement;"textContent"in b?(a.setTextContent=function(a,b){a.textContent=b},a.getTextContent=function(a){return a.textContent}):"innerText"in b?(a.setTextContent=function(a,b){a.innerText=b},a.getTextContent=function(a){return a.innerText}):(a.setTextContent=function(a,b){a.nodeValue=b},a.getTextContent=function(a){return a.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function a(a,c,d){c=c||b,d=d||a.ownerDocument||document;var e,f,g,h,i,j="string"==typeof a,k=0;e=j?wysihtml5.dom.getAsDom(a,d):a;for(i in c)for(g=e.querySelectorAll(i),f=c[i],h=g.length;h>k;k++)f(g[k]);return g=a=c=null,j?e.innerHTML:e}var b={"a u":wysihtml5.dom.replaceWithChildNodes};return a}(),wysihtml5.quirks.ensureProperClearing=function(){var a=function(){var a=this;setTimeout(function(){var b=a.innerHTML.toLowerCase();("<p>&nbsp;</p>"==b||"<p>&nbsp;</p><p>&nbsp;</p>"==b)&&(a.innerHTML="")},0)};return function(b){wysihtml5.dom.observe(b.element,["cut","keydown"],a)}}(),function(a){var b="%7E";a.quirks.getCorrectInnerHTML=function(c){var d=c.innerHTML;if(-1===d.indexOf(b))return d;var e,f,g,h,i=c.querySelectorAll("[href*='~'], [src*='~']");for(h=0,g=i.length;g>h;h++)e=i[h].href||i[h].src,f=a.lang.string(e).replace("~").by(b),d=a.lang.string(d).replace(f).by(e);return d}}(wysihtml5),function(a){var b="wysihtml5-quirks-redraw";a.quirks.redraw=function(c){a.dom.addClass(c,b),a.dom.removeClass(c,b);try{var d=c.ownerDocument;d.execCommand("italic",!1,null),d.execCommand("italic",!1,null)}catch(e){}}}(wysihtml5),function(a){function b(a){var b=0;if(a.parentNode)do b+=a.offsetTop||0,a=a.offsetParent;while(a);return b}var c=a.dom;a.Selection=Base.extend({constructor:function(a){window.rangy.init(),this.editor=a,this.composer=a.composer,this.doc=this.composer.doc},getBookmark:function(){var a=this.getRange();return a&&a.cloneRange()},setBookmark:function(a){a&&this.setSelection(a)},setBefore:function(a){var b=rangy.createRange(this.doc);return b.setStartBefore(a),b.setEndBefore(a),this.setSelection(b)},setAfter:function(a){var b=rangy.createRange(this.doc);return b.setStartAfter(a),b.setEndAfter(a),this.setSelection(b)},selectNode:function(b,d){var e=rangy.createRange(this.doc),f=b.nodeType===a.ELEMENT_NODE,g="canHaveHTML"in b?b.canHaveHTML:"IMG"!==b.nodeName,h=f?b.innerHTML:b.data,i=""===h||h===a.INVISIBLE_SPACE,j=c.getStyle("display").from(b),k="block"===j||"list-item"===j;if(i&&f&&g&&!d)try{b.innerHTML=a.INVISIBLE_SPACE}catch(l){}g?e.selectNodeContents(b):e.selectNode(b),g&&i&&f?e.collapse(k):g&&i&&(e.setStartAfter(b),e.setEndAfter(b)),this.setSelection(e)},getSelectedNode:function(a){var b,c;return a&&this.doc.selection&&"Control"===this.doc.selection.type&&(c=this.doc.selection.createRange(),c&&c.length)?c.item(0):(b=this.getSelection(this.doc),b.focusNode===b.anchorNode?b.focusNode:(c=this.getRange(this.doc),c?c.commonAncestorContainer:this.doc.body))},executeAndRestore:function(b,d){var e,f,g,h,i,j=this.doc.body,k=d&&j.scrollTop,l=d&&j.scrollLeft,m="_wysihtml5-temp-placeholder",n='<span class="'+m+'">'+a.INVISIBLE_SPACE+"</span>",o=this.getRange(this.doc);if(!o)return void b(j,j);a.browser.hasInsertNodeIssue()?this.doc.execCommand("insertHTML",!1,n):(h=o.createContextualFragment(n),o.insertNode(h));try{b(o.startContainer,o.endContainer)}catch(p){setTimeout(function(){throw p},0)}e=this.doc.querySelector("."+m),e?(i=rangy.createRange(this.doc),g=e.nextSibling,a.browser.hasInsertNodeIssue()&&g&&"BR"===g.nodeName?(f=this.doc.createTextNode(a.INVISIBLE_SPACE),c.insert(f).after(e),i.setStartBefore(f),i.setEndBefore(f)):(i.selectNode(e),i.deleteContents()),this.setSelection(i)):j.focus(),d&&(j.scrollTop=k,j.scrollLeft=l);try{e.parentNode.removeChild(e)}catch(q){}},executeAndRestoreSimple:function(a){var b,c,d,e,f,g=this.getRange(),h=this.doc.body;if(!g)return void a(h,h);e=g.getNodes([3]),c=e[0]||g.startContainer,d=e[e.length-1]||g.endContainer,f={collapsed:g.collapsed,startContainer:c,startOffset:c===g.startContainer?g.startOffset:0,endContainer:d,endOffset:d===g.endContainer?g.endOffset:d.length};try{a(g.startContainer,g.endContainer)}catch(i){setTimeout(function(){throw i},0)}b=rangy.createRange(this.doc);try{b.setStart(f.startContainer,f.startOffset)}catch(j){}try{b.setEnd(f.endContainer,f.endOffset)}catch(k){}try{this.setSelection(b)}catch(l){}},set:function(a,b){var c=rangy.createRange(this.doc);c.setStart(a,b||0),this.setSelection(c)},insertHTML:function(a){var b=rangy.createRange(this.doc),c=b.createContextualFragment(a),d=c.lastChild;this.insertNode(c),d&&this.setAfter(d)},insertNode:function(a){var b=this.getRange();b&&b.insertNode(a)},surround:function(a){var b=this.getRange();if(b)try{b.surroundContents(a),this.selectNode(a)}catch(c){a.appendChild(b.extractContents()),b.insertNode(a)}},scrollIntoView:function(){var c,d=this.doc,e=5,f=d.documentElement.scrollHeight>d.documentElement.offsetHeight,g=d._wysihtml5ScrollIntoViewElement=d._wysihtml5ScrollIntoViewElement||function(){var b=d.createElement("span");return b.innerHTML=a.INVISIBLE_SPACE,b}();f&&(this.insertNode(g),c=b(g),g.parentNode.removeChild(g),c>=d.body.scrollTop+d.documentElement.offsetHeight-e&&(d.body.scrollTop=c))},selectLine:function(){a.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var a=this.doc.defaultView,b=a.getSelection();b.modify("extend","left","lineboundary"),b.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var a,b,c,d,e,f=this.doc.selection.createRange(),g=f.boundingTop,h=this.doc.body.scrollWidth;if(f.moveToPoint){for(0===g&&(c=this.doc.createElement("span"),this.insertNode(c),g=c.offsetTop,c.parentNode.removeChild(c)),g+=1,d=-10;h>d;d+=2)try{f.moveToPoint(d,g);break}catch(i){}for(a=g,b=this.doc.selection.createRange(),e=h;e>=0;e--)try{b.moveToPoint(e,a);break}catch(j){}f.setEndPoint("EndToEnd",b),f.select()}},getText:function(){var a=this.getSelection();return a?a.toString():""},getNodes:function(a,b){var c=this.getRange();return c?c.getNodes([a],b):[]},getRange:function(){var a=this.getSelection();return a&&a.rangeCount&&a.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(a){var b=this.doc.defaultView||this.doc.parentWindow,c=rangy.getSelection(b);return c.setSingleRange(a)}})}(wysihtml5),function(a,b){function c(a,b,c){if(!a.className)return!1;var d=a.className.match(c)||[];return d[d.length-1]===b}function d(a,b,c){a.className?(e(a,c),a.className+=" "+b):a.className=b}function e(a,b){a.className&&(a.className=a.className.replace(b,""))}function f(a,b){return a.className.replace(n," ")==b.className.replace(n," ")}function g(a){for(var b=a.parentNode;a.firstChild;)b.insertBefore(a.firstChild,a);b.removeChild(a)}function h(a,b){if(a.attributes.length!=b.attributes.length)return!1;for(var c,d,e,f=0,g=a.attributes.length;g>f;++f)if(c=a.attributes[f],e=c.name,"class"!=e){if(d=b.attributes.getNamedItem(e),c.specified!=d.specified)return!1;if(c.specified&&c.nodeValue!==d.nodeValue)return!1}return!0}function i(a,c){return b.dom.isCharacterDataNode(a)?0==c?!!a.previousSibling:c==a.length?!!a.nextSibling:!0:c>0&&c<a.childNodes.length}function j(a,c,d){var e;if(b.dom.isCharacterDataNode(c)&&(0==d?(d=b.dom.getNodeIndex(c),c=c.parentNode):d==c.length?(d=b.dom.getNodeIndex(c)+1,c=c.parentNode):e=b.dom.splitDataNode(c,d)),!e){e=c.cloneNode(!1),e.id&&e.removeAttribute("id");for(var f;f=c.childNodes[d];)e.appendChild(f);b.dom.insertAfter(e,c)}return c==a?e:j(a,e.parentNode,b.dom.getNodeIndex(e))}function k(b){this.isElementMerge=b.nodeType==a.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?b.lastChild:b,this.textNodes=[this.firstTextNode]}function l(a,b,c,d){this.tagNames=a||[m],this.cssClass=b||"",this.similarClassRegExp=c,this.normalize=d,this.applyToAnyTagName=!1}var m="span",n=/\s+/g;k.prototype={doMerge:function(){for(var a,b,c,d=[],e=0,f=this.textNodes.length;f>e;++e)a=this.textNodes[e],b=a.parentNode,d[e]=a.data,e&&(b.removeChild(a),b.hasChildNodes()||b.parentNode.removeChild(b));return this.firstTextNode.data=c=d.join(""),c},getLength:function(){for(var a=this.textNodes.length,b=0;a--;)b+=this.textNodes[a].length;return b},toString:function(){for(var a=[],b=0,c=this.textNodes.length;c>b;++b)a[b]="'"+this.textNodes[b].data+"'";return"[Merge("+a.join(",")+")]"}},l.prototype={getAncestorWithClass:function(d){for(var e;d;){if(e=this.cssClass?c(d,this.cssClass,this.similarClassRegExp):!0,d.nodeType==a.ELEMENT_NODE&&b.dom.arrayContains(this.tagNames,d.tagName.toLowerCase())&&e)return d;d=d.parentNode}return!1},postApply:function(a,b){for(var c,d,e,f=a[0],g=a[a.length-1],h=[],i=f,j=g,l=0,m=g.length,n=0,o=a.length;o>n;++n)d=a[n],e=this.getAdjacentMergeableTextNode(d.parentNode,!1),e?(c||(c=new k(e),h.push(c)),c.textNodes.push(d),d===f&&(i=c.firstTextNode,l=i.length),d===g&&(j=c.firstTextNode,m=c.getLength())):c=null;var p=this.getAdjacentMergeableTextNode(g.parentNode,!0);if(p&&(c||(c=new k(g),h.push(c)),c.textNodes.push(p)),h.length){for(n=0,o=h.length;o>n;++n)h[n].doMerge();b.setStart(i,l),b.setEnd(j,m)}},getAdjacentMergeableTextNode:function(b,c){var d,e=b.nodeType==a.TEXT_NODE,f=e?b.parentNode:b,g=c?"nextSibling":"previousSibling";if(e){if(d=b[g],d&&d.nodeType==a.TEXT_NODE)return d}else if(d=f[g],d&&this.areElementsMergeable(b,d))return d[c?"firstChild":"lastChild"];
return null},areElementsMergeable:function(a,c){return b.dom.arrayContains(this.tagNames,(a.tagName||"").toLowerCase())&&b.dom.arrayContains(this.tagNames,(c.tagName||"").toLowerCase())&&f(a,c)&&h(a,c)},createContainer:function(a){var b=a.createElement(this.tagNames[0]);return this.cssClass&&(b.className=this.cssClass),b},applyToTextNode:function(a){var c=a.parentNode;if(1==c.childNodes.length&&b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase()))this.cssClass&&d(c,this.cssClass,this.similarClassRegExp);else{var e=this.createContainer(b.dom.getDocument(a));a.parentNode.insertBefore(e,a),e.appendChild(a)}},isRemovable:function(c){return b.dom.arrayContains(this.tagNames,c.tagName.toLowerCase())&&a.lang.string(c.className).trim()==this.cssClass},undoToTextNode:function(a,b,c){if(!b.containsNode(c)){var d=b.cloneRange();d.selectNode(c),d.isPointInRange(b.endContainer,b.endOffset)&&i(b.endContainer,b.endOffset)&&(j(c,b.endContainer,b.endOffset),b.setEndAfter(c)),d.isPointInRange(b.startContainer,b.startOffset)&&i(b.startContainer,b.startOffset)&&(c=j(c,b.startContainer,b.startOffset))}this.similarClassRegExp&&e(c,this.similarClassRegExp),this.isRemovable(c)&&g(c)},applyToRange:function(b){var c=b.getNodes([a.TEXT_NODE]);if(!c.length)try{var d=this.createContainer(b.endContainer.ownerDocument);return b.surroundContents(d),void this.selectNode(b,d)}catch(e){}if(b.splitBoundaries(),c=b.getNodes([a.TEXT_NODE]),c.length){for(var f,g=0,h=c.length;h>g;++g)f=c[g],this.getAncestorWithClass(f)||this.applyToTextNode(f);b.setStart(c[0],0),f=c[c.length-1],b.setEnd(f,f.length),this.normalize&&this.postApply(c,b)}},undoToRange:function(b){var c,d,e=b.getNodes([a.TEXT_NODE]);if(e.length)b.splitBoundaries(),e=b.getNodes([a.TEXT_NODE]);else{var f=b.endContainer.ownerDocument,g=f.createTextNode(a.INVISIBLE_SPACE);b.insertNode(g),b.selectNode(g),e=[g]}for(var h=0,i=e.length;i>h;++h)c=e[h],d=this.getAncestorWithClass(c),d&&this.undoToTextNode(c,b,d);1==i?this.selectNode(b,e[0]):(b.setStart(e[0],0),c=e[e.length-1],b.setEnd(c,c.length),this.normalize&&this.postApply(e,b))},selectNode:function(b,c){var d=c.nodeType===a.ELEMENT_NODE,e="canHaveHTML"in c?c.canHaveHTML:!0,f=d?c.innerHTML:c.data,g=""===f||f===a.INVISIBLE_SPACE;if(g&&d&&e)try{c.innerHTML=a.INVISIBLE_SPACE}catch(h){}b.selectNodeContents(c),g&&d?b.collapse(!1):g&&(b.setStartAfter(c),b.setEndAfter(c))},getTextSelectedByRange:function(a,b){var c=b.cloneRange();c.selectNodeContents(a);var d=c.intersection(b),e=d?d.toString():"";return c.detach(),e},isAppliedToRange:function(b){var c,d=[],e=b.getNodes([a.TEXT_NODE]);if(!e.length)return c=this.getAncestorWithClass(b.startContainer),c?[c]:!1;for(var f,g=0,h=e.length;h>g;++g){if(f=this.getTextSelectedByRange(e[g],b),c=this.getAncestorWithClass(e[g]),""!=f&&!c)return!1;d.push(c)}return d},toggleRange:function(a){this.isAppliedToRange(a)?this.undoToRange(a):this.applyToRange(a)}},a.selection.HTMLApplier=l}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(a){this.editor=a,this.composer=a.composer,this.doc=this.composer.doc},support:function(a){return wysihtml5.browser.supportsCommand(this.doc,a)},exec:function(a,b){var c=wysihtml5.commands[a],d=wysihtml5.lang.array(arguments).get(),e=c&&c.exec,f=null;if(this.editor.fire("beforecommand:composer"),e)d.unshift(this.composer),f=e.apply(c,d);else try{f=this.doc.execCommand(a,!1,b)}catch(g){}return this.editor.fire("aftercommand:composer"),f},state:function(a){var b=wysihtml5.commands[a],c=wysihtml5.lang.array(arguments).get(),d=b&&b.state;if(d)return c.unshift(this.composer),d.apply(b,c);try{return this.doc.queryCommandState(a)}catch(e){return!1}}}),wysihtml5.commands.bold={exec:function(a,b){return wysihtml5.commands.formatInline.exec(a,b,"b")},state:function(a,b){return wysihtml5.commands.formatInline.state(a,b,"b")}},function(a){function b(a,b){for(var c,d,e,g=b.length,h=0;g>h;h++)c=b[h],d=f.getParentElement(c,{nodeName:"code"}),e=f.getTextContent(c),e.match(f.autoLink.URL_REG_EXP)&&!d?d=f.renameElement(c,"code"):f.replaceWithChildNodes(c)}function c(b,c){var g,h,i,j,k,l,m,n,o,p=b.doc,q="_wysihtml5-temp-"+ +new Date,r=/non-matching-class/g,s=0;for(a.commands.formatInline.exec(b,d,e,q,r),h=p.querySelectorAll(e+"."+q),g=h.length;g>s;s++){i=h[s],i.removeAttribute("class");for(o in c)i.setAttribute(o,c[o])}l=i,1===g&&(m=f.getTextContent(i),j=!!i.querySelector("*"),k=""===m||m===a.INVISIBLE_SPACE,!j&&k&&(f.setTextContent(i,c.text||i.href),n=p.createTextNode(" "),b.selection.setAfter(i),f.insert(n).after(i),l=n)),b.selection.setAfter(l)}var d,e="A",f=a.dom;a.commands.createLink={exec:function(a,d,e){var f=this.state(a,d);f?a.selection.executeAndRestore(function(){b(a,f)}):(e="object"==typeof e?e:{href:e},c(a,e))},state:function(b,c){return a.commands.formatInline.state(b,c,"A")}}}(wysihtml5),function(a){var b,c=/wysiwyg-font-size-[0-9a-z\-]+/g;a.commands.fontSize={exec:function(b,d,e){return a.commands.formatInline.exec(b,d,"span","wysiwyg-font-size-"+e,c)},state:function(b,d,e){return a.commands.formatInline.state(b,d,"span","wysiwyg-font-size-"+e,c)},value:function(){return b}}}(wysihtml5),function(a){var b=/wysiwyg-color-[0-9a-z]+/g;a.commands.foreColor={exec:function(c,d,e){return a.commands.formatInline.exec(c,d,"span","wysiwyg-color-"+e,b)},state:function(c,d,e){return a.commands.formatInline.state(c,d,"span","wysiwyg-color-"+e,b)}}}(wysihtml5),function(a){function b(a,b,d){a.className?(c(a,d),a.className+=" "+b):a.className=b}function c(a,b){a.className=a.className.replace(b,"")}function d(b){return b.nodeType===a.TEXT_NODE&&!a.lang.string(b.data).trim()}function e(a){for(var b=a.previousSibling;b&&d(b);)b=b.previousSibling;return b}function f(a){for(var b=a.nextSibling;b&&d(b);)b=b.nextSibling;return b}function g(a){var b=a.ownerDocument,c=f(a),d=e(a);c&&!k(c)&&a.parentNode.insertBefore(b.createElement("br"),c),d&&!k(d)&&a.parentNode.insertBefore(b.createElement("br"),a)}function h(a){var b=f(a),c=e(a);b&&j(b)&&b.parentNode.removeChild(b),c&&j(c)&&c.parentNode.removeChild(c)}function i(a){var b=a.lastChild;b&&j(b)&&b.parentNode.removeChild(b)}function j(a){return"BR"===a.nodeName}function k(a){return j(a)?!0:"block"===o.getStyle("display").from(a)?!0:!1}function l(b,c,d,e){if(e)var f=o.observe(b,"DOMNodeInserted",function(b){var c,d=b.target;d.nodeType===a.ELEMENT_NODE&&(c=o.getStyle("display").from(d),"inline"!==c.substr(0,6)&&(d.className+=" "+e))});b.execCommand(c,!1,d),f&&f.stop()}function m(b,c){b.selection.selectLine(),b.selection.surround(c),h(c),i(c),b.selection.selectNode(c,a.browser.displaysCaretInEmptyContentEditableCorrectly())}function n(b){return!!a.lang.string(b.className).trim()}var o=a.dom,p=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE","DIV"];a.commands.formatBlock={exec:function(d,e,f,h,i){var j,k=d.doc,q=this.state(d,e,f,h,i),r=d.config.useLineBreaks,s=r?"DIV":"P";return f="string"==typeof f?f.toUpperCase():f,q?void d.selection.executeAndRestoreSimple(function(){i&&c(q,i);var a=n(q);a||!r&&"P"!==f?o.renameElement(q,"P"===f?"DIV":s):(g(q),o.replaceWithChildNodes(q))}):(null===f||a.lang.array(p).contains(f))&&(j=d.selection.getSelectedNode(),q=o.getParentElement(j,{nodeName:p}))?void d.selection.executeAndRestore(function(){f&&(q=o.renameElement(q,f)),h&&b(q,h,i)}):d.commands.support(e)?void l(k,e,f||s,h):(q=k.createElement(f||s),h&&(q.className=h),void m(d,q))},state:function(a,b,c,d,e){c="string"==typeof c?c.toUpperCase():c;var f=a.selection.getSelectedNode();return o.getParentElement(f,{nodeName:c,className:d,classRegExp:e})}}}(wysihtml5),function(a){function b(a){var b=d[a];return b?[a.toLowerCase(),b.toLowerCase()]:[a.toLowerCase()]}function c(c,d,f){var g=c+":"+d;return e[g]||(e[g]=new a.selection.HTMLApplier(b(c),d,f,!0)),e[g]}var d={strong:"b",em:"i",b:"strong",i:"em"},e={};a.commands.formatInline={exec:function(a,b,d,e,f){var g=a.selection.getRange();return g?(c(d,e,f).toggleRange(g),void a.selection.setSelection(g)):!1},state:function(b,e,f,g,h){var i,j=b.doc,k=d[f]||f;return a.dom.hasElementWithTagName(j,f)||a.dom.hasElementWithTagName(j,k)?g&&!a.dom.hasElementWithClassName(j,g)?!1:(i=b.selection.getRange(),i?c(f,g,h).isAppliedToRange(i):!1):!1}}}(wysihtml5),wysihtml5.commands.insertHTML={exec:function(a,b,c){a.commands.support(b)?a.doc.execCommand(b,!1,c):a.selection.insertHTML(c)},state:function(){return!1}},function(a){var b="IMG";a.commands.insertImage={exec:function(c,d,e){e="object"==typeof e?e:{src:e};var f,g,h,i=c.doc,j=this.state(c);if(j)return c.selection.setBefore(j),h=j.parentNode,h.removeChild(j),a.dom.removeEmptyTextNodes(h),"A"!==h.nodeName||h.firstChild||(c.selection.setAfter(h),h.parentNode.removeChild(h)),void a.quirks.redraw(c.element);j=i.createElement(b);for(g in e)"className"===g&&(g="class"),j.setAttribute(g,e[g]);c.selection.insertNode(j),a.browser.hasProblemsSettingCaretAfterImg()?(f=i.createTextNode(a.INVISIBLE_SPACE),c.selection.insertNode(f),c.selection.setAfter(f)):c.selection.setAfter(j)},state:function(c){var d,e,f,g=c.doc;return a.dom.hasElementWithTagName(g,b)&&(d=c.selection.getSelectedNode())?d.nodeName===b?d:d.nodeType!==a.ELEMENT_NODE?!1:(e=c.selection.getText(),(e=a.lang.string(e).trim())?!1:(f=c.selection.getNodes(a.ELEMENT_NODE,function(a){return"IMG"===a.nodeName}),1!==f.length?!1:f[0])):!1}}}(wysihtml5),function(a){var b="<br>"+(a.browser.needsSpaceAfterLineBreak()?" ":"");a.commands.insertLineBreak={exec:function(c,d){c.commands.support(d)?(c.doc.execCommand(d,!1,null),a.browser.autoScrollsToCaret()||c.selection.scrollIntoView()):c.commands.exec("insertHTML",b)},state:function(){return!1}}}(wysihtml5),wysihtml5.commands.insertOrderedList={exec:function(a,b){var c,d,e=a.doc,f=a.selection.getSelectedNode(),g=wysihtml5.dom.getParentElement(f,{nodeName:"OL"}),h=wysihtml5.dom.getParentElement(f,{nodeName:"UL"}),i="_wysihtml5-temp-"+(new Date).getTime();return g||h||!a.commands.support(b)?void(g?a.selection.executeAndRestore(function(){wysihtml5.dom.resolveList(g,a.config.useLineBreaks)}):h?a.selection.executeAndRestore(function(){wysihtml5.dom.renameElement(h,"ol")}):(a.commands.exec("formatBlock","div",i),d=e.querySelector("."+i),c=""===d.innerHTML||d.innerHTML===wysihtml5.INVISIBLE_SPACE||"<br>"===d.innerHTML,a.selection.executeAndRestore(function(){g=wysihtml5.dom.convertToList(d,"ol")}),c&&a.selection.selectNode(g.querySelector("li"),!0))):void e.execCommand(b,!1,null)},state:function(a){var b=a.selection.getSelectedNode();return wysihtml5.dom.getParentElement(b,{nodeName:"OL"})}},wysihtml5.commands.insertUnorderedList={exec:function(a,b){var c,d,e=a.doc,f=a.selection.getSelectedNode(),g=wysihtml5.dom.getParentElement(f,{nodeName:"UL"}),h=wysihtml5.dom.getParentElement(f,{nodeName:"OL"}),i="_wysihtml5-temp-"+(new Date).getTime();return g||h||!a.commands.support(b)?void(g?a.selection.executeAndRestore(function(){wysihtml5.dom.resolveList(g,a.config.useLineBreaks)}):h?a.selection.executeAndRestore(function(){wysihtml5.dom.renameElement(h,"ul")}):(a.commands.exec("formatBlock","div",i),d=e.querySelector("."+i),c=""===d.innerHTML||d.innerHTML===wysihtml5.INVISIBLE_SPACE||"<br>"===d.innerHTML,a.selection.executeAndRestore(function(){g=wysihtml5.dom.convertToList(d,"ul")}),c&&a.selection.selectNode(g.querySelector("li"),!0))):void e.execCommand(b,!1,null)},state:function(a){var b=a.selection.getSelectedNode();return wysihtml5.dom.getParentElement(b,{nodeName:"UL"})}},wysihtml5.commands.italic={exec:function(a,b){return wysihtml5.commands.formatInline.exec(a,b,"i")},state:function(a,b){return wysihtml5.commands.formatInline.state(a,b,"i")}},function(a){var b="wysiwyg-text-align-center",c=/wysiwyg-text-align-[0-9a-z]+/g;a.commands.justifyCenter={exec:function(d){return a.commands.formatBlock.exec(d,"formatBlock",null,b,c)},state:function(d){return a.commands.formatBlock.state(d,"formatBlock",null,b,c)}}}(wysihtml5),function(a){var b="wysiwyg-text-align-left",c=/wysiwyg-text-align-[0-9a-z]+/g;a.commands.justifyLeft={exec:function(d){return a.commands.formatBlock.exec(d,"formatBlock",null,b,c)},state:function(d){return a.commands.formatBlock.state(d,"formatBlock",null,b,c)}}}(wysihtml5),function(a){var b="wysiwyg-text-align-right",c=/wysiwyg-text-align-[0-9a-z]+/g;a.commands.justifyRight={exec:function(d){return a.commands.formatBlock.exec(d,"formatBlock",null,b,c)},state:function(d){return a.commands.formatBlock.state(d,"formatBlock",null,b,c)}}}(wysihtml5),function(a){var b="wysiwyg-text-align-justify",c=/wysiwyg-text-align-[0-9a-z]+/g;a.commands.justifyFull={exec:function(d){return a.commands.formatBlock.exec(d,"formatBlock",null,b,c)},state:function(d){return a.commands.formatBlock.state(d,"formatBlock",null,b,c)}}}(wysihtml5),wysihtml5.commands.redo={exec:function(a){return a.undoManager.redo()},state:function(){return!1}},wysihtml5.commands.underline={exec:function(a,b){return wysihtml5.commands.formatInline.exec(a,b,"u")},state:function(a,b){return wysihtml5.commands.formatInline.state(a,b,"u")}},wysihtml5.commands.undo={exec:function(a){return a.undoManager.undo()},state:function(){return!1}},function(a){function b(a){for(var b;b=a.querySelector("._wysihtml5-temp");)b.parentNode.removeChild(b)}var c=90,d=89,e=8,f=46,g=25,h="data-wysihtml5-selection-node",i="data-wysihtml5-selection-offset",j='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+a.INVISIBLE_SPACE+"</span>",k='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+a.INVISIBLE_SPACE+"</span>",l=a.dom;a.UndoManager=a.lang.Dispatcher.extend({constructor:function(a){this.editor=a,this.composer=a.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var g,h=this,i=this.composer.sandbox.getDocument();if(l.observe(this.element,"keydown",function(a){if(!a.altKey&&(a.ctrlKey||a.metaKey)){var b=a.keyCode,e=b===c&&!a.shiftKey,f=b===c&&a.shiftKey||b===d;e?(h.undo(),a.preventDefault()):f&&(h.redo(),a.preventDefault())}}),l.observe(this.element,"keydown",function(a){var b=a.keyCode;b!==g&&(g=b,(b===e||b===f)&&h.transact())}),a.browser.hasUndoInContextMenu()){var m,n,o=function(){b(i),clearInterval(m)};l.observe(this.element,"contextmenu",function(){o(),h.composer.selection.executeAndRestoreSimple(function(){h.element.lastChild&&h.composer.selection.setAfter(h.element.lastChild),i.execCommand("insertHTML",!1,j),i.execCommand("insertHTML",!1,k),i.execCommand("undo",!1,null)}),m=setInterval(function(){i.getElementById("_wysihtml5-redo")?(o(),h.redo()):i.getElementById("_wysihtml5-undo")||(o(),h.undo())},400),n||(n=!0,l.observe(document,"mousedown",o),l.observe(i,["mousedown","paste","cut","copy"],o))})}this.editor.on("newword:composer",function(){h.transact()}).on("beforecommand:composer",function(){h.transact()})},transact:function(){var b=this.historyStr[this.position-1],c=this.composer.getValue();if(c!==b){var d=this.historyStr.length=this.historyDom.length=this.position;d>g&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++;var e,f,j=this.composer.selection.getRange(),k=j.startContainer||this.element,l=j.startOffset||0;k.nodeType===a.ELEMENT_NODE?e=k:(e=k.parentNode,f=this.getChildNodeIndex(e,k)),e.setAttribute(i,l),"undefined"!=typeof f&&e.setAttribute(h,f);var m=this.element.cloneNode(!!c);this.historyDom.push(m),this.historyStr.push(c),e.removeAttribute(i),e.removeAttribute(h)}},undo:function(){this.transact(),this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(a){this.element.innerHTML="";for(var b=0,c=a.childNodes,d=a.childNodes.length;d>b;b++)this.element.appendChild(c[b].cloneNode(!0));var e,f,g;a.hasAttribute(i)?(e=a.getAttribute(i),g=a.getAttribute(h),f=this.element):(f=this.element.querySelector("["+i+"]")||this.element,e=f.getAttribute(i),g=f.getAttribute(h),f.removeAttribute(i),f.removeAttribute(h)),null!==g&&(f=this.getChildNodeByIndex(f,+g)),this.composer.selection.set(f,e)},getChildNodeIndex:function(a,b){for(var c=0,d=a.childNodes,e=d.length;e>c;c++)if(d[c]===b)return c},getChildNodeByIndex:function(a,b){return a.childNodes[b]}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(a,b,c){this.parent=a,this.element=b,this.config=c,this._observeViewChange()},_observeViewChange:function(){var a=this;this.parent.on("beforeload",function(){a.parent.on("change_view",function(b){b===a.name?(a.parent.currentView=a,a.show(),setTimeout(function(){a.focus()},0)):a.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(a){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(a){var b=a.dom,c=a.browser;a.views.Composer=a.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(a,b,c){this.base(a,b,c),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=c.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(b){var c=this.isEmpty()?"":a.quirks.getCorrectInnerHTML(this.element);return b&&(c=this.parent.parse(c)),c=a.lang.string(c).replace(a.INVISIBLE_SPACE).by("")},setValue:function(a,b){b&&(a=this.parent.parse(a));try{this.element.innerHTML=a}catch(c){this.element.innerText=a}},show:function(){this.iframe.style.display=this._displayStyle||"",this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=b.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.parent.fire("disable:composer"),this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer"),this.element.setAttribute("contentEditable","true")},focus:function(b){a.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var c=this.element.lastChild;b&&c&&("BR"===c.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return b.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")&&this.placeholderSet},isEmpty:function(){var a=this.element.innerHTML.toLowerCase();return""===a||"<br>"===a||"<p></p>"===a||"<p><br></p>"===a||this.hasPlaceholderSet()},_initSandbox:function(){var a=this;this.sandbox=new b.Sandbox(function(){a._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var c=this.textarea.element;if(b.insert(this.iframe).after(c),c.form){var d=document.createElement("input");d.type="hidden",d.name="_wysihtml5_mode",d.value=1,b.insert(d).after(c)}},_create:function(){var d=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.selection=new a.Selection(this.parent),this.commands=new a.Commands(this.parent),b.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),b.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var e=this.config.name;e&&(b.addClass(this.element,e),b.addClass(this.iframe,e)),this.enable(),this.textarea.element.disabled&&this.disable();var f="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");f&&b.simulatePlaceholder(this.parent,this,f),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),this._initLineBreaking(),!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||c.isIos()||setTimeout(function(){d.focus(!0)},100),c.clearsContentEditableCorrectly()||a.quirks.ensureProperClearing(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var d=this,e=c.canDisableAutoLinking(),f=c.doesAutoLinkingInContentEditable();if(e&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!f||f&&e)&&(this.parent.on("newword:composer",function(){b.getTextContent(d.element).match(b.autoLink.URL_REG_EXP)&&d.selection.executeAndRestore(function(a,c){b.autoLink(c.parentNode)})}),b.observe(this.element,"blur",function(){b.autoLink(d.element)}));var g=this.sandbox.getDocument().getElementsByTagName("a"),h=b.autoLink.URL_REG_EXP,i=function(c){var d=a.lang.string(b.getTextContent(c)).trim();return"www."===d.substr(0,4)&&(d="http://"+d),d};b.observe(this.element,"keydown",function(a){if(g.length){var c,e=d.selection.getSelectedNode(a.target.ownerDocument),f=b.getParentElement(e,{nodeName:"A"},4);f&&(c=i(f),setTimeout(function(){var a=i(f);a!==c&&a.match(h)&&f.setAttribute("href",a)},0))}})}},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),c.supportsEvent("resizeend")){var d=["width","height"],e=d.length,f=this.element;b.observe(f,"resizeend",function(b){var c,g=b.target||b.srcElement,h=g.style,i=0;if("IMG"===g.nodeName){for(;e>i;i++)c=d[i],h[c]&&(g.setAttribute(c,parseInt(h[c],10)),h[c]="");a.quirks.redraw(f)}})}},_initUndoManager:function(){this.undoManager=new a.UndoManager(this.parent)},_initLineBreaking:function(){function d(a){var c=b.getParentElement(a,{nodeName:["P","DIV"]},2);c&&e.selection.executeAndRestore(function(){e.config.useLineBreaks?b.replaceWithChildNodes(c):"P"!==c.nodeName&&b.renameElement(c,"p")})}var e=this,f=["LI","P","H1","H2","H3","H4","H5","H6"],g=["UL","OL","MENU"];this.config.useLineBreaks||b.observe(this.element,["focus","keydown"],function(){if(e.isEmpty()){var a=e.doc.createElement("P");e.element.innerHTML="",e.element.appendChild(a),c.displaysCaretInEmptyContentEditableCorrectly()?e.selection.selectNode(a,!0):(a.innerHTML="<br>",e.selection.setBefore(a.firstChild))}}),b.observe(this.doc,"keydown",function(c){var h=c.keyCode;if(!c.shiftKey&&(h===a.ENTER_KEY||h===a.BACKSPACE_KEY)){var i=b.getParentElement(e.selection.getSelectedNode(),{nodeName:f},4);return i?void setTimeout(function(){var c,f=e.selection.getSelectedNode();if("LI"===i.nodeName){if(!f)return;c=b.getParentElement(f,{nodeName:g},2),c||d(f)}h===a.ENTER_KEY&&i.nodeName.match(/^H[1-6]$/)&&d(f)},0):void(e.config.useLineBreaks&&h===a.ENTER_KEY&&!a.browser.insertsLineBreaksOnReturn()&&(e.commands.exec("insertLineBreak"),c.preventDefault()))}})}})}(wysihtml5),function(a){var b=a.dom,c=document,d=window,e=c.createElement("div"),f=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],g=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],h=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",a.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],i=function(a){if(a.setActive)try{a.setActive()}catch(e){}else{var f=a.style,g=c.documentElement.scrollTop||c.body.scrollTop,h=c.documentElement.scrollLeft||c.body.scrollLeft,i={position:f.position,top:f.top,left:f.left,WebkitUserSelect:f.WebkitUserSelect};b.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(a),a.focus(),b.setStyles(i).on(a),d.scrollTo&&d.scrollTo(h,g)}};a.views.Composer.prototype.style=function(){var d,j=this,k=c.querySelector(":focus"),l=this.textarea.element,m=l.hasAttribute("placeholder"),n=m&&l.getAttribute("placeholder"),o=l.style.display,p=l.disabled;this.focusStylesHost=e.cloneNode(!1),this.blurStylesHost=e.cloneNode(!1),this.disabledStylesHost=e.cloneNode(!1),m&&l.removeAttribute("placeholder"),l===k&&l.blur(),l.disabled=!1,l.style.display=d="none",(l.getAttribute("rows")&&"auto"===b.getStyle("height").from(l)||l.getAttribute("cols")&&"auto"===b.getStyle("width").from(l))&&(l.style.display=d=o),b.copyStyles(g).from(l).to(this.iframe).andTo(this.blurStylesHost),b.copyStyles(f).from(l).to(this.element).andTo(this.blurStylesHost),b.insertCSS(h).into(this.element.ownerDocument),l.disabled=!0,b.copyStyles(g).from(l).to(this.disabledStylesHost),b.copyStyles(f).from(l).to(this.disabledStylesHost),l.disabled=p,l.style.display=o,i(l),l.style.display=d,b.copyStyles(g).from(l).to(this.focusStylesHost),b.copyStyles(f).from(l).to(this.focusStylesHost),l.style.display=o,b.copyStyles(["display"]).from(l).to(this.iframe);var q=a.lang.array(g).without(["display"]);return k?k.focus():l.blur(),m&&l.setAttribute("placeholder",n),this.parent.on("focus:composer",function(){b.copyStyles(q).from(j.focusStylesHost).to(j.iframe),b.copyStyles(f).from(j.focusStylesHost).to(j.element)}),this.parent.on("blur:composer",function(){b.copyStyles(q).from(j.blurStylesHost).to(j.iframe),b.copyStyles(f).from(j.blurStylesHost).to(j.element)}),this.parent.observe("disable:composer",function(){b.copyStyles(q).from(j.disabledStylesHost).to(j.iframe),b.copyStyles(f).from(j.disabledStylesHost).to(j.element)}),this.parent.observe("enable:composer",function(){b.copyStyles(q).from(j.blurStylesHost).to(j.iframe),b.copyStyles(f).from(j.blurStylesHost).to(j.element)}),this}}(wysihtml5),function(a){var b=a.dom,c=a.browser,d={66:"bold",73:"italic",85:"underline"};a.views.Composer.prototype.observe=function(){var e=this,f=this.getValue(),g=this.sandbox.getIframe(),h=this.element,i=c.supportsEventsInIframeCorrectly()?h:this.sandbox.getWindow(),j=["drop","paste"];b.observe(g,"DOMNodeRemoved",function(){clearInterval(k),e.parent.fire("destroy:composer")});var k=setInterval(function(){b.contains(document.documentElement,g)||(clearInterval(k),e.parent.fire("destroy:composer"))},250);b.observe(i,"focus",function(){e.parent.fire("focus").fire("focus:composer"),setTimeout(function(){f=e.getValue()},0)}),b.observe(i,"blur",function(){f!==e.getValue()&&e.parent.fire("change").fire("change:composer"),e.parent.fire("blur").fire("blur:composer")}),b.observe(h,"dragenter",function(){e.parent.fire("unset_placeholder")}),b.observe(h,j,function(){setTimeout(function(){e.parent.fire("paste").fire("paste:composer")},0)}),b.observe(h,"keyup",function(b){var c=b.keyCode;(c===a.SPACE_KEY||c===a.ENTER_KEY)&&e.parent.fire("newword:composer")}),this.parent.on("paste:composer",function(){setTimeout(function(){e.parent.fire("newword:composer")},0)}),c.canSelectImagesInContentEditable()||b.observe(h,"mousedown",function(a){var b=a.target;"IMG"===b.nodeName&&(e.selection.selectNode(b),a.preventDefault())}),c.hasHistoryIssue()&&c.supportsSelectionModify()&&b.observe(h,"keydown",function(a){if(a.metaKey||a.ctrlKey){var b=a.keyCode,c=h.ownerDocument.defaultView,d=c.getSelection();(37===b||39===b)&&(37===b&&(d.modify("extend","left","lineboundary"),a.shiftKey||d.collapseToStart()),39===b&&(d.modify("extend","right","lineboundary"),a.shiftKey||d.collapseToEnd()),a.preventDefault())}}),b.observe(h,"keydown",function(a){var b=a.keyCode,c=d[b];(a.ctrlKey||a.metaKey)&&!a.altKey&&c&&(e.commands.exec(c),a.preventDefault())}),b.observe(h,"keydown",function(b){var c,d=e.selection.getSelectedNode(!0),f=b.keyCode;!d||"IMG"!==d.nodeName||f!==a.BACKSPACE_KEY&&f!==a.DELETE_KEY||(c=d.parentNode,c.removeChild(d),"A"!==c.nodeName||c.firstChild||c.parentNode.removeChild(c),setTimeout(function(){a.quirks.redraw(h)},0),b.preventDefault())}),c.hasIframeFocusIssue()&&(b.observe(this.iframe,"focus",function(){setTimeout(function(){e.doc.querySelector(":focus")!==e.element&&e.focus()},0)}),b.observe(this.element,"blur",function(){setTimeout(function(){e.selection.getSelection().removeAllRanges()},0)}));var l={IMG:"Image: ",A:"Link: "};b.observe(h,"mouseover",function(a){var b,c=a.target,d=c.nodeName;if("A"===d||"IMG"===d){var e=c.hasAttribute("title");e||(b=l[d]+(c.getAttribute("href")||c.getAttribute("src")),c.setAttribute("title",b))}})}}(wysihtml5),function(a){var b=400;a.views.Synchronizer=Base.extend({constructor:function(a,b,c){this.editor=a,this.textarea=b,this.composer=c,this._observe()},fromComposerToTextarea:function(b){this.textarea.setValue(a.lang.string(this.composer.getValue()).trim(),b)},fromTextareaToComposer:function(a){var b=this.textarea.getValue();b?this.composer.setValue(b,a):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(a){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(a):this.fromComposerToTextarea(a)},_observe:function(){var c,d=this,e=this.textarea.element.form,f=function(){c=setInterval(function(){d.fromComposerToTextarea()},b)},g=function(){clearInterval(c),c=null};f(),e&&(a.dom.observe(e,"submit",function(){d.sync(!0)}),a.dom.observe(e,"reset",function(){setTimeout(function(){d.fromTextareaToComposer()},0)})),this.editor.on("change_view",function(a){"composer"!==a||c?"textarea"===a&&(d.fromComposerToTextarea(!0),g()):(d.fromTextareaToComposer(!0),f())}),this.editor.on("destroy:composer",g)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(a,b,c){this.base(a,b,c),this._observe()},clear:function(){this.element.value=""},getValue:function(a){var b=this.isEmpty()?"":this.element.value;return a&&(b=this.parent.parse(b)),b},setValue:function(a,b){b&&(a=this.parent.parse(a)),this.element.value=a},hasPlaceholderSet:function(){var a=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),b=this.element.getAttribute("placeholder")||null,c=this.element.value,d=!c;return a&&d||c===b},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var a=this.element,b=this.parent,c={focusin:"focus",focusout:"blur"},d=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];b.on("beforeload",function(){wysihtml5.dom.observe(a,d,function(a){var d=c[a.type]||a.type;b.fire(d).fire(d+":textarea")}),wysihtml5.dom.observe(a,["paste","drop"],function(){setTimeout(function(){b.fire("paste").fire("paste:textarea")},0)})})}}),function(a){var b=a.dom,c="wysihtml5-command-dialog-opened",d="input, select, textarea",e="[data-wysihtml5-dialog-field]",f="data-wysihtml5-dialog-field";a.toolbar.Dialog=a.lang.Dispatcher.extend({constructor:function(a,b){this.link=a,this.container=b
},_observe:function(){if(!this._observed){var e=this,f=function(a){var b=e._serialize();b==e.elementToChange?e.fire("edit",b):e.fire("save",b),e.hide(),a.preventDefault(),a.stopPropagation()};b.observe(e.link,"click",function(){b.hasClass(e.link,c)&&setTimeout(function(){e.hide()},0)}),b.observe(this.container,"keydown",function(b){var c=b.keyCode;c===a.ENTER_KEY&&f(b),c===a.ESCAPE_KEY&&e.hide()}),b.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",f),b.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(a){e.fire("cancel"),e.hide(),a.preventDefault(),a.stopPropagation()});for(var g=this.container.querySelectorAll(d),h=0,i=g.length,j=function(){clearInterval(e.interval)};i>h;h++)b.observe(g[h],"change",j);this._observed=!0}},_serialize:function(){for(var a=this.elementToChange||{},b=this.container.querySelectorAll(e),c=b.length,d=0;c>d;d++)a[b[d].getAttribute(f)]=b[d].value;return a},_interpolate:function(a){for(var b,c,d,g=document.querySelector(":focus"),h=this.container.querySelectorAll(e),i=h.length,j=0;i>j;j++)b=h[j],b!==g&&(a&&"hidden"===b.type||(c=b.getAttribute(f),d=this.elementToChange?this.elementToChange[c]||"":b.defaultValue,b.value=d))},show:function(a){if(!b.hasClass(this.link,c)){var e=this,f=this.container.querySelector(d);if(this.elementToChange=a,this._observe(),this._interpolate(),a&&(this.interval=setInterval(function(){e._interpolate(!0)},500)),b.addClass(this.link,c),this.container.style.display="",this.fire("show"),f&&!a)try{f.focus()}catch(g){}}},hide:function(){clearInterval(this.interval),this.elementToChange=null,b.removeClass(this.link,c),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(a){var b=a.dom,c={position:"relative"},d={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},e={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},f={"x-webkit-speech":"",speech:""};a.toolbar.Speech=function(g,h){var i=document.createElement("input");if(!a.browser.supportsSpeechApiOn(i))return void(h.style.display="none");var j=g.editor.textarea.element.getAttribute("lang");j&&(f.lang=j);var k=document.createElement("div");a.lang.object(d).merge({width:h.offsetWidth+"px",height:h.offsetHeight+"px"}),b.insert(i).into(k),b.insert(k).into(h),b.setStyles(e).on(i),b.setAttributes(f).on(i),b.setStyles(d).on(k),b.setStyles(c).on(h);var l="onwebkitspeechchange"in i?"webkitspeechchange":"speechchange";b.observe(i,l,function(){g.execCommand("insertText",i.value),i.value=""}),b.observe(i,"click",function(a){b.hasClass(h,"wysihtml5-command-disabled")&&a.preventDefault(),a.stopPropagation()})}}(wysihtml5),function(a){var b="wysihtml5-command-disabled",c="wysihtml5-commands-disabled",d="wysihtml5-command-active",e="wysihtml5-action-active",f=a.dom;a.toolbar.Toolbar=Base.extend({constructor:function(b,c){this.editor=b,this.container="string"==typeof c?document.getElementById(c):c,this.composer=b.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var d=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),e=d.length,f=0;e>f;f++)new a.toolbar.Speech(this,d[f])},_getLinks:function(b){for(var c,d,e,f,g,h=this[b+"Links"]=a.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+b+"]")).get(),i=h.length,j=0,k=this[b+"Mapping"]={};i>j;j++)c=h[j],e=c.getAttribute("data-wysihtml5-"+b),f=c.getAttribute("data-wysihtml5-"+b+"-value"),d=this.container.querySelector("[data-wysihtml5-"+b+"-group='"+e+"']"),g=this._getDialog(c,e),k[e+":"+f]={link:c,group:d,name:e,value:f,dialog:g,state:!1}},_getDialog:function(b,c){var d,e,f=this,g=this.container.querySelector("[data-wysihtml5-dialog='"+c+"']");return g&&(d=new a.toolbar.Dialog(b,g),d.on("show",function(){e=f.composer.selection.getBookmark(),f.editor.fire("show:dialog",{command:c,dialogContainer:g,commandLink:b})}),d.on("save",function(a){e&&f.composer.selection.setBookmark(e),f._execCommand(c,a),f.editor.fire("save:dialog",{command:c,dialogContainer:g,commandLink:b})}),d.on("cancel",function(){f.editor.focus(!1),f.editor.fire("cancel:dialog",{command:c,dialogContainer:g,commandLink:b})})),d},execCommand:function(a,b){if(!this.commandsDisabled){var c=this.commandMapping[a+":"+b];c&&c.dialog&&!c.state?c.dialog.show():this._execCommand(a,b)}},_execCommand:function(a,b){this.editor.focus(!1),this.composer.commands.exec(a,b),this._updateLinkStates()},execAction:function(a){var b=this.editor;"change_view"===a&&(b.currentView===b.textarea?b.fire("change_view","composer"):b.fire("change_view","textarea"))},_observe:function(){for(var a=this,b=this.editor,d=this.container,e=this.commandLinks.concat(this.actionLinks),g=e.length,h=0;g>h;h++)f.setAttributes({href:"javascript:;",unselectable:"on"}).on(e[h]);f.delegate(d,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(a){a.preventDefault()}),f.delegate(d,"[data-wysihtml5-command]","click",function(b){var c=this,d=c.getAttribute("data-wysihtml5-command"),e=c.getAttribute("data-wysihtml5-command-value");a.execCommand(d,e),b.preventDefault()}),f.delegate(d,"[data-wysihtml5-action]","click",function(b){var c=this.getAttribute("data-wysihtml5-action");a.execAction(c),b.preventDefault()}),b.on("focus:composer",function(){a.bookmark=null,clearInterval(a.interval),a.interval=setInterval(function(){a._updateLinkStates()},500)}),b.on("blur:composer",function(){clearInterval(a.interval)}),b.on("destroy:composer",function(){clearInterval(a.interval)}),b.on("change_view",function(b){setTimeout(function(){a.commandsDisabled="composer"!==b,a._updateLinkStates(),a.commandsDisabled?f.addClass(d,c):f.removeClass(d,c)},0)})},_updateLinkStates:function(){var c,g,h,i,j=this.commandMapping,k=this.actionMapping;for(c in j)i=j[c],this.commandsDisabled?(g=!1,f.removeClass(i.link,d),i.group&&f.removeClass(i.group,d),i.dialog&&i.dialog.hide()):(g=this.composer.commands.state(i.name,i.value),a.lang.object(g).isArray()&&(g=1===g.length?g[0]:!0),f.removeClass(i.link,b),i.group&&f.removeClass(i.group,b)),i.state!==g&&(i.state=g,g?(f.addClass(i.link,d),i.group&&f.addClass(i.group,d),i.dialog&&("object"==typeof g?i.dialog.show(g):i.dialog.hide())):(f.removeClass(i.link,d),i.group&&f.removeClass(i.group,d),i.dialog&&i.dialog.hide()));for(c in k)h=k[c],"change_view"===h.name&&(h.state=this.editor.currentView===this.editor.textarea,h.state?f.addClass(h.link,e):f.removeClass(h.link,e))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(a){var b,c={name:b,style:!0,toolbar:b,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:a.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:!0,stylesheets:[],placeholderText:b,supportTouchDevices:!0};a.Editor=a.lang.Dispatcher.extend({constructor:function(b,d){if(this.textareaElement="string"==typeof b?document.getElementById(b):b,this.config=a.lang.object({}).merge(c).merge(d).get(),this.textarea=new a.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=a.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&a.browser.isTouchDevice()){var e=this;return void setTimeout(function(){e.fire("beforeload").fire("load")},0)}a.dom.addClass(document.body,this.config.bodyClassName),this.composer=new a.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.on("beforeload",function(){this.synchronizer=new a.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new a.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(f){}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(a){return this.currentView.getValue(a)},setValue:function(a,b){return this.fire("unset_placeholder"),a?(this.currentView.setValue(a,b),this):this.clear()},focus:function(a){return this.currentView.focus(a),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(b){var c=this.config.parser(b,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof b&&a.quirks.redraw(b),c},_initParser:function(){this.on("paste:composer",function(){var b=!0,c=this;c.composer.selection.executeAndRestore(function(){a.quirks.cleanPastedHTML(c.composer.element),c.parse(c.composer.element)},b)})}})}(wysihtml5),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){return!0}function d(a,b,d,e){return a.global?c(b||x,d,e):void 0}function e(a){a.global&&0===D.active++&&d(a,null,"ajaxStart")}function f(a){a.global&&!--D.active&&d(a,null,"ajaxStop")}function g(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1||d(b,c,"ajaxBeforeSend",[a,b])===!1?!1:void d(b,c,"ajaxSend",[a,b])}function h(a,b,c){var e=c.context,f="success";c.success.call(e,a,f,b),d(c,e,"ajaxSuccess",[b,c,a]),j(f,b,c)}function i(a,b,c,e){var f=e.context;e.error.call(f,c,b,a),d(e,f,"ajaxError",[c,e,a]),j(b,c,e)}function j(a,b,c){var e=c.context;c.complete.call(e,b,a),d(c,e,"ajaxComplete",[b,c]),f(c)}function k(){}function l(a){return a&&(a==B?"html":a==A?"json":y.test(a)?"script":z.test(a)&&"xml")||"text"}function m(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function n(a){"object"===r(a.data)&&(a.data=p(a.data)),!a.data||a.type&&"GET"!=a.type.toUpperCase()||(a.url=m(a.url,a.data))}function o(a,b,c,d){var e="array"===r(b);for(var f in b){var g=b[f];d&&(f=c?d:d+"["+(e?"":f)+"]"),!d&&e?a.add(g.name,g.value):(c?"array"===r(g):"object"===r(g))?o(a,g,c,f):a.add(f,g)}}function p(a,b){var c=[];return c.add=function(a,b){this.push(E(a)+"="+E(b))},o(c,a,b),c.join("&").replace("%20","+")}function q(a){var b=Array.prototype.slice;return b.call(arguments,1).forEach(function(b){for(u in b)void 0!==b[u]&&(a[u]=b[u])}),a}var r;try{r=a("type-of")}catch(s){var t=a;r=t("type")}var u,v,w=0,x=window.document,y=/^(?:text|application)\/javascript/i,z=/^(?:text|application)\/xml/i,A="application/json",B="text/html",C=/^\s*$/,D=b.exports=function(a){var b=q({},a||{});for(u in D.settings)void 0===b[u]&&(b[u]=D.settings[u]);e(b),b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&RegExp.$2!=window.location.host);var c=b.dataType,d=/=\?/.test(b.url);if("jsonp"==c||d)return d||(b.url=m(b.url,"callback=?")),D.JSONP(b);b.url||(b.url=window.location.toString()),n(b);var f,j=b.accepts[c],o={},p=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,r=D.settings.xhr();b.crossDomain||(o["X-Requested-With"]="XMLHttpRequest"),j&&(o.Accept=j,j.indexOf(",")>-1&&(j=j.split(",",2)[0]),r.overrideMimeType&&r.overrideMimeType(j)),(b.contentType||b.data&&"GET"!=b.type.toUpperCase())&&(o["Content-Type"]=b.contentType||"application/x-www-form-urlencoded"),b.headers=q(o,b.headers||{}),r.onreadystatechange=function(){if(4==r.readyState){clearTimeout(f);var a,d=!1;if(r.status>=200&&r.status<300||304==r.status||0==r.status&&"file:"==p){c=c||l(r.getResponseHeader("content-type")),a=r.responseText;try{"script"==c?(1,eval)(a):"xml"==c?a=r.responseXML:"json"==c&&(a=C.test(a)?null:JSON.parse(a))}catch(e){d=e}d?i(d,"parsererror",r,b):h(a,r,b)}else i(null,"error",r,b)}};var s="async"in b?b.async:!0;r.open(b.type,b.url,s);for(v in b.headers)r.setRequestHeader(v,b.headers[v]);return g(r,b)===!1?(r.abort(),!1):(b.timeout>0&&(f=setTimeout(function(){r.onreadystatechange=k,r.abort(),i(null,"timeout",r,b)},b.timeout)),r.send(b.data?b.data:null),r)};D.active=0,D.JSONP=function(a){if(!("type"in a))return D(a);var b,c="jsonp"+ ++w,d=x.createElement("script"),e=function(){c in window&&(window[c]=k),j("abort",f,a)},f={abort:e},g=x.getElementsByTagName("head")[0]||x.documentElement;return a.error&&(d.onerror=function(){f.abort(),a.error()}),window[c]=function(d){clearTimeout(b),delete window[c],h(d,f,a)},n(a),d.src=a.url.replace(/=\?/,"="+c),g.insertBefore(d,g.firstChild),a.timeout>0&&(b=setTimeout(function(){f.abort(),j("timeout",f,a)},a.timeout)),f},D.settings={type:"GET",beforeSend:k,success:k,error:k,complete:k,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:A,xml:"application/xml, text/xml",html:B,text:"text/plain"},crossDomain:!1,timeout:0},D.get=function(a,b){return D({url:a,success:b})},D.post=function(a,b,c,d){return"function"===r(b)&&(d=d||c,c=b,b=null),D({type:"POST",url:a,data:b,success:c,dataType:d})},D.getJSON=function(a,b){return D({url:a,success:b,dataType:"json"})};var E=encodeURIComponent},{"type-of":6}],2:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("Zbi7gb"))},{Zbi7gb:3}],3:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(a,b,c){(function(a){!function(a){function b(){this._events={},this._conf&&c.call(this,this._conf)}function c(a){a&&(this._conf=a,a.delimiter&&(this.delimiter=a.delimiter),a.maxListeners&&(this._events.maxListeners=a.maxListeners),a.wildcard&&(this.wildcard=a.wildcard),a.newListener&&(this.newListener=a.newListener),this.wildcard&&(this.listenerTree={}))}function d(a){this._events={},this.newListener=!1,c.call(this,a)}function e(a,b,c,d){if(!c)return[];var f,g,h,i,j,k,l,m=[],n=b.length,o=b[d],p=b[d+1];if(d===n&&c._listeners){if("function"==typeof c._listeners)return a&&a.push(c._listeners),[c];for(f=0,g=c._listeners.length;g>f;f++)a&&a.push(c._listeners[f]);return[c]}if("*"===o||"**"===o||c[o]){if("*"===o){for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&(m=m.concat(e(a,b,c[h],d+1)));return m}if("**"===o){l=d+1===n||d+2===n&&"*"===p,l&&c._listeners&&(m=m.concat(e(a,b,c,n)));for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&("*"===h||"**"===h?(c[h]._listeners&&!l&&(m=m.concat(e(a,b,c[h],n))),m=m.concat(e(a,b,c[h],d))):m=m.concat(h===p?e(a,b,c[h],d+2):e(a,b,c[h],d)));return m}m=m.concat(e(a,b,c[o],d+1))}if(i=c["*"],i&&e(a,b,i,d+1),j=c["**"])if(n>d){j._listeners&&e(a,b,j,n);for(h in j)"_listeners"!==h&&j.hasOwnProperty(h)&&(h===p?e(a,b,j[h],d+2):h===o?e(a,b,j[h],d+1):(k={},k[h]=j[h],e(a,b,{"**":k},d+1)))}else j._listeners?e(a,b,j,n):j["*"]&&j["*"]._listeners&&e(a,b,j["*"],n);return m}function f(a,b){a="string"==typeof a?a.split(this.delimiter):a.slice();for(var c=0,d=a.length;d>c+1;c++)if("**"===a[c]&&"**"===a[c+1])return;for(var e=this.listenerTree,f=a.shift();f;){if(e[f]||(e[f]={}),e=e[f],0===a.length){if(e._listeners){if("function"==typeof e._listeners)e._listeners=[e._listeners,b];else if(g(e._listeners)&&(e._listeners.push(b),!e._listeners.warned)){var i=h;"undefined"!=typeof this._events.maxListeners&&(i=this._events.maxListeners),i>0&&e._listeners.length>i&&(e._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",e._listeners.length),console.trace())}}else e._listeners=b;return!0}f=a.shift()}return!0}var g=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=10;d.prototype.delimiter=".",d.prototype.setMaxListeners=function(a){this._events||b.call(this),this._events.maxListeners=a,this._conf||(this._conf={}),this._conf.maxListeners=a},d.prototype.event="",d.prototype.once=function(a,b){return this.many(a,1,b),this},d.prototype.many=function(a,b,c){function d(){0===--b&&e.off(a,d),c.apply(this,arguments)}var e=this;if("function"!=typeof c)throw new Error("many only accepts instances of Function");return d._origin=c,this.on(a,d),e},d.prototype.emit=function(){this._events||b.call(this);var a=arguments[0];if("newListener"===a&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var c=arguments.length,d=new Array(c-1),f=1;c>f;f++)d[f-1]=arguments[f];for(f=0,c=this._all.length;c>f;f++)this.event=a,this._all[f].apply(this,d)}if("error"===a&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var g;if(this.wildcard){g=[];var h="string"==typeof a?a.split(this.delimiter):a.slice();e.call(this,g,h,this.listenerTree,0)}else g=this._events[a];if("function"==typeof g){if(this.event=a,1===arguments.length)g.call(this);else if(arguments.length>1)switch(arguments.length){case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:for(var c=arguments.length,d=new Array(c-1),f=1;c>f;f++)d[f-1]=arguments[f];g.apply(this,d)}return!0}if(g){for(var c=arguments.length,d=new Array(c-1),f=1;c>f;f++)d[f-1]=arguments[f];for(var i=g.slice(),f=0,c=i.length;c>f;f++)this.event=a,i[f].apply(this,d);return i.length>0||this._all}return this._all},d.prototype.on=function(a,c){if("function"==typeof a)return this.onAny(a),this;if("function"!=typeof c)throw new Error("on only accepts instances of Function");if(this._events||b.call(this),this.emit("newListener",a,c),this.wildcard)return f.call(this,a,c),this;if(this._events[a]){if("function"==typeof this._events[a])this._events[a]=[this._events[a],c];else if(g(this._events[a])&&(this._events[a].push(c),!this._events[a].warned)){var d=h;"undefined"!=typeof this._events.maxListeners&&(d=this._events.maxListeners),d>0&&this._events[a].length>d&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}}else this._events[a]=c;return this},d.prototype.onAny=function(a){if(this._all||(this._all=[]),"function"!=typeof a)throw new Error("onAny only accepts instances of Function");return this._all.push(a),this},d.prototype.addListener=d.prototype.on,d.prototype.off=function(a,b){if("function"!=typeof b)throw new Error("removeListener only takes instances of Function");var c,d=[];if(this.wildcard){var f="string"==typeof a?a.split(this.delimiter):a.slice();d=e.call(this,null,f,this.listenerTree,0)}else{if(!this._events[a])return this;c=this._events[a],d.push({_listeners:c})}for(var h=0;h<d.length;h++){var i=d[h];if(c=i._listeners,g(c)){for(var j=-1,k=0,l=c.length;l>k;k++)if(c[k]===b||c[k].listener&&c[k].listener===b||c[k]._origin&&c[k]._origin===b){j=k;break}if(0>j)continue;return this.wildcard?i._listeners.splice(j,1):this._events[a].splice(j,1),0===c.length&&(this.wildcard?delete i._listeners:delete this._events[a]),this}(c===b||c.listener&&c.listener===b||c._origin&&c._origin===b)&&(this.wildcard?delete i._listeners:delete this._events[a])}return this},d.prototype.offAny=function(a){var b,c=0,d=0;if(a&&this._all&&this._all.length>0){for(b=this._all,c=0,d=b.length;d>c;c++)if(a===b[c])return b.splice(c,1),this}else this._all=[];return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(a){if(0===arguments.length)return!this._events||b.call(this),this;if(this.wildcard)for(var c="string"==typeof a?a.split(this.delimiter):a.slice(),d=e.call(this,null,c,this.listenerTree,0),f=0;f<d.length;f++){var g=d[f];g._listeners=null}else{if(!this._events[a])return this;this._events[a]=null}return this},d.prototype.listeners=function(a){if(this.wildcard){var c=[],d="string"==typeof a?a.split(this.delimiter):a.slice();return e.call(this,c,d,this.listenerTree,0),c}return this._events||b.call(this),this._events[a]||(this._events[a]=[]),g(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]},d.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return d}):a.EventEmitter2=d}("undefined"!=typeof a&&"undefined"!=typeof a.title&&"undefined"!=typeof c?c:window)}).call(this,a("Zbi7gb"))},{Zbi7gb:3}],5:[function(a,b,c){(function(a){(function(){function d(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function e(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var e="number"==c?b:u+b;return a=(a=a[c])&&a[e],"object"==c?a&&d(a,b)>-1?0:-1:a?0:-1}function f(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function g(a){return a.charCodeAt(0)}function h(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function i(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],g=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&g&&"object"==typeof g)return!1;var h=l();h["false"]=h["null"]=h["true"]=h.undefined=!1;var i=l();for(i.array=a,i.cache=h,i.push=f;++b<c;)i.push(a[b]);return i}function j(a){return"\\"+Y[a]}function k(){return r.pop()||[]}function l(){return s.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function m(a){a.length=0,r.length<w&&r.push(a)}function n(a){var b=a.cache;b&&n(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,s.length<w&&s.push(a)}function o(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function p(a){function b(a){return a&&"object"==typeof a&&!Zd(a)&&Hd.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function f(a){function b(){if(d){var a=o(d);Id.apply(a,arguments)}if(this instanceof b){var f=s(c.prototype),g=c.apply(f,a||arguments);return Eb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Yd(b,a),b}function r(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Eb(a);if(!g)return a;var h=Ad.call(a);if(!U[h])return a;var i=Wd[h];switch(h){case N:case O:return new i(+a);case Q:case T:return new i(a);case S:return f=i(a.source,C.exec(a)),f.lastIndex=a.lastIndex,f}var j=Zd(a);if(b){var l=!d;d||(d=k()),e||(e=k());for(var n=d.length;n--;)if(d[n]==a)return e[n];f=j?i(a.length):{}}else f=j?o(a):ee({},a);return j&&(Hd.call(a,"index")&&(f.index=a.index),Hd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?Yb:he)(a,function(a,g){f[g]=r(a,b,c,d,e)}),l&&(m(d),m(e)),f):f}function s(a){return Eb(a)?Nd(a):{}}function w(a,b,c){if("function"!=typeof a)return Zc;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Xd.funcNames&&(d=!a.name),d=d||!Xd.funcDecomp,!d)){var e=Fd.call(a);Xd.funcNames||(d=!D.test(e)),d||(d=H.test(e),Yd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ic(a,b)}function Y(a){function b(){var a=i?g:this;if(e){var n=o(e);Id.apply(n,arguments)}if((f||k)&&(n||(n=o(arguments)),f&&Id.apply(n,f),k&&n.length<h))return d|=16,Y([c,l?d:-4&d,n,null,g,h]);if(n||(n=arguments),j&&(c=a[m]),this instanceof b){a=s(c.prototype);var p=c.apply(a,n);return Eb(p)?p:a}return c.apply(a,n)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return Yd(b,a),b}function $(a,b){var c=-1,f=ib(),g=a?a.length:0,h=g>=v&&f===d,j=[];if(h){var k=i(b);k?(f=e,b=k):h=!1}for(;++c<g;){var l=a[c];f(b,l)<0&&j.push(l)}return h&&n(b),j}function _(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zd(h)||mb(h))){b||(h=_(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ab(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&X[h]||b&&X[i]))return!1;if(null==a||null==b)return a===b;var j=Ad.call(a),l=Ad.call(b);if(j==L&&(j=R),l==L&&(l=R),j!=l)return!1;switch(j){case N:case O:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case S:case T:return a==vd(b)}var n=j==M;if(!n){var o=Hd.call(a,"__wrapped__"),p=Hd.call(b,"__wrapped__");if(o||p)return ab(o?a.__wrapped__:a,p?b.__wrapped__:b,c,d,e,f);if(j!=R)return!1;var q=a.constructor,r=b.constructor;if(q!=r&&!(Db(q)&&q instanceof q&&Db(r)&&r instanceof r)&&"constructor"in a&&"constructor"in b)return!1}var s=!e;e||(e=k()),f||(f=k());for(var t=e.length;t--;)if(e[t]==a)return f[t]==b;var u=0;if(g=!0,e.push(a),f.push(b),n){if(t=a.length,u=b.length,g=u==t,g||d)for(;u--;){var v=t,w=b[u];if(d)for(;v--&&!(g=ab(a[v],w,c,d,e,f)););else if(!(g=ab(a[u],w,c,d,e,f)))break}}else ge(b,function(b,h,i){return Hd.call(i,h)?(u++,g=Hd.call(a,h)&&ab(a[h],b,c,d,e,f)):void 0}),g&&!d&&ge(a,function(a,b,c){return Hd.call(c,b)?g=--u>-1:void 0});return e.pop(),f.pop(),s&&(m(e),m(f)),g}function bb(a,b,c,d,e){(Zd(b)?Yb:he)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zd(b))||ie(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zd(j)?j:[]:ie(j)?j:{}),d.push(b),e.push(j),l||bb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function db(a,b){return a+Ed(Vd()*(b-a+1))}function eb(a,b,c){var f=-1,g=ib(),h=a?a.length:0,j=[],l=!b&&h>=v&&g===d,o=c||l?k():j;if(l){var p=i(o);g=e,o=p}for(;++f<h;){var q=a[f],r=c?c(q,f,a):q;(b?!f||o[o.length-1]!==r:g(o,r)<0)&&((c||l)&&o.push(r),j.push(q))}return l?(m(o.array),n(o)):c&&m(o),j}function fb(a){return function(c,d,e){var f={};d=b.createCallback(d,e,3);var g=-1,h=c?c.length:0;if("number"==typeof h)for(;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else he(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function gb(a,b,c,d,e,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Db(a))throw new wd;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=o(m),m[2]&&(m[2]=o(m[2])),m[3]&&(m[3]=o(m[3])),!h||1&m[1]||(m[4]=e),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Id.apply(m[2]||(m[2]=[]),c),l&&Ld.apply(m[3]||(m[3]=[]),d),m[1]|=b,gb.apply(null,m);var n=1==b||17===b?f:Y;return n([a,b,c,d,e,g])}function hb(a){return ae[a]}function ib(){var a=(a=b.indexOf)===rc?d:a;return a}function jb(a){return"function"==typeof a&&Bd.test(a)}function kb(a){var b,c;return a&&Ad.call(a)==R&&(b=a.constructor,!Db(b)||b instanceof b)?(ge(a,function(a,b){c=b}),"undefined"==typeof c||Hd.call(a,c)):!1}function lb(a){return be[a]}function mb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==L||!1}function nb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),r(a,b,"function"==typeof c&&w(c,d,1))}function ob(a,b,c){return r(a,!0,"function"==typeof b&&w(b,c,1))}function pb(a,b){var c=s(a);return b?ee(c,b):c}function qb(a,c,d){var e;return c=b.createCallback(c,d,3),he(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function rb(a,c,d){var e;return c=b.createCallback(c,d,3),tb(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function sb(a,b,c){var d=[];ge(a,function(a,b){d.push(b,a)});var e=d.length;for(b=w(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function tb(a,b,c){var d=_d(a),e=d.length;for(b=w(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function ub(a){var b=[];return ge(a,function(a,c){Db(a)&&b.push(c)}),b.sort()}function vb(a,b){return a?Hd.call(a,b):!1}function wb(a){for(var b=-1,c=_d(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function xb(a){return a===!0||a===!1||a&&"object"==typeof a&&Ad.call(a)==N||!1}function yb(a){return a&&"object"==typeof a&&Ad.call(a)==O||!1}function zb(a){return a&&1===a.nodeType||!1}function Ab(a){var b=!0;if(!a)return b;var c=Ad.call(a),d=a.length;return c==M||c==T||c==L||c==R&&"number"==typeof d&&Db(a.splice)?!d:(he(a,function(){return b=!1}),b)}function Bb(a,b,c,d){return ab(a,b,"function"==typeof c&&w(c,d,2))}function Cb(a){return Pd(a)&&!Qd(parseFloat(a))}function Db(a){return"function"==typeof a}function Eb(a){return!(!a||!X[typeof a])}function Fb(a){return Hb(a)&&a!=+a}function Gb(a){return null===a}function Hb(a){return"number"==typeof a||a&&"object"==typeof a&&Ad.call(a)==Q||!1}function Ib(a){return a&&"object"==typeof a&&Ad.call(a)==S||!1}function Jb(a){return"string"==typeof a||a&&"object"==typeof a&&Ad.call(a)==T||!1}function Kb(a){return"undefined"==typeof a}function Lb(a,c,d){var e={};return c=b.createCallback(c,d,3),he(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Mb(a){var b=arguments,c=2;if(!Eb(a))return a;
if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=w(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=o(arguments,1,c),f=-1,g=k(),h=k();++f<c;)bb(a,e[f],d,g,h);return m(g),m(h),a}function Nb(a,c,d){var e={};if("function"!=typeof c){var f=[];ge(a,function(a,b){f.push(b)}),f=$(f,_(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Ob(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Pb(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=_(arguments,!0,!1,1),h=Eb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Qb(a,c,d,e){var f=Zd(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,h=g&&g.prototype;d=s(h)}return c&&(c=b.createCallback(c,e,4),(f?Yb:he)(a,function(a,b,e){return c(d,a,b,e)})),d}function Rb(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;)e[b]=a[c[b]];return e}function Sb(a){for(var b=arguments,c=-1,d=_(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=nd(e);++c<e;)f[c]=a[d[c]];return f}function Tb(a,b,c){var d=-1,e=ib(),f=a?a.length:0,g=!1;return c=(0>c?Sd(0,f+c):c)||0,Zd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Jb(a)?a.indexOf(b,c):e(a,b,c))>-1:he(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Ub(a,c,d){var e=!0;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&(e=!!c(a[f],f,a)););else he(a,function(a,b,d){return e=!!c(a,b,d)});return e}function Vb(a,c,d){var e=[];c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else he(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function Wb(a,c,d){c=b.createCallback(c,d,3);var e=-1,f=a?a.length:0;if("number"!=typeof f){var g;return he(a,function(a,b,d){return c(a,b,d)?(g=a,!1):void 0}),g}for(;++e<f;){var h=a[e];if(c(h,e,a))return h}}function Xb(a,c,d){var e;return c=b.createCallback(c,d,3),Zb(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}function Yb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else he(a,b);return a}function Zb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_d(a);d=e.length,he(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function $b(a,b){var c=o(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=nd("number"==typeof f?f:0);return Yb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function _b(a,c,d){var e=-1,f=a?a.length:0;if(c=b.createCallback(c,d,3),"number"==typeof f)for(var g=nd(f);++e<f;)g[e]=c(a[e],e,a);else g=[],he(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function ac(a,c,d){var e=-1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>f&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function bc(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];f>j&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);e>g&&(e=g,f=a)});return f}function cc(a,c,d,e){if(!a)return d;var f=arguments.length<3;c=b.createCallback(c,e,4);var g=-1,h=a.length;if("number"==typeof h)for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a);else he(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function dc(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),Zb(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function ec(a,c,d){return c=b.createCallback(c,d,3),Vb(a,function(a,b,d){return!c(a,b,d)})}function fc(a,b,c){if(a&&"number"!=typeof a.length&&(a=Rb(a)),null==b||c)return a?a[db(0,a.length-1)]:q;var d=gc(a);return d.length=Td(Sd(0,b),d.length),d}function gc(a){var b=-1,c=a?a.length:0,d=nd("number"==typeof c?c:0);return Yb(a,function(a){var c=db(0,++b);d[b]=d[c],d[c]=a}),d}function hc(a){var b=a?a.length:0;return"number"==typeof b?b:_d(a).length}function ic(a,c,d){var e;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&!(e=c(a[f],f,a)););else he(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function jc(a,c,d){var e=-1,f=Zd(c),g=a?a.length:0,i=nd("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),Yb(a,function(a,b,d){var g=i[++e]=l();f?g.criteria=_b(c,function(b){return a[b]}):(g.criteria=k())[0]=c(a,b,d),g.index=e,g.value=a}),g=i.length,i.sort(h);g--;){var j=i[g];i[g]=j.value,f||m(j.criteria),n(j)}return i}function kc(a){return a&&"number"==typeof a.length?o(a):Rb(a)}function lc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function mc(a){return $(a,_(arguments,!0,!0,1))}function nc(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function oc(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function pc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:q;return o(a,0,Td(Sd(0,e),f))}function qc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=_b(a,c,d)),_(a,b)}function rc(a,b,c){if("number"==typeof c){var e=a?a.length:0;c=0>c?Sd(0,e+c):c||0}else if(c){var f=Ac(a,b);return a[f]===b?f:-1}return d(a,b,c)}function sc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return o(a,0,Td(Sd(0,f-e),f))}function tc(){for(var a=[],b=-1,c=arguments.length,f=k(),g=ib(),h=g===d,j=k();++b<c;){var l=arguments[b];(Zd(l)||mb(l))&&(a.push(l),f.push(h&&l.length>=v&&i(b?a[b]:j)))}var o=a[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=f[0];if(l=o[p],(s?e(s,l):g(j,l))<0){for(b=c,(s||j).push(l);--b;)if(s=f[b],(s?e(s,l):g(a[b],l))<0)continue a;r.push(l)}}for(;c--;)s=f[c],s&&n(s);return m(f),m(j),r}function uc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:q;return o(a,Sd(0,f-e))}function vc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Sd(0,d+c):Td(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Kd.call(a,f--,1),e--);return a}function xc(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Sd(0,Cd((b-a)/(c||1))),f=nd(e);++d<e;)f[d]=a,a+=c;return f}function yc(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Kd.call(a,e--,1),f--)}return g}function zc(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:Sd(0,c);return o(a,e)}function Ac(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):Zc,c=d(c);g>f;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Bc(){return eb(_(arguments,!0,!0))}function Cc(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),eb(a,c,d)}function Dc(a){return $(a,o(arguments,1))}function Ec(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zd(c)||mb(c))var d=d?eb($(d,c).concat($(c,d))):c}return d||[]}function Fc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?ac(me(a,"length")):0,d=nd(0>c?0:c);++b<c;)d[b]=me(a,b);return d}function Gc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Hc(a,b){if(!Db(b))throw new wd;return function(){return--a<1?b.apply(this,arguments):void 0}}function Ic(a,b){return arguments.length>2?gb(a,17,o(arguments,2),null,b):gb(a,1,null,null,b)}function Jc(a){for(var b=arguments.length>1?_(arguments,!0,!1,1):ub(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=gb(a[e],1,null,null,a)}return a}function Kc(a,b){return arguments.length>2?gb(b,19,o(arguments,2),null,a):gb(b,3,null,null,a)}function Lc(){for(var a=arguments,b=a.length;b--;)if(!Db(a[b]))throw new wd;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Mc(a,b){return b="number"==typeof b?b:+b||a.length,gb(a,4,null,null,null,b)}function Nc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Db(a))throw new wd;if(b=Sd(0,b)||0,c===!0){var n=!0;m=!1}else Eb(c)&&(n=c.leading,l="maxWait"in c&&(Sd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(oe()-g);if(0>=c){e&&Dd(e);var l=j;e=i=j=q,l&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Jd(o,c)},p=function(){i&&Dd(i),e=i=j=q,(m||l!==b)&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=oe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Dd(e)),k=g,f=a.apply(h,d)):e||(e=Jd(p,q))}return r&&i?i=Dd(i):i||b===l||(i=Jd(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Oc(a){if(!Db(a))throw new wd;var b=o(arguments,1);return Jd(function(){a.apply(q,b)},1)}function Pc(a,b){if(!Db(a))throw new wd;var c=o(arguments,2);return Jd(function(){a.apply(q,c)},b)}function Qc(a,b){if(!Db(a))throw new wd;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return Hd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Rc(a){var b,c;if(!Db(a))throw new wd;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Sc(a){return gb(a,16,o(arguments,1))}function Tc(a){return gb(a,32,null,o(arguments,1))}function Uc(a,b,c){var d=!0,e=!0;if(!Db(a))throw new wd;return c===!1?d=!1:Eb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),V.leading=d,V.maxWait=b,V.trailing=e,Nc(a,b,V)}function Vc(a,b){return gb(b,16,[a])}function Wc(a){return function(){return a}}function Xc(a,b,c){var d=typeof a;if(null==a||"function"==d)return w(a,b,c);if("object"!=d)return bd(a);var e=_d(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Eb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ab(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Yc(a){return null==a?"":vd(a).replace(de,hb)}function Zc(a){return a}function $c(a,d,e){var f=!0,g=d&&ub(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=ub(d)),e===!1?f=!1:Eb(e)&&"chain"in e&&(f=e.chain);var h=a,i=Db(h);Yb(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Id.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&Eb(g))return this;g=new h(g),g.__chain__=b}return g})})}function _c(){return a._=zd,this}function ad(){}function bd(a){return function(b){return b[a]}}function cd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Vd();return Td(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return db(a,b)}function dd(a,b){if(a){var c=a[b];return Db(c)?a[b]():c}}function ed(a,c,d){var e=b.templateSettings;a=vd(a||""),d=fe({},d,e);var f,g=fe({},d.imports,e.imports),h=_d(g),i=Rb(g),k=0,l=d.interpolate||G,m="__p += '",n=ud((d.escape||G).source+"|"+l.source+"|"+(l===E?B:G).source+"|"+(d.evaluate||G).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),m+=a.slice(k,h).replace(I,j),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=h+b.length,b}),m+="';\n";var o=d.variable,p=o;p||(o="obj",m="with ("+o+") {\n"+m+"\n}\n"),m=(f?m.replace(y,""):m).replace(z,"$1").replace(A,"$1;"),m="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var r="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+K++ +"]")+"\n*/";try{var s=qd(h,"return "+m+r).apply(q,i)}catch(t){throw t.source=m,t}return c?s(c):(s.source=m,s)}function fd(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=nd(a);for(b=w(b,c,1);++d<a;)e[d]=b(d);return e}function gd(a){return null==a?"":vd(a).replace(ce,lb)}function hd(a){var b=++t;return vd(null==a?"":a)+b}function id(a){return a=new c(a),a.__chain__=!0,a}function jd(a,b){return b(a),a}function kd(){return this.__chain__=!0,this}function ld(){return vd(this.__wrapped__)}function md(){return this.__wrapped__}a=a?cb.defaults(Z.Object(),a,cb.pick(Z,J)):Z;var nd=a.Array,od=a.Boolean,pd=a.Date,qd=a.Function,rd=a.Math,sd=a.Number,td=a.Object,ud=a.RegExp,vd=a.String,wd=a.TypeError,xd=[],yd=td.prototype,zd=a._,Ad=yd.toString,Bd=ud("^"+vd(Ad).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Cd=rd.ceil,Dd=a.clearTimeout,Ed=rd.floor,Fd=qd.prototype.toString,Gd=jb(Gd=td.getPrototypeOf)&&Gd,Hd=yd.hasOwnProperty,Id=xd.push,Jd=a.setTimeout,Kd=xd.splice,Ld=xd.unshift,Md=function(){try{var a={},b=jb(b=td.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Nd=jb(Nd=td.create)&&Nd,Od=jb(Od=nd.isArray)&&Od,Pd=a.isFinite,Qd=a.isNaN,Rd=jb(Rd=td.keys)&&Rd,Sd=rd.max,Td=rd.min,Ud=a.parseInt,Vd=rd.random,Wd={};Wd[M]=nd,Wd[N]=od,Wd[O]=pd,Wd[P]=qd,Wd[R]=td,Wd[Q]=sd,Wd[S]=ud,Wd[T]=vd,c.prototype=b.prototype;var Xd=b.support={};Xd.funcDecomp=!jb(a.WinRTError)&&H.test(p),Xd.funcNames="string"==typeof qd.name,b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:b}},Nd||(s=function(){function b(){}return function(c){if(Eb(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var Yd=Md?function(a,b){W.value=b,Md(a,"__bindData__",W)}:ad,Zd=Od||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==M||!1},$d=function(a){var b,c=a,d=[];if(!c)return d;if(!X[typeof a])return d;for(b in c)Hd.call(c,b)&&d.push(b);return d},_d=Rd?function(a){return Eb(a)?Rd(a):[]}:$d,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},be=wb(ae),ce=ud("("+_d(be).join("|")+")","g"),de=ud("["+_d(ae).join("")+"]","g"),ee=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=w(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&X[typeof e])for(var k=-1,l=X[typeof e]&&_d(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},fe=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&X[typeof e])for(var j=-1,k=X[typeof e]&&_d(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},ge=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},he=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(var g=-1,h=X[typeof e]&&_d(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},ie=Gd?function(a){if(!a||Ad.call(a)!=R)return!1;var b=a.valueOf,c=jb(b)&&(c=Gd(b))&&Gd(c);return c?a==c||Gd(a)==c:kb(a)}:kb,je=fb(function(a,b,c){Hd.call(a,c)?a[c]++:a[c]=1}),ke=fb(function(a,b,c){(Hd.call(a,c)?a[c]:a[c]=[]).push(b)}),le=fb(function(a,b,c){a[c]=b}),me=_b,ne=Vb,oe=jb(oe=pd.now)&&oe||function(){return(new pd).getTime()},pe=8==Ud(x+"08")?Ud:function(a,b){return Ud(Jb(a)?a.replace(F,""):a,b||0)};return b.after=Hc,b.assign=ee,b.at=Sb,b.bind=Ic,b.bindAll=Jc,b.bindKey=Kc,b.chain=id,b.compact=lc,b.compose=Lc,b.constant=Wc,b.countBy=je,b.create=pb,b.createCallback=Xc,b.curry=Mc,b.debounce=Nc,b.defaults=fe,b.defer=Oc,b.delay=Pc,b.difference=mc,b.filter=Vb,b.flatten=qc,b.forEach=Yb,b.forEachRight=Zb,b.forIn=ge,b.forInRight=sb,b.forOwn=he,b.forOwnRight=tb,b.functions=ub,b.groupBy=ke,b.indexBy=le,b.initial=sc,b.intersection=tc,b.invert=wb,b.invoke=$b,b.keys=_d,b.map=_b,b.mapValues=Lb,b.max=ac,b.memoize=Qc,b.merge=Mb,b.min=bc,b.omit=Nb,b.once=Rc,b.pairs=Ob,b.partial=Sc,b.partialRight=Tc,b.pick=Pb,b.pluck=me,b.property=bd,b.pull=wc,b.range=xc,b.reject=ec,b.remove=yc,b.rest=zc,b.shuffle=gc,b.sortBy=jc,b.tap=jd,b.throttle=Uc,b.times=fd,b.toArray=kc,b.transform=Qb,b.union=Bc,b.uniq=Cc,b.values=Rb,b.where=ne,b.without=Dc,b.wrap=Vc,b.xor=Ec,b.zip=Fc,b.zipObject=Gc,b.collect=_b,b.drop=zc,b.each=Yb,b.eachRight=Zb,b.extend=ee,b.methods=ub,b.object=Gc,b.select=Vb,b.tail=zc,b.unique=Cc,b.unzip=Fc,$c(b),b.clone=nb,b.cloneDeep=ob,b.contains=Tb,b.escape=Yc,b.every=Ub,b.find=Wb,b.findIndex=nc,b.findKey=qb,b.findLast=Xb,b.findLastIndex=oc,b.findLastKey=rb,b.has=vb,b.identity=Zc,b.indexOf=rc,b.isArguments=mb,b.isArray=Zd,b.isBoolean=xb,b.isDate=yb,b.isElement=zb,b.isEmpty=Ab,b.isEqual=Bb,b.isFinite=Cb,b.isFunction=Db,b.isNaN=Fb,b.isNull=Gb,b.isNumber=Hb,b.isObject=Eb,b.isPlainObject=ie,b.isRegExp=Ib,b.isString=Jb,b.isUndefined=Kb,b.lastIndexOf=vc,b.mixin=$c,b.noConflict=_c,b.noop=ad,b.now=oe,b.parseInt=pe,b.random=cd,b.reduce=cc,b.reduceRight=dc,b.result=dd,b.runInContext=p,b.size=hc,b.some=ic,b.sortedIndex=Ac,b.template=ed,b.unescape=gd,b.uniqueId=hd,b.all=Ub,b.any=ic,b.detect=Wb,b.findWhere=Wb,b.foldl=cc,b.foldr=dc,b.include=Tb,b.inject=cc,$c(function(){var a={};return he(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=pc,b.last=uc,b.sample=fc,b.take=pc,b.head=pc,he(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.1",b.prototype.chain=kd,b.prototype.toString=ld,b.prototype.value=md,b.prototype.valueOf=md,Yb(["join","pop","shift"],function(a){var d=xd[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),Yb(["push","reverse","sort","unshift"],function(a){var c=xd[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),Yb(["concat","slice","splice"],function(a){var d=xd[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),b}var q,r=[],s=[],t=0,u=+new Date+"",v=75,w=40,x=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",y=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,F=RegExp("^["+x+"]*0+(?=.$)"),G=/($^)/,H=/\bthis\b/,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],K=0,L="[object Arguments]",M="[object Array]",N="[object Boolean]",O="[object Date]",P="[object Function]",Q="[object Number]",R="[object Object]",S="[object RegExp]",T="[object String]",U={};U[P]=!1,U[L]=U[M]=U[N]=U[O]=U[Q]=U[R]=U[S]=U[T]=!0;var V={leading:!1,maxWait:0,trailing:!1},W={configurable:!1,enumerable:!1,value:null,writable:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,$=X[typeof c]&&c&&!c.nodeType&&c,_=X[typeof b]&&b&&!b.nodeType&&b,ab=_&&_.exports===$&&$,bb=X[typeof a]&&a;!bb||bb.global!==bb&&bb.window!==bb||(Z=bb);var cb=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=cb,define(function(){return cb})):$&&_?ab?(_.exports=cb)._=cb:$._=cb:Z._=cb}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(a,b){var c=Object.prototype.toString;b.exports=function(a){switch(c.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==typeof a&&a&&"number"==typeof a.length)try{if("function"==typeof a.callee)return"arguments"}catch(b){if(b instanceof TypeError)return"arguments"}return null===a?"null":void 0===a?"undefined":a&&1===a.nodeType?"element":a===Object(a)?"object":typeof a}},{}],7:[function(a,b){var c,d,e,f,g,h,i,j,k;j=window.wuyinote={},i=a("./util.coffee"),e=a("./config.coffee"),c=a("eventemitter2").EventEmitter2,k=a("lodash"),window._=k,f=a("./databus.coffee"),a("./filters/processed-content.coffee"),a("./filters/limited.coffee"),g=new c({maxLisnteners:Number.MAX_VALUE}),h={debug:function(){return console.log.apply(console,arguments)}},d=f.ajax,j.common=b.exports={util:i,ajax:d,log:h,databus:f,eventbus:g,EventEmitter:c}},{"./config.coffee":8,"./databus.coffee":9,"./filters/limited.coffee":10,"./filters/processed-content.coffee":11,"./util.coffee":12,eventemitter2:4,lodash:5}],8:[function(a,b){b.exports={server:"http://localhost:5000",debug:!0}},{}],9:[function(a,b){var c,d,e;e=a("../../lib/ajax"),d=b.exports={},d.ajax=c=function(a){var b;return a.data&&(a.contentType="application/json",a.data=JSON.stringify(a.data)),a.error&&(b=a.error,a.error=function(a){var c;return c=JSON.parse(a.responseText).message,b(c,a.status)}),e(a)},d.createNewNotebook=function(a,b,d){return c({url:"/notebooks",type:"POST",data:a,success:function(a){return"function"==typeof b?b(a):void 0},error:function(a,b){return"function"==typeof d?d(a,b):void 0}})},d.makeNotebookActive=function(a,b){return c({url:"/notebooks/active_notebook",type:"PUT",data:{notebook_id:a.id},success:function(a){return"function"==typeof b?b(a):void 0}})},d.createNewPage=function(a,b,d){var e;return e={notebook_id:a.id,index:null!=d?d:a.pages.length+1},c({url:"/pages",type:"POST",data:e,success:function(a){return"function"==typeof b?b(a):void 0}})},d.makePageActive=function(a,b,d){return c({url:"/pages/active_page",type:"PUT",data:{notebook_id:a.id,page_id:b.id},success:function(a){return"function"==typeof d?d(a):void 0}})},d.loadPages=function(a,b){return a.id&&!a.loaded?c({url:"/notebooks/"+a.id,type:"GET",success:function(c){var d,e,f,g;for(a.loaded=!0,g=c.pages,e=0,f=g.length;f>e;e++)d=g[e],d.content||(d.content="");return"function"==typeof b?b(c.pages):void 0},error:function(){}}):void 0},d.loadNotebooks=function(a){return c({url:"/notebooks",type:"GET",success:function(b){return"function"==typeof a?a(b.notebooks):void 0}})},d.savePageContent=function(a,b,d){return c({url:"/pages/"+a,type:"PATCH",data:{content:null!=b?b:""},success:function(a){return"function"==typeof d?d(a):void 0}})},d.deletePage=function(a,b){return c({url:"/pages/"+a,type:"DELETE",success:function(a){return"function"==typeof b?b(a):void 0}})},d.deleteNotebook=function(a,b){return c({url:"/notebooks/"+a,type:"DELETE",success:function(a){return"function"==typeof b?b(a):void 0}})},d.modifyNotebookName=function(a,b,d){return c({url:"/notebooks/"+a.id,type:"PATCH",data:{name:a.name},success:function(a){return"function"==typeof b?b(a):void 0},error:function(a,b){return"function"==typeof d?d(a,b):void 0}})},d.checkEmailAvailability=function(a,b,d){return c({url:"/users/check_email_availability/"+a,type:"GET",success:b,error:d})},d.checkUsernameAvailability=function(a,b,d){return c({url:"/users/check_username_availability/"+a,type:"GET",success:b,error:d})}},{"../../lib/ajax":1}],10:[function(){Vue.filter("limited",function(a){return a?a.slice(0,20):void 0})},{}],11:[function(){Vue.filter("processed-content",function(a){return a?a.replace(/<[^>]*>/g,""):void 0})},{}],12:[function(a){var b;b=a("path")},{path:2}]},{},[7]),function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;e=a("./dashboard.html"),q=wuyinote.common,f=q.databus,j=q.log,h=q.eventbus,Vue.component("f-dashboard",{template:e,computed:{activeNotebook:{$get:function(){return _.find(this.notebooks,{id:this.user.active_notebook_id})}},activePage:{$get:function(){return _.find(this.activeNotebook.pages,{id:this.activeNotebook.active_page_id})}}},methods:{scroll:function(a){var b,c,d,e;return a.preventDefault(),e=a.targetVM,d=a.currentTarget,b=40,c=a.detail?-120*a.detail:a.wheelDelta,0>c?d.scrollLeft+=b:d.scrollLeft-=b},activateNotebook:function(a){var b;if(a&&a!==this.user.active_notebook_id)return p(this),b=_.find(this.notebooks,{id:a}),c(b,this)},activatePage:function(a){return a!==this.activeNotebook.active_page_id?(p(this),this.activeNotebook.active_page_id=a,h.emit("active-page-change"),f.makePageActive(this.activeNotebook,this.activePage,function(){return j.debug("Page activated. ok")})):void 0},clickHandler:function(a){return a.stopPropagation()},createNewPage:function(){var a;return a=this.activeNotebook,a.pages.length>=this.user.pages_limitation?void alert("你最多只能创建"+this.user.pages_limitation+"页"):f.createNewPage(a,function(b){return j.debug("Page created, ok"),a.pages.push(b),a.active_page_id=b.id,h.emit("active-page-change"),f.makePageActive(a,b,function(){return j.debug("Page activated, ok.")})})},createNewNotebook:function(){var a;return this.notebooks.length>=this.user.notebooks_limitation?void alert("你最多只能创建"+this.user.notebooks_limitation+"本笔记"):(a={editMode:!0,pages:null,id:null,active_page_id:null,name:"",index:this.notebooks.length+1},this.notebooks.push(a),g(function(a){return function(){return a.$el.querySelector("input.last").focus()}}(this)))},deleteNotebook:function(a,b){var c;return a.stopPropagation(),c=this.activeNotebook,1===this.notebooks.length?void alert("至少要留有一本笔记本哦"):confirm("该笔记本下所有笔记也会同时被删除，确认要删除吗？")?(j.debug("Deleting Notebook "+b),f.deleteNotebook(b,function(a){return function(){return l(a,b,function(){return n(a,b)})}}(this))):void 0},deletePage:function(a,b){var c,d;return a.stopPropagation(),c=this.activeNotebook,d=this.activePage,1===c.pages.length?void alert("每本笔记本至少要有一页笔记哦"):(j.debug("Deleting Page "+b),f.deletePage(b,function(){return m(c,d,b),o(c,b)}))},enterHandlerOfNameInput:function(a,b){var c;return c=13,b.keyCode===c?this.checkAndSend(a,b):void 0},enableEditMode:function(a){return a.editMode=!0,g(function(){var b;return b=a.$el.querySelector("input"),b.focus(),b.select()})},checkAndSend:function(a){var b,c,e,f;return c=a.$el.querySelector("input"),f=i(a.name),f.valid?a.id?k(a,c):(b=this.notebooks.length,e=a.name,d({name:e,index:b},a,c,this)):(alert(f.msg),void c.focus())}}}),i=function(a){var b;return b=30,a&&0!==a.length?a.length>b?{valid:!1,msg:"笔记名字长度不能超过"+b+"个字符"}:{valid:!0}:{valid:!1,msg:"笔记名字不能为空"}},d=function(a,c,d,e){return f.createNewNotebook(a,function(a){return _.extend(c,a),j.debug("Notebook created, ok",a),c.editMode=!1,b(c,e)},function(a){return alert(a),d.focus()})},k=function(a,b){return f.modifyNotebookName(a,function(){return a.editMode=!1,j.debug("Notebook name saved.")},function(a){return alert("Name has already existed."===a?"笔记名已经存在，请选择另外的名字":a),b.focus()})},m=function(a,b,c,d){var e,g,i;return b.id===c?(g=b.index-1,e=a.pages,i=e[g+1]||e[g-1],a.active_page_id=i.id,h.emit("active-page-change"),f.makePageActive(a,i,function(){return j.debug("Page active after deletion."),"function"==typeof d?d():void 0})):void 0},o=function(a,b){var c,d,e,f,g,h,i;for(e=_.find(a.pages,{id:b}),d=e.index-1,a.pages.splice(d,1),h=a.pages.slice(d),i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(c.index--);return i},l=function(a,b,d){var e,f,g;return a.activeNotebook.id===b?(f=a.activeNotebook.index-1,e=a.notebooks,g=e[f+1]||e[f-1],c(g,a,d)):"function"==typeof d?d():void 0},n=function(a,b){var c,d,e,f,g,h,i;for(e=_.find(a.notebooks,{id:b}),d=e.index-1,a.notebooks.splice(d,1),h=a.notebooks.slice(d),i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(c.index--);return i},p=function(a){var b;return b=a.activePage,f.savePageContent(b.id,b.content,function(){return j.debug("Save content before switching")})},c=function(a,c,d){return a.loaded?(b(a,c),"function"==typeof d?d():void 0):f.loadPages(a,function(){return function(e){return j.debug("Pages of "+a.id+" loaded",e),a.pages=e,b(a,c),"function"==typeof d?d():void 0}}(this))},b=function(){return function(a,b){return b.user.active_notebook_id=a.id,f.makeNotebookActive(a,function(){return j.debug("Notebook active")})}}(this),g=function(a){return setTimeout(a,10)}},{"./dashboard.html":2}],2:[function(a,b){b.exports='<div class="dashboard"      v-show="dashboardActive"      v-transition     v-on="click: clickHandler">  <ul class="pages items"      v-on="mousewheel: scroll,            DOMMouseScroll: scroll">    <li class="item"       v-repeat="activeNotebook.pages"      v-class="active: activeNotebook.active_page_id == id"      v-on="click: activatePage(id)">      <i class="fa fa-times delete"          v-on="click: deletePage($event, id)"></i>      <p>      {{index}} . {{content|processed-content|limited}}      </p>    </li>    <li class="item plus"        v-show="user.active_notebook_id != -1"        v-on="click: createNewPage">      <i class="fa fa-plus fa-2x plus"></i>    </li>  </ul>  <ul class="notebooks items"      v-on="mousewheel: scroll,            DOMMouseScroll: scroll">    <li class="notebook item"       v-repeat="notebooks"      v-class="active: user.active_notebook_id == id"      v-on="click: activateNotebook(id)">      <i class="fa fa-times delete"          v-on="click: deleteNotebook($event, id)"></i>      <div class="decoration"></div>      <p title="双击修改笔记本名"         v-show="!editMode"         v-on="dblclick: enableEditMode(this, $event)">{{name.slice(0, 16)}}</p>      <input class="notebook-name"         v-class="last: $index == notebooks.length - 1"        v-model="name"        v-show="editMode"        v-on="blur:checkAndSend(this, $event),              keydown: enterHandlerOfNameInput(this, $event)">    </li>    <li class="notebook item plus" v-on="click: createNewNotebook(this, $event)">      <i class="fa fa-plus fa-2x plus"></i>    </li>  </ul></div>'},{}],3:[function(){},{}]},{},[1,3]),function c(a,b,d){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=b[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,c,a,b,d)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b,c,d,e,f,g,h,i,j,k,l;l=wuyinote.common,h=l.log,c=l.databus,e=l.eventbus,d=a("./editor.html"),Vue.component("f-editor",{template:d,computed:{activeNotebook:{$get:function(){return _.find(this.notebooks,{id:this.user.active_notebook_id})}},activePage:{$get:function(){return _.find(this.activeNotebook.pages,{id:this.activeNotebook.active_page_id})}},content:{$get:function(){return this.activePage.content},$set:function(a){var b;return b=this.activePage,b.content!==a?(b.content=a,this.dirty=!0):void 0}}},methods:{deferToSave:function(){return clearTimeout(this.saveTimer),this.saveTimer=setTimeout(function(a){return function(){return i(a)}}(this),3e3)}},created:function(){return g(this),setTimeout(function(a){return function(){return a.dirty=!1,a.editor=new wysihtml5.Editor("editor",{toolbar:"editor-toolbar",parserRules:wysihtml5ParserRules,stylesheets:["/lib/rich-editor.css"]}),a.editor.on("load",function(){return j(a),b(a),f(a),k(a),e.emit("editor-loaded")})}}(this))}}),b=function(a){var b,c,d,e,f;return f=[],b=f[0],c=f[1],d=f[2],e=f[3],a.editor.on("show:dialog",function(a){var f,g;if("insertImage"===a.command){if(f=[a.commandLink,a.dialogContainer],b=f[0],c=f[1],d)return d.className="",e.style.display="none"
}else if("createLink"===a.command&&(g=[a.commandLink,a.dialogContainer],d=g[0],e=g[1],b))return b.className="",c.style.display="none"})},g=function(a){var b;return b=window.onscroll,window.onscroll=function(){var c;return c=document.body.scrollTop||window.pageYOffset,a.floatBar=0!==c,b?b.apply(this,arguments):void 0}},j=function(a){var b;return b=function(){return a.content=a.editor.composer.element.innerHTML,a.deferToSave()},a.editor.composer.element.addEventListener("keyup",b),a.editor.on("aftercommand:composer",b)},f=function(a){return a.editor.composer.element.addEventListener("keydown",function(){return function(b){var c;if(c=83,b.ctrlKey){if(b.keyCode===c)return b.preventDefault(),i(a);if(192===b.keyCode)return e.emit("toggle-dashboard")}}}(this))},k=function(a){var b;return b=function(){return a.editor.composer.element.innerHTML=a.activePage.content},a.$watch("user.active_notebook_id",b),e.on("active-page-change",b)},i=function(a){var b;return b=a.activePage,a.dirty?c.savePageContent(b.id,b.content,function(){return h.debug("Content saved, ok."),a.dirty=!1}):void 0}},{"./editor.html":2}],2:[function(a,b){b.exports='<div class="editor"><div id="editor-toolbar"     style="display: none;"     v-class="float: floatBar">  <a data-wysihtml5-command="bold" title="加粗"><i class="fa fa-bold"></i></a>  <a data-wysihtml5-command="italic" title="斜体"><i class="fa fa-italic"></i></a>  <a data-wysihtml5-command="underline" title="下划线"><i class="fa fa-underline"></i></a>  <a class="drop-down-command"     title="段落"     v-on="mouseover: showFontList = true,           mouseleave: showFontList = false">    <i class="fa fa-header"></i>    <i class="fa fa-sort-down down"></i>    <ul class="drop-down-list" v-show="showFontList">      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1">          H1        </span>      </li>      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h2">          H2        </span>      </li>      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h3">          H3        </span>      </li>      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h4">          H4        </span>      </li>      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h5">          H5        </span>      </li>      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h6">          H6        </span>      </li>      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="p">          P        </span>      </li>      <li>        <span data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="blockquote">          Quote        </span>      </li>    </ul>  </a>  <a class="drop-down-command"     title="颜色"     v-on="mouseover: showColorPicker = true,           mouseleave: showColorPicker = false">    <i class="fa fa-eraser"></i>    <i class="fa fa-sort-down down"></i>    <ul class="drop-down-list color-picker" v-show="showColorPicker">      <li>        <span class="red" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="red">          R        </span>      </li>      <li>        <span class="green" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="green">          G        </span>      </li>      <li>        <span class="blue" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="blue">          B        </span>      </li>      <li>        <span class="yellow" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="yellow">          Y        </span>      </li>    </ul>  </a>  <a data-wysihtml5-command="justifyCenter" title="居中"><i class="fa fa-align-center"></i></a>  <a data-wysihtml5-command="justifyLeft" title="居左"><i class="fa fa-align-left"></i></a>  <a data-wysihtml5-command="justifyRight" title="居右"><i class="fa fa-align-right"></i></a>  <a data-wysihtml5-command="insertUnOrderedList" title="无序列表">    <i class="fa fa-list-ul"></i>  </a>  <a data-wysihtml5-command="insertOrderedList" title="有序列表">    <i class="fa fa-list-ol"></i>  </a>  <!--Command needs dialog-->  <a data-wysihtml5-command="createLink"><i class="fa fa-link" title="插入链接"></i></a>  <a data-wysihtml5-command="insertImage"><i class="fa fa-image" title="插入图片"></i></a>  <!--Dialogs-->  <div class="editor-dialog" data-wysihtml5-dialog="createLink" style="display: none;">    <label>      网页链接：      <input data-wysihtml5-dialog-field="href"        value="http://"         class="text"        spellcheck="false">    </label>    <a data-wysihtml5-dialog-action="save">确定</a> <a data-wysihtml5-dialog-action="cancel">取消</a>  </div>  <div class="editor-dialog" data-wysihtml5-dialog="insertImage" style="display: none;">    <label>      图片链接：      <input data-wysihtml5-dialog-field="src"         value="http://"        class="text"        spellcheck="false">    </label>    <a data-wysihtml5-dialog-action="save">确定</a>    <a data-wysihtml5-dialog-action="cancel">取消</a>  </div></div><div class="content">  <div class="notification">    <span v-show="dirty">*</span>    <i>{{activeNotebook.name}}</i> - 第{{activePage.index}}页  </div>  <textarea id="editor" spellcheck=\'false\'>{{content}}</textarea></div></div>'},{}],3:[function(){},{}]},{},[1,3]),function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=b[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,d,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;d=a("./entry.html"),h=a("./prompt.html"),n=wuyinote.common,b=n.ajax,e=n.eventbus,c=n.databus,g=function(){return function(a,c){var d,f,g;return d=a.email,f=a.password,g=a,b({url:"/users/me",type:"POST",data:g,success:function(a){return c.loginAlarmShow=!1,wuyinote.common.currentUser=a,e.emit("entry:login-success",a)},error:function(){return c.loginAlarmShow=!0,c.$el.querySelector("div.login-form input").focus()}})}}(this),i=function(a){return b({url:"/users",type:"POST",data:a.signupData,success:function(){return function(){return wuyinote.common.isFirstLogin=!0,wuyinote.common.firstLoginTpl=h,g(a.signupData,a)}}(this),error:function(a,b){return alert(b+": "+a)}})},Vue.component("f-entry",{template:d,data:{titleShow:!1,signupFormShow:!0},methods:{login:g,signup:function(){var a;return this.isEmailValid&&this.isUsernameValid&&this.isPasswordValid?void i(this):(a=[],this.isEmailValid||a.push("邮箱"),this.isUsernameValid||a.push("用户名"),this.isPasswordValid||a.push("密码"),this.signupFormAlarm=a.join("、")+"好像有点不大正确？")},enterToLogin:function(a){var b;return b=13,a.keyCode===b?this.login(this.loginData,this):void 0},enterToSignup:function(a){var b;return b=13,a.keyCode===b?this.signup():void 0},checkEmailAvailability:function(){return this.isEmailValid?(this.emailStatus="loading",c.checkEmailAvailability(this.signupData.email,function(a){return function(){return a.emailStatus="ok",a.emailNotification="邮箱可用 :)"}}(this),function(a){return function(){return a.emailStatus="used",a.isEmailValid=!1,a.emailNotification="邮箱已注册 :("}}(this),function(){return function(){}}(this))):void 0},checkUsernameAvailability:function(){return this.isUsernameValid?(this.usernameStatus="loading",c.checkUsernameAvailability(this.signupData.username,function(a){return function(){return a.usernameStatus="ok",a.usernameNotification="用户名可用 :)"}}(this),function(a){return function(){return a.usernameStatus="used",a.isUsernameValid=!1,a.usernameNotification="用户名已注册 :("}}(this),function(){return function(){}}(this))):void 0}},created:function(){return setTimeout(function(a){return function(){return a.titleShow=!0}}(this),200),f(this),j(this)}}),f=function(a){return a.$watch("signupFormShow",function(b){return setTimeout(function(){return b?a.$el.querySelector("div.signup-form input").focus():a.$el.querySelector("div.login-form input").focus()})})},j=function(a){return k(a),m(a),l(a)},k=function(a){return a.$watch("signupData.email",function(b){var c;return b.length>0?(a.emailStatus=void 0,c=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,c.test(b)?(a.isEmailValid=!0,a.emailNotification="邮箱格式正确"):(a.isEmailValid=!1,a.emailNotification="邮箱格式不正确")):void 0})},m=function(a){return a.$watch("signupData.username",function(b){var c;return b.length>0?(a.usernameStatus=void 0,c=/^[\w\d_]{4,30}$/,c.test(b)?(a.isUsernameValid=!0,a.usernameNotification="用户名格式正确"):(a.isUsernameValid=!1,a.usernameNotification="4~30个英文字符、数字、下划线")):void 0})},l=function(a){return a.$watch("signupData.password",function(b){var c;return b.length>0?6<=(c=b.length)&&30>=c?(a.isPasswordValid=!0,a.passwordNotification="密码格式正确"):(a.isPasswordValid=!1,a.passwordNotification="密码格式不正确"):void 0})}},{"./entry.html":2,"./prompt.html":3}],2:[function(a,b){b.exports='<div class="entry">  <div class="text">    <div class="title"         v-show="titleShow"         v-transition>无印笔记</div>    <div class="sub-title"          v-show="titleShow"         v-transition>极简主义笔记本</div>  </div>  <div class="forms">    <div class="signup-form form"          v-show="signupFormShow"         v-transition>      <label>        <span class="key">邮箱</span>         <input type="email"               placeholder="example@mail.com"                v-model="signupData.email"               v-on="blur: checkEmailAvailability">        <span class="notification">          <i v-show="emailStatus !== undefined"              v-class="               fa-check: emailStatus === \'ok\',               fa-times: emailStatus === \'used\',               fa-spinner: emailStatus === \'loading\',               fa-spin: emailStatus === \'loading\'"             class="fa">          </i>          <span>{{emailNotification}}</span>        </span>      </label>      <label>        <span class="key">用户名</span>        <input type="text"                placeholder="4~30 个字符"               v-model="signupData.username"               v-on="blur: checkUsernameAvailability">        <span class="notification">          <i v-show="usernameStatus !== undefined"              v-class="               fa-check: usernameStatus === \'ok\',               fa-times: usernameStatus === \'used\',               fa-spinner: usernameStatus === \'loading\',               fa-spin: usernameStatus === \'loading\'"             class="fa">          </i>          <span>{{usernameNotification}}</span>        </span>      </label>      <label>        <span class="key">密码</span>        <input type="password"                placeholder="6~30 位密码"               v-model="signupData.password"               v-on="keydown: enterToSignup">        <span class="notification">          <i v-show="isPasswordValid !== undefined"              v-class="               fa-times: !isPasswordValid,               fa-check: isPasswordValid"             class="fa">          </i>          <span>{{passwordNotification}}</span>        </span>      </label>      <div class="alarm" v-show="signupFormAlarm">{{signupFormAlarm}}</div>      <button v-on="click: signup">马上注册</button>      <a class="router"          v-on="click: signupFormShow = false">已有账号，直接登陆 >></a>    </div>    <div class="login-form form"          v-show="!signupFormShow"         v-transition>      <label>        <span class="key">邮箱</span>         <input type="email"                v-model="loginData.email">      </label>      <label>        <span class="key">密码</span>        <input type="password"                v-model="loginData.password"               v-on="keydown: enterToLogin">      </label>      <div class="alarm" v-show="loginAlarmShow">        邮箱或者密码不正确      </div>      <a class="router"          v-on="click: signupFormShow = true"><< 返回注册</a>      <button v-on="click: login(loginData, this)">登陆</button>    </div>  </div></div>'},{}],3:[function(a,b){b.exports='<h1 class="wysiwyg-text-align-center">Chapter I - A Riddle</h1><br>有一个谜语想考考你，你想知道答案吗？<br><br>提示：<b>ctrl + `</b>'},{}],4:[function(){},{}]},{},[1,4]),function e(a,b,c){function d(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=b[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return d(c?c:b)},j,j.exports,e,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)d(c[g]);return d}({1:[function(a){var b,c,d,e,f,g;d=a("./feifanote.html"),g=wuyinote.common,b=g.ajax,c=g.eventbus,f=g.log,Vue.component("f-feifanote",{template:d,data:{appStatus:{}},methods:{clickHandler:function(){}},created:function(){return this.appStatus=wuyinote.common.appStatus,c.on("toggle-dashboard",function(a){return function(){return a.appStatus.dashboardActive=!a.appStatus.dashboardActive}}(this)),e(this)}}),e=function(){return document.addEventListener("keydown",function(){return function(a){return a.ctrlKey&&192===a.keyCode?c.emit("toggle-dashboard"):void 0}}(this))}},{"./feifanote.html":2}],2:[function(a,b){b.exports='<div class="feifanote" v-on="click: clickHandler">  <f-header v-with="appStatus"></f-header>  <f-editor v-with="appStatus"></f-editor>  <f-dashboard v-with="appStatus"></f-dashboard>  <f-footer></f-footer></div>'},{}],3:[function(){},{}]},{},[1,3]),function f(a,b,c){function d(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(e)return e(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=b[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return d(c?c:b)},j,j.exports,f,a,b,c)}return b[g].exports}for(var e="function"==typeof require&&require,g=0;g<c.length;g++)d(c[g]);return d}({1:[function(a){var b;b=a("./footer.html"),Vue.component("f-footer",{template:b})},{"./footer.html":2}],2:[function(a,b){b.exports='<div class="footer">  <a href="/about" target="_blank">关于</a>  <a href="/" target="_blank">合作</a>  <a href="/feedback" target="_blank">反馈</a></div>'},{}],3:[function(){},{}]},{},[1,3]),function g(a,b,c){function d(f,h){if(!b[f]){if(!a[f]){var i="function"==typeof require&&require;if(!h&&i)return i(f,!0);if(e)return e(f,!0);throw new Error("Cannot find module '"+f+"'")}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,g,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a){var b,c,d,e,f,g;d=a("./header.html"),f=a("./logo-info.html"),b=wuyinote.common.ajax,Vue.component("f-header",{template:d,methods:{toggleDashboard:function(a){return this.dashboardActive=!this.dashboardActive,a.stopPropagation()},logout:function(){return b({url:"/users/me",type:"DELETE",success:function(){return console.log("Logout success."),window.location.reload()}})}},created:function(){return g(),c(this),setTimeout(function(a){return function(){return e(a)}}(this))}}),c=function(a){var b;return b=a.$el.querySelector("#dashboard-action"),new Opentip(b,"快捷键：Ctrl + `")},e=function(a){var b;return b=a.$el.querySelector("div.logo"),f=f.replace("notebooksLimitation",a.user.notebooks_limitation),f=f.replace("pagesLimitation",a.user.pages_limitation),new Opentip(b,f,{target:null})},g=function(){return Opentip.styles.wuyinote={target:!0,delay:0,tipJoint:"bottom",background:"#fff",borderColor:"#eee"},Opentip.defaultStyle="wuyinote"}},{"./header.html":2,"./logo-info.html":3}],2:[function(a,b){b.exports='<div class="header">  <div class="logo"><a>无印笔记</a></div>  <div class="actions">    <input placeholder="搜索"/>    <div class="right-actions">      <div         id="dashboard-action"        class="action"        v-on="click: toggleDashboard">仪表盘</div>      <div class="action user">        {{user.username}}        <i title="退出"           v-on="click: logout"            class="fa fa-sign-out"></i>      </div>    </div>  </div></div>'},{}],3:[function(a,b){b.exports='<div class="logo-info">  <div class="list-info">    <div>测试阶段：</div>    <div>1. 你最多可以创建 notebooksLimitation 本笔记。</div>    <div>2. 每本笔记最多 pagesLimitation 页。</div>  </div>  <div class="notification-info">    <i class="fa fa-info-circle"></i>    无印笔记在不断地测试和完善当中，如果你喜欢她，希望你能点击页面下方的“反馈”，给予我们宝贵的意见。:)  </div></div>'},{}],4:[function(){},{}]},{},[1,4]),function h(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var i="function"==typeof require&&require;if(!g&&i)return i(f,!0);if(e)return e(f,!0);throw new Error("Cannot find module '"+f+"'")}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,h,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b){var c,d,e,f,g,h,i;d=function(a){var b;return{name:a,activePageIndex:Math.floor(30*Math.random()),pages:function(){var a,c;for(c=[],b=a=1;30>=a;b=++a)c.push(e());return c}()}},e=function(){return{content:""+Math.random()}},g=["Math","English","Database","Python","Jerry","JavaScript","NodeJS","PHP","Livoras"],h=function(){var a,b,c;for(c=[],a=0,b=g.length;b>a;a++)f=g[a],c.push(d(f));return c}(),c=h[Math.floor(Math.random()*h.length)],i={id:1,username:"Livoras",email:"me@livoras.com"},b.exports={notebooks:h,activeNotebook:c,user:i}},{}]},{},[1]),function j(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);throw new Error("Cannot find module '"+f+"'")}var i=b[f]={exports:{}};a[f][0].call(i.exports,function(b){var c=a[f][1][b];return d(c?c:b)},i,i.exports,j,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(){var a,b,c,d,e,f,g,h,i,j,k;k=wuyinote.common,c=k.eventbus,b=k.databus,g=k.log,a=wuyinote.common.appStatus={},j=initData.user,wuyinote.common.currentUser=j,a.user=j,e=function(){return c.on("editor-loaded",function(){return g.debug("Editor Loaded! Hide mask."),h.maskShow=!1}),f(function(){return function(){return d()}}(this))},f=function(c){return b.loadNotebooks(function(d){var e;return a.notebooks=d,e=_.find(d,{id:a.user.active_notebook_id}),b.loadPages(e,function(a){return e.pages=a,i(a[0]),"function"==typeof c?c():void 0})})},i=function(a){return wuyinote.common.isFirstLogin?a.content=wuyinote.common.firstLoginTpl:void 0},d=function(){return a=a,g.debug(a.notebooks),g.debug("App initialized!"),document.body.className="",h.currentView="f-feifanote"},h=new Vue({el:"#container",data:{maskShow:!1,currentView:"",appStatus:a},created:function(){return initData.is_login?(this.maskShow=!0,e()):this.currentView="f-entry",c.on("entry:login-success",function(b){return function(c){return b.maskShow=!0,j=wuyinote.common.currentUser=c,a.user=j,e()}}(this))}})},{}]},{},[1]);